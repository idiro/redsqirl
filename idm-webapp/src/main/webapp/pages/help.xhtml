<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">

<a4j:loadBundle basename="MessagesResources" var="messages" />

<head>
<script	src='#{facesContext.externalContext.requestContextPath}/js/canvas.js' type="text/javascript" />
<script>

    var historyHelp = new Array("btIndex");
    var historyHelpIndex = 0;

	jQuery(document).on("click", ".stopLink", function(e){
	    if(! jQuery('#notMoveHelp').is(':checked')){
		var id = jQuery(this).attr('id');
		if( historyHelp[historyHelpIndex] != id ){
            jQuery("#nextHelp").attr("disabled", true);
            jQuery("#prevHelp").attr("disabled", false);
		    jQuery("#helpIndex").hide();
            jQuery("#helpPanel").show();
		    jQuery("#contentHelp").load(jQuery(this).attr("href"));
		    //<![CDATA[
		    if(id != "help_main" && id.substring(0,5) == "help_"){
		      var obj = jQuery("#image_"+jQuery(this).attr("id"));
		      document.getElementById("imageHelp").innerHTML 
                = "<img width='50px' src='"+jQuery(obj).attr("src")+"'/>";
              jQuery("#imageHelp").show();
		    }else{
		      document.getElementById("imageHelp").innerHTML = "";
		      jQuery("#imageHelp").hide();
		    }
            //]]>

		    jQuery("#tabs-1").scrollTop( 0 );
		    jQuery("#btIndex").show();
		    //<![CDATA[
		    while( historyHelpIndex + 1 < historyHelp.length ){
			historyHelp.pop();
		    }
		    if(historyHelp.length > 100){
			historyHelp.shift();
		    }
		    //]]>
		    historyHelpIndex = historyHelp.length;
		    historyHelp[historyHelpIndex] = id;
		}
	    }
	});

	jQuery(document).on("click", "#btIndex", function(e) {
	    if(! jQuery('#notMoveHelp').is(':checked')){
		    var id = jQuery(this).attr('id');
		    if(historyHelp[historyHelpIndex] != id){
			    jQuery("#nextHelp").attr("disabled", true);
			    jQuery("#prevHelp").attr("disabled", false);
			    jQuery("#helpIndex").show();
			    jQuery("#helpPanel").hide();
			    jQuery("#btIndex").hide();
			    jQuery("#tabs-1").scrollTop( 0 );
			    //<![CDATA[
			    while(historyHelpIndex + 1 < historyHelp.length){
				    historyHelp.pop();
				}
				if(historyHelp.length > 100){
					historyHelp.shift();
				}
		    	//]]>
		    	historyHelpIndex = historyHelp.length;
		    	historyHelp[historyHelpIndex] = id;
		    }
	    }
	});

	jQuery(document).on("click", "#prevHelp", function(e) {
	    //<![CDATA[
	    if(historyHelpIndex > 0){
		var id = historyHelp[--historyHelpIndex];
		if(historyHelpIndex == 0){
            jQuery("#prevHelp").attr("disabled", true);
        }
        jQuery("#nextHelp").attr("disabled", false);
		if(id == "btIndex"){
		    jQuery("#helpIndex").show();
		    jQuery("#helpPanel").hide();
		    jQuery("#btIndex").hide();
		}else{
		    jQuery("#helpIndex").hide();
		    
		    jQuery("#helpPanel").show();
            jQuery("#contentHelp").load(jQuery("#"+id).attr("href"));
            if(id != "help_main" && id.substring(0,5) == "help_"){
              var obj = jQuery("#image_"+jQuery("#"+id).attr("id"));
              document.getElementById("imageHelp").innerHTML 
                = "<img width='50px' src='"+jQuery(obj).attr("src")+"'/>";
              jQuery("#imageHelp").show();
            }else{
              document.getElementById("imageHelp").innerHTML = "";
              jQuery("#imageHelp").hide();
            }

            jQuery("#tabs-1").scrollTop( 0 );
		    jQuery("#btIndex").show();
		}
	    }
	    //]]>
	});

	jQuery(document).on("click", "#nextHelp", function(e) {
	    //<![CDATA[
	    if(historyHelpIndex  < historyHelp.length - 1){
		var id = historyHelp[++historyHelpIndex];
        if(historyHelpIndex == historyHelp.length - 1){
            jQuery("#nextHelp").attr("disabled", true);
        }
        jQuery("#prevHelp").attr("disabled", false);
		if(id == "btIndex"){
		    jQuery("#helpIndex").show();
		    jQuery("#helpPanel").hide();
		    jQuery("#btIndex").hide();
		}else{
		    jQuery("#helpIndex").hide();
		    
            jQuery("#helpPanel").show();
            jQuery("#contentHelp").load(jQuery("#"+id).attr("href"));
            if(id != "help_main" && id.substring(0,5) == "help_"){
              var obj = jQuery("#image_"+jQuery("#"+id).attr("id"));
              document.getElementById("imageHelp").innerHTML 
                = "<img width='50px' src='"+jQuery(obj).attr("src")+"'/>";
              jQuery("#imageHelp").show();
            }else{
              document.getElementById("imageHelp").innerHTML = "";
              jQuery("#imageHelp").hide();
            }

            jQuery("#tabs-1").scrollTop( 0 );
		    jQuery("#btIndex").show();
		}
	    }
	    //]]>
	});
	
    </script>
</head>
<body>

    <div id="helpButtons">
        <button id="prevHelp" disabled="true">#{messages.label_help_previous}</button>
        <button id="nextHelp" disabled="true">#{messages.label_help_next}</button>
        <input id="notMoveHelp" type="checkbox"/>#{messages.label_on_the_page}
        <button id="btIndex" style="display: none;">#{messages.label_index}</button>
    </div>
    <div id="helpIndex">
	<h1>IDM Help</h1>
	<p>
	IDM is a platform that builds data related workflows that runs on
	hadoop. For more help on IDM click <a class="stopLink" id="help_main"
	    onclick="return false;" href="../help/main.html">here</a>
	</p>

	<a class="stopLink" id="helpmain_tech" style="display: none;" onclick="return false;" href="../help/technologies.html">Technologies</a>
	<a class="stopLink" id="helpmain_menu" style="display: none;" onclick="return false;" href="../help/menu.html">Menu</a>
	<a class="stopLink" id="helpmain_canvas" style="display: none;" onclick="return false;" href="../help/canvas.html">Canvas</a>
	<a class="stopLink" id="helpmain_actfooter" style="display: none;" onclick="return false;" href="../help/actionsfooter.html">Actions Footer</a>
	<a class="stopLink" id="helpmain_buildwork" style="display: none;" onclick="return false;" href="../help/buildingworkflow.html">How to build a workflow</a>
	<a class="stopLink" id="helpmain_ssh" style="display: none;" onclick="return false;" href="../help/ssh_view.html">Remote File System</a>
	<a class="stopLink" id="helpmain_help" style="display: none;" onclick="return false;" href="../help/help_view.html">Help</a>
	<a class="stopLink" id="helpmain_procman" style="display: none;" onclick="return false;" href="../help/process_manager.html">Process manager</a>
	<a class="stopLink" id="helpmain_error" style="display: none;" onclick="return false;" href="../help/error_view.html">Error</a>
	<a class="stopLink" id="helpmain_hive" style="display: none;" onclick="return false;" href="../help/hive_view.html">Hive</a>
	<a class="stopLink" id="helpmain_hdfs" style="display: none;" onclick="return false;" href="../help/hdfs_view.html">Hadoop File System</a>
	<a class="stopLink" id="helpmain_splitter" style="display: none;" onclick="return false;" href="../help/splitter.html">Splitter</a>

	<h2>Available Actions (#{helpBean.helpSize})</h2>
	<ul>
	    <ui:repeat value="#{helpBean.helpHtml}" var="action">
	    <li><img id="image_help_#{action[0]}" width="25px" src="#{action[3]}"/> <a class="stopLink" id="help_#{action[0]}" href="#{action[2]}" onclick="return false;">#{action[1]}</a></li>
	    </ui:repeat>
	</ul>
    </div>
    <div id="helpPanel">
        <div id="imageHelp" />
        <div id="contentHelp"/>
    </div>
    
</body>
</html>