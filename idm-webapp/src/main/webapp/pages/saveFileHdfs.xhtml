<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<script>
//<![CDATA[
	var file;
	
	function getPath(p){
		if (!file){
			return p;
		}
		return p + "/"+ file;
	}
	
	function changeFile(f){
		file = f;
	}
//]]>
</script>

	<a4j:keepAlive beanName = "hdfsSaveBean"/>

	<h:outputText value="#{messages.label_path}" />
	<h:inputText id="pathSaveFile" label="Path" value="#{hdfsSaveBean.path}"
		maxlength="255" style="width:395px;" />
	<a4j:commandButton type="submit" id="changePathBt"
		action="#{hdfsSaveBean.changePath}" value="ok" reRender="hdfsfsSaveFile,hdfsSaveFileBtn" />
	<br />

	<a4j:commandLink action="#{hdfsSaveBean.goPrevious}"
		reRender="pathSaveFile,hdfsfsSaveFile,hdfsSaveFileBtn">
		<img id="btAdd" src="../image/icons/button-undo.png" />
	</a4j:commandLink>
	<a4j:commandLink action="#{hdfsSaveBean.goNext}" reRender="pathSaveFile,hdfsfsSaveFile,hdfsSaveFileBtn">
		<img id="btAdd" src="../image/icons/button-redo.png" />
	</a4j:commandLink>

	<rich:dataTable id="hdfsfsSaveFile" value="#{hdfsSaveBean.listGrid}" var="item"
		width="100%" style="border:none;"
		onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
		onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'">

		<f:facet name="header">
			<h:outputText value="File System" />
		</f:facet>

		<rich:column sortBy="#{item.name}"
			style="border-bottom:0px;border-right:0px;">
			<f:facet name="header">
				<h:outputText value="Name" />
			</f:facet>
			<a4j:commandLink value="#{item.name}"
				action="#{hdfsSaveBean.selectFile}" reRender="pathSaveFile,hdfsfsSaveFile,hdfsSaveFileBtn">
				<f:param name="nameFile" value="#{item.name}" />
			</a4j:commandLink>
		</rich:column>

		<rich:columns value="#{hdfsSaveBean.keyAsListNameValue}" var="column"
			index="ind" id="column#{ind}"
			style="border-bottom:0px;border-right:0px;">
			<f:facet name="header">
				<h:outputText value="#{column}" />
			</f:facet>
			<h:outputText value="#{item.nameValue[column]}" id="value#{ind}" />
		</rich:columns>

	</rich:dataTable>
	
	<h:outputText value="#{messages.label_file_name}" />
	<h:inputText id="nameSaveFile" label="Name" onchange="changeFile(this.value)"
		maxlength="255" style="width:395px;" />
	<br />

	<a4j:commandButton id="hdfsSaveFileBtn" action="#{canvasBean.save}" value="ok"
		onclick="#{rich:component('modalSaveWorkflow')}.hide();updateElementsPositions();">
		<a4j:actionparam name="pathFile" value="getPath('#{hdfsSaveBean.path}')" noEscape="true"/>
	</a4j:commandButton>
	
	<a4j:commandButton value="Cancel"
		onclick="#{rich:component('modalSaveWorkflow')}.hide();">
	</a4j:commandButton>
	
</ui:composition>