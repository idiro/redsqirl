<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">

<head>

<script>

	function openCopyHdfs(){
  	  jQuery("[id$='hdfslinkCopyModalPanel']").click();
    }

    function openMoveHdfs(){
  	  jQuery("[id$='hdfslinkMoveModalPanel']").click();
    }
	
</script>

</head>

<body>


	<div id="hdfsFileSystem"
		style="min-width: 400px; overflow: hidden; min-height: 400px;">
		<h:form>

			<a4j:commandLink id="hdfslinkCopyModalPanel"
				action="#{hdfsBean.copyFileBefore}"
				oncomplete="#{rich:component('hdfscopyModalPanel')}.show()"
				style="display:none;" />
			<a4j:commandLink id="hdfslinkMoveModalPanel"
				action="#{hdfsBean.moveFileBefore}"
				oncomplete="#{rich:component('hdfsmoveModalPanel')}.show()"
				style="display:none;" />

			<br />

			<h:outputText value="#{messages.label_path}" />
			<br />
			<h:inputText id="hdfspath" label="Path" value="#{hdfsBean.path}"
				maxlength="255" style="width:395px;" />
			<a4j:commandButton type="submit" id="hdfschangePathBt"
				action="#{hdfsBean.changePath}" value="ok" reRender="hdfsfs" />

			<br />
			<br />

			<a4j:commandLink action="#{hdfsBean.addFileBefore}"
				oncomplete="#{rich:component('hdfsaddModalPanel')}.show()">
				<img id="hdfsbtAdd" src="../image/icons/button-plus.gif" />
			</a4j:commandLink>

			<a4j:commandLink action="#{hdfsBean.deleteFile}" reRender="hdfsfs"
				onclick="if(!confirm('Are you sure you want to delete the selected files?')){return false;}">
				<img id="hdfsbtDelete" src="../image/icons/button-delete.png" />
			</a4j:commandLink>

			<a href="#" onclick="openCopyHdfs();"><h:outputText
					value="Copy to..." /></a>
			<a href="#" onclick="openMoveHdfs();"><h:outputText
					value="Move to..." /></a>

			<a4j:commandLink action="#{hdfsBean.goPrevious}"
				reRender="hdfspath,hdfsfs">
				<img id="hdfsbtUndo" src="../image/icons/button-undo.png" />
			</a4j:commandLink>

			<a4j:commandLink action="#{hdfsBean.goNext}" reRender="hdfspath,hdfsfs">
				<img id="hdfsbtRedo" src="../image/icons/button-redo.png" />
			</a4j:commandLink>


			<rich:dataTable id="hdfsfs" value="#{hdfsBean.listGrid}"
				var="item" width="100%" style="border:none;"
				onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
				enableContextMenu="false"
				onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'">

				<f:facet name="header">
					<h:outputText value="File System" />
				</f:facet>

				<rich:column style="border-bottom:0px;border-right:0px;"
					width="30px;">
					<f:facet name="header">
						<h:outputText value="" />
					</f:facet>
					<h:selectBooleanCheckbox id="hdfsselect" value="#{item.selected}" />
				</rich:column>
				<rich:column style="border-bottom:0px;border-right:0px;"
					width="30px;">
					<f:facet name="header">
						<h:outputText value="" />
					</f:facet>
					<a4j:commandLink action="#{hdfsBean.editFileBefore}"
						oncomplete="#{rich:component('hdfseditModalPanel')}.show()">
						<img src="../image/icons/button-save-all.png" />
						<f:param name="nameFileEdit" value="#{item.name}" />
					</a4j:commandLink>
				</rich:column>

				<!-- <rich:column sortBy="#{item.name}"
					style="border-bottom:0px;border-right:0px;">
					<f:facet name="header">
						<h:outputText value="Name" />
					</f:facet>
					<a4j:commandLink value="#{item.name}"
						action="#{hdfsBean.selectFile}" reRender="hdfspath,hdfsfs">
						<f:param name="nameFile" value="#{item.name}" />
					</a4j:commandLink>
				</rich:column> -->
				
				<rich:column sortBy="#{item.name}"
					style="border-bottom:0px;border-right:0px;" rendered="#{(not empty hdfsBean.listGrid) and (not item.file)}">
					<f:facet name="header">
						<h:outputText value="Name" />
					</f:facet>
					<a4j:commandLink value="#{item.name}"
						action="#{hdfsBean.selectFile}" reRender="hdfsfs,hdfspath">
						<f:param name="nameFile" value="#{item.name}" />
					</a4j:commandLink>
				</rich:column>
				
				<rich:column sortBy="#{item.name}"
					style="border-bottom:0px;border-right:0px;" rendered="#{(not empty hdfsBean.listGrid) and (item.file)}">
					<f:facet name="header">
						<h:outputText value="Name" />
					</f:facet>
					<a4j:commandLink value="#{item.name}" 
						action="#{hdfsBean.openFile}"
						oncomplete="#{rich:component('hdfsOpenFileModalPanel')}.show()">
						<f:param name="nameFileEdit" value="#{item.name}" />
					</a4j:commandLink>
				</rich:column>
				
				<rich:columns value="#{hdfsBean.keyAsListNameValue}" var="column"
					index="ind" id="hdfscolumn#{ind}"
					style="border-bottom:0px;border-right:0px;">
					<f:facet name="header">
						<h:outputText value="#{column}" />
					</f:facet>
					<h:outputText value="#{item.nameValue[column]}" id="hdfsvalue#{ind}" />
				</rich:columns>

			</rich:dataTable>

			<a4j:jsFunction name="reRenderHdfsfs" reRender="hdfsfs"
				ajaxSingle="true" requestDelay="3000" />

		</h:form>
	</div>

	<rich:modalPanel id="hdfscopyModalPanel" width="600" height="400"
		style="overflow:auto;" resizeable="false" onhide="reRenderHdfsfs();">

		<f:facet name="header">copy</f:facet>
		<f:facet name="controls">
			<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
				style="cursor:pointer"
				onclick="#{rich:component('hdfscopyModalPanel')}.hide()" />
		</f:facet>

		<h:form id="hdfsform2">
			<h:panelGrid>
				<a4j:include viewId="/pages/hdfs/copyHdfs.xhtml" ajaxRendered="true" />
			</h:panelGrid>
		</h:form>

	</rich:modalPanel>

	<rich:modalPanel id="hdfsmoveModalPanel" width="600" height="400"
		style="overflow:auto;" resizeable="false" onhide="reRenderHdfsfs();">

		<f:facet name="header">move</f:facet>
		<f:facet name="controls">
			<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
				style="cursor:pointer"
				onclick="#{rich:component('hdfsmoveModalPanel')}.hide()" />
		</f:facet>

		<h:form id="hdfsform3">
			<h:panelGrid>
				<a4j:include viewId="/pages/hdfs/moveHdfs.xhtml" ajaxRendered="true" />
			</h:panelGrid>
		</h:form>

	</rich:modalPanel>

	<rich:modalPanel id="hdfsaddModalPanel" width="600" height="400"
		style="overflow:auto;" resizeable="false" onhide="reRenderHdfsfs();">

		<f:facet name="header">file</f:facet>
		<f:facet name="controls">
			<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
				style="cursor:pointer"
				onclick="#{rich:component('hdfsaddModalPanel')}.hide()" />
		</f:facet>

		<h:form id="hdfsform4">
			<h:panelGrid>
				<a4j:include viewId="/pages/hdfs/addHdfs.xhtml" ajaxRendered="true" />
			</h:panelGrid>
		</h:form>

	</rich:modalPanel>

	<rich:modalPanel id="hdfseditModalPanel" width="600" height="400"
		style="overflow:auto;" resizeable="false" onhide="reRenderHdfsfs();">

		<f:facet name="header">file</f:facet>
		<f:facet name="controls">
			<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
				style="cursor:pointer"
				onclick="#{rich:component('hdfseditModalPanel')}.hide()" />
		</f:facet>

		<h:form id="hdfsform5">
			<h:panelGrid>
				<a4j:include viewId="/pages/hdfs/editHdfs.xhtml" ajaxRendered="true" />
			</h:panelGrid>
		</h:form>

	</rich:modalPanel>
	
	<rich:modalPanel id="hdfsOpenFileModalPanel" width="600" height="400"
		style="overflow:auto;" resizeable="false">

		<f:facet name="header">file</f:facet>
		<f:facet name="controls">
			<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
				style="cursor:pointer"
				onclick="#{rich:component('hdfsOpenFileModalPanel')}.hide()" />
		</f:facet>

		<h:form id="hdfsform6">
			<h:panelGrid>
				<a4j:include viewId="/pages/hdfs/openFileHdfs.xhtml" ajaxRendered="true" />
			</h:panelGrid>
		</h:form>

	</rich:modalPanel>

</body>
</html>