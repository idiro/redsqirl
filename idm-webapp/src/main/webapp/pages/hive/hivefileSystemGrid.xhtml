<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">

<head>

<script>

	function openCopyHive(){
  	  jQuery("[id$='hivelinkCopyModalPanel']").click();
    }

    function openMoveHive(){
  	  jQuery("[id$='hivelinkMoveModalPanel']").click();
    }
	
</script>

</head>

<body>


	<div id="hiveFileSystem"
		style="min-width: 400px; overflow: hidden; min-height: 400px;">
		<h:form>

			<a4j:commandLink id="hivelinkCopyModalPanel"
				action="#{hiveBean.copyFileBefore}"
				oncomplete="#{rich:component('hivecopyModalPanel')}.show()"
				style="display:none;" />
			<a4j:commandLink id="hivelinkMoveModalPanel"
				action="#{hiveBean.moveFileBefore}"
				oncomplete="#{rich:component('hivemoveModalPanel')}.show()"
				style="display:none;" />

			<br />

			<h:outputText value="#{messages.label_path}" />
			<br />
			<h:inputText id="hivepath" label="Path" value="#{hiveBean.path}"
				maxlength="255" style="width:395px;" />
			<a4j:commandButton type="submit" id="hivechangePathBt"
				action="#{hiveBean.changePath}" value="ok" reRender="hivefs" />

			<br />
			<br />

			<a4j:commandLink action="#{hiveBean.addFileBefore}"
				oncomplete="#{rich:component('hiveaddModalPanel')}.show()">
				<img id="hivebtAdd" src="../image/icons/button-plus.gif" />
			</a4j:commandLink>

			<a4j:commandLink action="#{hiveBean.deleteFile}" reRender="hivefs"
				onclick="if(!confirm('Are you sure you want to delete the selected files?')){return false;}">
				<img id="hivebtDelete" src="../image/icons/button-delete.png" />
			</a4j:commandLink>

			<a href="#" onclick="openCopyHive();"><h:outputText
					value="Copy to..." /></a>
			<a href="#" onclick="openMoveHive();"><h:outputText
					value="Move to..." /></a>

			<a4j:commandLink action="#{hiveBean.goPrevious}"
				reRender="path,hivefs">
				<img id="hivebtUndo" src="../image/icons/button-undo.png" />
			</a4j:commandLink>

			<a4j:commandLink action="#{hiveBean.goNext}" reRender="path,hivefs">
				<img id="hivebtRedo" src="../image/icons/button-redo.png" />
			</a4j:commandLink>


			<rich:dataTable id="hivefs" value="#{hiveBean.listGrid}"
				var="item" width="100%" style="border:none;"
				onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
				enableContextMenu="false"
				onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'">

				<f:facet name="header">
					<h:outputText value="File System" />
				</f:facet>

				<rich:column style="border-bottom:0px;border-right:0px;"
					width="30px;">
					<f:facet name="header">
						<h:outputText value="" />
					</f:facet>
					<h:selectBooleanCheckbox id="hiveselect" value="#{item.selected}" />
				</rich:column>
				<rich:column style="border-bottom:0px;border-right:0px;"
					width="30px;">
					<f:facet name="header">
						<h:outputText value="" />
					</f:facet>
					<a4j:commandLink action="#{hiveBean.editFileBefore}"
						oncomplete="#{rich:component('hiveeditModalPanel')}.show()">
						<img src="../image/icons/button-save-all.png" />
						<f:param name="nameFileEdit" value="#{item.name}" />
					</a4j:commandLink>
				</rich:column>

				<rich:column sortBy="#{item.name}"
					style="border-bottom:0px;border-right:0px;">
					<f:facet name="header">
						<h:outputText value="Name" />
					</f:facet>
					<a4j:commandLink value="#{item.name}"
						action="#{hiveBean.selectFile}" reRender="path,hivefs">
						<f:param name="nameFile" value="#{item.name}" />
					</a4j:commandLink>
				</rich:column>

				<rich:columns value="#{hiveBean.keyAsListNameValue}" var="column"
					index="ind" id="hivecolumn#{ind}"
					style="border-bottom:0px;border-right:0px;">
					<f:facet name="header">
						<h:outputText value="#{column}" />
					</f:facet>
					<h:outputText value="#{item.nameValue[column]}" id="hivevalue#{ind}" />
				</rich:columns>

			</rich:dataTable>

			<a4j:jsFunction name="reRenderHivefs" reRender="hivefs"
				ajaxSingle="true" requestDelay="3000" />

		</h:form>
	</div>

	<rich:modalPanel id="hivecopyModalPanel" width="600" height="400"
		style="overflow:auto;" resizeable="false">

		<f:facet name="header">copy</f:facet>
		<f:facet name="controls">
			<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
				style="cursor:pointer"
				onclick="#{rich:component('hivecopyModalPanel')}.hide()" />
		</f:facet>

		<h:form id="hiveform2">
			<h:panelGrid>
				<a4j:include viewId="/pages/hive/copyHive.xhtml" ajaxRendered="true" />
			</h:panelGrid>
		</h:form>

	</rich:modalPanel>

	<rich:modalPanel id="hivemoveModalPanel" width="600" height="400"
		style="overflow:auto;" resizeable="false" onhide="reRenderHivefs();">

		<f:facet name="header">move</f:facet>
		<f:facet name="controls">
			<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
				style="cursor:pointer"
				onclick="#{rich:component('hivemoveModalPanel')}.hide()" />
		</f:facet>

		<h:form id="hiveform3">
			<h:panelGrid>
				<a4j:include viewId="/pages/hive/moveHive.xhtml" ajaxRendered="true" />
			</h:panelGrid>
		</h:form>

	</rich:modalPanel>

	<rich:modalPanel id="hiveaddModalPanel" width="600" height="400"
		style="overflow:auto;" resizeable="false" onhide="reRenderHivefs();">

		<f:facet name="header">file</f:facet>
		<f:facet name="controls">
			<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
				style="cursor:pointer"
				onclick="#{rich:component('hiveaddModalPanel')}.hide()" />
		</f:facet>

		<h:form id="hiveform4">
			<h:panelGrid>
				<a4j:include viewId="/pages/hive/addHive.xhtml" ajaxRendered="true" />
			</h:panelGrid>
		</h:form>

	</rich:modalPanel>

	<rich:modalPanel id="hiveeditModalPanel" width="600" height="400"
		style="overflow:auto;" resizeable="false" onhide="reRenderHivefs();">

		<f:facet name="header">file</f:facet>
		<f:facet name="controls">
			<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
				style="cursor:pointer"
				onclick="#{rich:component('hiveeditModalPanel')}.hide()" />
		</f:facet>

		<h:form id="hiveform5">
			<h:panelGrid>
				<a4j:include viewId="/pages/hive/editHive.xhtml" ajaxRendered="true" />
			</h:panelGrid>
		</h:form>

	</rich:modalPanel>

</body>
</html>