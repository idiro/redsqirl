<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<a4j:loadBundle basename="MessagesResources" var="messages" />

	<div id="sshFileSystem" style="min-width: 400px; overflow: hidden; min-height: 190px;">
		
		<rich:dragIndicator id="indicator" />
		
		<a4j:form>
			<br/>
			<h:outputText value="#{messages.label_path}" style="padding-left:10px"/>
			<h:inputText id="sshpath" styleClass="mainPageTextField"  label="Path" value="#{sshBean.path}"
				maxlength="255" style="width:395px; margin-left:5px;" 
				onkeypress="return enableEnterKey(event, 'sshchangePathBt');"/>
			<a4j:commandButton  styleClass="greenButton" id="sshchangePathBt" oncomplete="resizeTables();" 
				action="#{sshBean.changePath}" value="#{messages.button_ok}" reRender="sshfs" />

			<br />

			<div class="divMenu">
				<a4j:commandLink action="#{sshBean.goPrevious}"
					reRender="sshpath,sshfs">
					<h:graphicImage id="sshbtUndo" value="../image/icons/button-previous.gif" title='#{messages.canvas_previous}' />
				</a4j:commandLink>
	
				<a4j:commandLink action="#{sshBean.goNext}" reRender="sshpath,sshfs" oncomplete="resizeTables();" >
					<h:graphicImage id="sshbtRedo" value="../image/icons/button-next.gif" title='#{messages.canvas_next}' />
				</a4j:commandLink>
				
				<a4j:commandLink action="#{sshBean.goUp}" reRender="sshpath,sshfs" oncomplete="resizeTables();" >
					<h:graphicImage id="sshbtGoUp" value="../image/icons/button_up.jpg" title='#{messages.hdfs_goup}' styleClass="fileSystemIcon" />
				</a4j:commandLink>
			</div>
			
			<br />

			<rich:panel style="border:none">
			
				<rich:dropSupport  acceptedTypes="hdfs" dropListener="#{sshBean.processDrop}" reRender="sshfs" oncomplete="resizeTables();"/>
				
				<rich:extendedDataTable id="sshfs" value="#{sshBean.tableGrid.rows}"
					var="item" rowKeyVar="indexTable" width="100%" style="border:none;"
					onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
					enableContextMenu="false" onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowBackgroundColor}'"
					rowClasses="even-row, odd-row" tableState="#{sshBean.tableState}" >
	
					<rich:column sortBy="#{sshBean.allProps[indexTable]['name']}" filterBy="#{sshBean.allProps[indexTable]['name']}"
						style="border-bottom:0px;border-right:0px;">
						<f:facet name="header">
							<h:outputText value="#{messages.label_name}"/>
								
						</f:facet>
						<a4j:commandLink value="#{sshBean.allProps[indexTable]['name']}" action="#{sshBean.verifyIfIsFile}"
	     					oncomplete="selectFileSsh('#{sshBean.file}', '#{sshBean.allProps[indexTable]['name']}')">
	     						<f:param name="nameFile" value="#{sshBean.allProps[indexTable]['name']}" />
	     						<rich:dragSupport dragIndicator=":indicator"
                               	 	dragValue="#{sshBean.allProps[indexTable]['name']}" dragType="ssh">
	                                <rich:dndParam name="label" value="#{sshBean.allProps[indexTable]['name']}" />
	                                <a4j:actionparam name="file" value="#{sshBean.allProps[indexTable]['name']}" />
	                                <a4j:actionparam name="path" value="#{sshBean.path}" />
	                                <a4j:actionparam name="server" value="#{tab}" />
                            	</rich:dragSupport>
	     				</a4j:commandLink>
					</rich:column>
					
					<rich:columns value="#{sshBean.tableGrid.titles == null? canvasBean.emptyList : sshBean.tableGrid.titles}" var="column" index="ind" begin="1"
						style="border-bottom:0px;border-right:0px;">
						<f:facet name="header">
							<h:outputText value="#{column}" />
						</f:facet>
						<h:outputText value="#{item.row[ind]}" />
					</rich:columns>
	
				</rich:extendedDataTable>
			</rich:panel>
		</a4j:form>
	</div>
</ui:composition>
