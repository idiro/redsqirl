<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<a4j:loadBundle basename="MessagesResources" var="messages" />

	<div id="sshFileSystem"
		style="min-width: 400px; overflow: hidden; min-height: 400px;">
		
		<rich:dragIndicator id="indicator" />
		
		<a4j:form>
		
			<h:outputText value="#{messages.label_path}" />
			<h:inputText id="sshpath" label="Path" value="#{sshBean.path}"
				maxlength="255" style="width:395px;" />
			<a4j:commandButton type="submit" id="sshchangePathBt"
				action="#{sshBean.changePath}" value="#{messages.button_ok}" reRender="sshfs" />

			<br />

			<div class="divMenu">
				<a4j:commandLink action="#{sshBean.goPrevious}"
					reRender="sshpath,sshfs">
					<h:graphicImage id="sshbtUndo" value="../image/icons/button-previous.gif" title='#{messages.canvas_previous}' />
				</a4j:commandLink>
	
				<a4j:commandLink action="#{sshBean.goNext}" reRender="sshpath,sshfs">
					<h:graphicImage id="sshbtRedo" value="../image/icons/button-next.gif" title='#{messages.canvas_next}' />
				</a4j:commandLink>
			</div>
			
			<br />

			<rich:panel>
			
				<rich:dropSupport  acceptedTypes="hdfs" dropListener="#{sshBean.processDrop}" reRender="sshfs"/>
				
				<rich:dataTable id="sshfs" value="#{sshBean.listGrid}"
					var="item" width="100%" style="border:none;"
					onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
					enableContextMenu="false"
					onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'">
					
					<f:facet name="header">
						<h:outputText value="File System" />
					</f:facet>
	
					<rich:column sortBy="#{item.name}"
						style="border-bottom:0px;border-right:0px;">
						<f:facet name="header">
							<h:outputText value="Name"/>
								
						</f:facet>
						<a4j:commandLink value="#{item.name}" action="#{sshBean.verifyIfIsFile}"
	     					oncomplete="selectFileSsh('#{sshBean.file}', '#{item.name}')">
	     						<f:param name="nameFile" value="#{item.name}" />
	     						<rich:dragSupport dragIndicator=":indicator"
                               	 	dragValue="#{item.name}" dragType="ssh">
	                                <rich:dndParam name="label" value="#{item.name}" />
	                                <a4j:actionparam name="file" value="#{item.name}" />
	                                <a4j:actionparam name="path" value="#{sshBean.path}" />
	                                <a4j:actionparam name="server" value="#{tab}" />
                            	</rich:dragSupport>
	     				</a4j:commandLink>
					</rich:column>
					
					<rich:columns value="#{sshBean.keyAsListNameValue}" var="column"
						index="ind" id="sshcolumn#{ind}"
						style="border-bottom:0px;border-right:0px;">
						<f:facet name="header">
							<h:outputText value="#{column}" />
						</f:facet>
						<h:outputText value="#{item.nameValue[column]}" id="sshvalue#{ind}" />
					</rich:columns>
	
				</rich:dataTable>
			</rich:panel>
		</a4j:form>
	</div>
</ui:composition>