<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<a4j:loadBundle basename="MessagesResources" var="messages" />

	<div id="domMessageDivModalSubWFUninstall" style="display: none;">
		<img src="../image/icons/waiting.gif" />
	</div>

	<h:form>
		<a4j:region>
			<a4j:status
				onstart="jQuery.blockUI({ message: jQuery('#domMessageDivModalSubWFUninstall') });"
				onerror="jQuery.unblockUI();" onsuccess="jQuery.unblockUI();"
				onstop="jQuery.unblockUI();" />
				
	        <a4j:jsFunction name="openInstallModelModal"
	            action="#{packageMngBean.setPackageScope}"
	            oncomplete="#{rich:component('modalInstallPackage')}.show();">
	            <a4j:actionparam name="user"/>
	            <a4j:actionparam name="type"/>
	        </a4j:jsFunction>
		</a4j:region>
	
		<h:panelGrid id="superactionsList" columns="2">
			<rich:panel id="systemSa" header="System Super Actions"
				style="width:270px;height:390px;" bodyClass="maxContent">

				<h:panelGroup id="sysSaMenu" layout="block" style="overflow:auto;height:330px;"
					rendered="#{subwfBean.admin}">
					<h:selectManyCheckbox layout="pageDirection"
						value="#{subwfBean.systemSA}">
						<f:selectItems value="#{subwfBean.uninstallSysSa}" var="n"
							itemLabel="#{n.label}" itemValue="#{n.value}" />
					</h:selectManyCheckbox>
				</h:panelGroup>

                <h:panelGroup id="userSAList" layout="block"
                    style="overflow:auto;height:330px;"
                    rendered="#{not subwfBean.admin}">
                    <ui:repeat value="#{subwfBean.uninstallUserSa}" var="item">
                    #{item.label}<br />
                    </ui:repeat>
                </h:panelGroup>
                
				<h:panelGrid id="sa_sys_buttons" columns="2"
					rendered="#{subwfBean.admin}">
					<rich:panel id="sa_sys_uninstall">
						<a4j:commandButton styleClass="greenButton"
							value="#{messages.button_sys_install_from_store}"
							onclick="openInstallModelModal('true', 'model');" 
                        	action="#{analyticsStoreSearchBean.retrieveAllPackageList}" />
							
						<a4j:commandButton styleClass="greenButton"
							value="#{messages.button_sys_uninstall}"
							action="#{subwfBean.deleteSASystem}" reRender="systemSA,msnSuccess" 
							oncomplete="refreshRelativeHelp();" />
					</rich:panel>
				</h:panelGrid>

			</rich:panel>
			<rich:panel id="userSa" header="User Super Actions"
				style="width:270px;height:390px;" bodyClass="maxContent">

				<h:panelGroup id="userSaMenu" layout="block" style="overflow:auto;height:330px;">
					<h:selectManyCheckbox layout="pageDirection"
						value="#{subwfBean.userSA}">
						<f:selectItems value="#{subwfBean.uninstallUserSa}" var="n"
							itemLabel="#{n.label}" itemValue="#{n.value}" />
					</h:selectManyCheckbox>
				</h:panelGroup>
				
				<h:panelGrid id="sa_user_buttons" columns="2" style="vertical-align:bottom;">
					<rich:panel id="sa_user_uninstall">
						<a4j:commandButton styleClass="greenButton" value="#{messages.button_sys_install_from_store}"
							onclick="openInstallModelModal('true', 'model');" 
                        	action="#{analyticsStoreSearchBean.retrieveAllPackageList}"/>
						<a4j:commandButton styleClass="greenButton" value="#{messages.button_sys_uninstall}" 
							action="#{subwfBean.deleteSaUser}" oncomplete="refreshRelativeHelp();" reRender="userSaMenu,msnSuccess" />
					</rich:panel>
				</h:panelGrid>

			</rich:panel>

		</h:panelGrid>
			<rich:panel id="sa_ok" style="float:right;margin-right:25px;">
				<a4j:commandButton styleClass="greenButton"
					value="ok"
					onclick="#{rich:component('modalSubWfUninstall')}.hide()"/>
			</rich:panel>
	</h:form>
</ui:composition>
