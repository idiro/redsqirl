<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">

<a4j:loadBundle basename="MessagesResources" var="messages" />

<head>
<link rel="icon" type="image/gif"
	href="../image/logo_redsqirl_favicon.gif" />
<link rel="stylesheet" type="text/css"
	href="#{facesContext.externalContext.requestContextPath}/css/jquery-ui.css" />
<link rel="stylesheet" type="text/css"
	href="#{facesContext.externalContext.requestContextPath}/css/redsqirl.css" />

<script
	src="#{facesContext.externalContext.requestContextPath}/js/jquery-1.9.1.js"
	type="text/javascript" />
<script
	src="#{facesContext.externalContext.requestContextPath}/js/jquery.contextmenu.js"
	type="text/javascript" />
<script
	src="#{facesContext.externalContext.requestContextPath}/js/jquery-ui-1.10.0.custom.js" />
<script
	src="#{facesContext.externalContext.requestContextPath}/js/kinetic-v4.3.3.js"
	type="text/javascript" />
<script
	src="#{facesContext.externalContext.requestContextPath}/js/jquery.cookie.js"
	type="text/javascript" />
<script
	src="#{facesContext.externalContext.requestContextPath}/js/canvas.js"
	type="text/javascript" />
<script
	src="#{facesContext.externalContext.requestContextPath}/js/rs-history-engine.js"
	type="text/javascript" />
<script
	src="#{facesContext.externalContext.requestContextPath}/js/redsqirl.js"
	type="text/javascript" />
<script
	src="#{facesContext.externalContext.requestContextPath}/js/splitter.js"
	type="text/javascript" />
<script
	src="#{facesContext.externalContext.requestContextPath}/js/scrollabletab.js"
	type="text/javascript" />
<script
	src="#{facesContext.externalContext.requestContextPath}/js/plusTabs.js"
	type="text/javascript" />
<script
	src="#{facesContext.externalContext.requestContextPath}/js/jquery.blockUI.js"
	type="text/javascript" />
<script
	src="#{facesContext.externalContext.requestContextPath}/js/jquery.hotkeys.js"
	type="text/javascript" />
	
	
<script src="#{facesContext.externalContext.requestContextPath}/js/jquery-textext-master/textext.core.js" type="text/javascript" />
<script src="#{facesContext.externalContext.requestContextPath}/js/jquery-textext-master/textext.plugin.ajax.js" type="text/javascript" />
<script src="#{facesContext.externalContext.requestContextPath}/js/jquery-textext-master/textext.plugin.arrow.js" type="text/javascript" />
<script src="#{facesContext.externalContext.requestContextPath}/js/jquery-textext-master/textext.plugin.autocomplete.js" type="text/javascript" />
<script src="#{facesContext.externalContext.requestContextPath}/js/jquery-textext-master/textext.plugin.clear.js" type="text/javascript" />
<script src="#{facesContext.externalContext.requestContextPath}/js/jquery-textext-master/textext.plugin.filter.js" type="text/javascript" />
<script src="#{facesContext.externalContext.requestContextPath}/js/jquery-textext-master/textext.plugin.focus.js" type="text/javascript" />
<script src="#{facesContext.externalContext.requestContextPath}/js/jquery-textext-master/textext.plugin.prompt.js" type="text/javascript" />
<script src="#{facesContext.externalContext.requestContextPath}/js/jquery-textext-master/textext.plugin.suggestions.js" type="text/javascript" />
<script src="#{facesContext.externalContext.requestContextPath}/js/jquery-textext-master/textext.plugin.tags.js" type="text/javascript" />

<link rel="stylesheet" type="text/css" href="#{facesContext.externalContext.requestContextPath}/css/jquery-textext-master/textext.core.css" />
<link rel="stylesheet" type="text/css" href="#{facesContext.externalContext.requestContextPath}/css/jquery-textext-master/textext.plugin.arrow.css" />
<link rel="stylesheet" type="text/css" href="#{facesContext.externalContext.requestContextPath}/css/jquery-textext-master/textext.plugin.autocomplete.css" />
<link rel="stylesheet" type="text/css" href="#{facesContext.externalContext.requestContextPath}/css/jquery-textext-master/textext.plugin.clear.css" />
<link rel="stylesheet" type="text/css" href="#{facesContext.externalContext.requestContextPath}/css/jquery-textext-master/textext.plugin.focus.css" />
<link rel="stylesheet" type="text/css" href="#{facesContext.externalContext.requestContextPath}/css/jquery-textext-master/textext.plugin.prompt.css" />
<link rel="stylesheet" type="text/css" href="#{facesContext.externalContext.requestContextPath}/css/jquery-textext-master/textext.plugin.tags.css" />

<title><h:outputText value="#{messages.label_sistem}" /></title>

<script type="text/javascript">
		 
		//Message that we need in javascript
        var msg_confirm_changeid = '#{messages.confirm_changeid}';
		var msg_delete_command='#{messages.msg_delete_command}';
        var msg_addelement_command='#{messages.msg_addelement_command}';
        var msg_addarrow_command='#{messages.msg_addarrow_command}';
        var msg_paste_command='#{messages.msg_paste_command}';
        var msg_replaceAll_command='#{messages.msg_replaceAll_command}';
        var msg_moveelements_command='#{messages.msg_moveelements_command}';
        var msg_changeelementid_command='#{messages.msg_changeelementid_command}';
        var msg_updateelement_command='#{messages.msg_updateelement_command}';
        var msg_changeworkflowcomment_command='#{messages.msg_changeworkflowcomment_command}';
        var msg_aggregate_command='#{messages.msg_aggregate_command}';
        var msg_expand_command='#{messages.msg_expand_command}';
        
		           
		 var contTabCanvas = 1;
		 var lastBlockedRunningWorkflow
		 
		 var isResizing = false;
		           
	    jQuery.noConflict();

		  jQuery(function() {

			  function fixOnChangeIssue() {
		    		 jQuery('.rich-combobox ').each(function() {
			    		 var combo = jQuery(this).closest('[component]');
			    		 if(combo.length!=0) {
				    		 combo = combo[0].component;
				    		 if(combo.comboValue.value) {
					    		 combo.field.prevValue = combo.comboValue.value;
					    	 }
					     }
					 });
				}
			  
			  nameTabs[0] = "canvas-1";

	    	  configureTabsRemote();
	    	  configureFooter();

	    	jQuery("[id$='openCanvasScreenHdfs']").click();
	    	jQuery("[id$='openCanvasScreenHive']").click();
	    	jQuery("[id$='openCanvasScreenSsh']").click();
	    	jQuery("[id$='openCanvasScreenHdfsBrowser']").click();

	    	  var tabscanvas = jQuery("#canvas-tabs").tabs().scrollabletab();
	    	  /* 
	    	  tabscanvas.find(".ui-tabs-nav").sortable({
	    	  axis: "x",
	    	  items: 'li:not(.locked)',
	    	  stop: function() {
	    		  tabscanvas.tabs("refresh");
	    	  	}
	    	  });
	    	  */

	    	  jQuery("#tabs1").tabs().scrollabletab();
	    	  jQuery("#tabs2").tabs().scrollabletab();
	    	  
  	        var tabsGroup = jQuery( "#tabs1, #tabs2, #tabFlowchart" ).tabs();
  	        
  	    	tabsGroup.find( ".ui-tabs-nav" ).sortable({
  	            connectWith: ".ulCss",
  	          	items: "li:not(.locked)",
  	            receive: function (event, ui) {
  	            	
  	            		var receiver = jQuery(this).parent(),
  	                    sender = jQuery(ui.sender[0]).parent(),
  	                    tab = ui.item[0],
  	                    tab$ = jQuery(ui.item[0]),
  	                    panelId = tab$.attr( "aria-controls" );
            
  	            		insertBefore = document.elementFromPoint(event.pageX,event.pageY);

	  	                tab$ = jQuery(tab$.removeAttr(jQuery.makeArray(tab.attributes).map(function(item){ return item.name;}).join(' ')).remove());
	  	                tab$.find('a').removeAttr('id tabindex role class');

	  	              	if(insertBefore.parentElement == tab){
		                    insertBefore = document.elementFromPoint(event.pageX + insertBefore.offsetWidth, event.pageY);
		                }
		                insertBefore = jQuery(insertBefore).closest('li[role="tab"]').get(0);
		                if(insertBefore)
		                    tab$.insertBefore(insertBefore);
		                else
		                	jQuery(this).append(tab$);

		                jQuery(jQuery( "#" + panelId ).remove()).appendTo(receiver);
	  	              	tabsGroup.tabs('refresh');

		  	            //source
	  	            	//jQuery(ui.sender[0]).parent().attr("id");
	  	            	
	  	            	//destination
	  	            	//jQuery(this).parent().attr("id");
	  	            	  	            	
	  	            	//item
	  	            	//jQuery(ui.item[0]).attr("aria-labelledby");
	  	            	//aria-controls
	  	              	
	  	              	//copy on source and delete from destination
	  	              	var plusT = jQuery("#" + jQuery(this).parent().attr("id"));

	  	              	var allTabsDestination = jQuery("#" + jQuery(this).parent().attr("id")).find(".allTabs");
	  	              	var allTabsSource = jQuery("#" + jQuery(ui.sender[0]).parent().attr("id")).find(".allTabs");

	  	              	allTabsDestination.find("a[href$=" + jQuery(ui.item[0]).attr("aria-controls") + "]").clone().click(function (event) {
			    		  event.preventDefault();
			    		  plusT.find('.allTabs').slideUp('fast');
			    		}).appendTo(allTabsSource);
	  	              	
	  	            	allTabsDestination.find("a[href$=" + jQuery(ui.item[0]).attr("aria-controls") + "]").remove();
	
	  	              	jQuery("#canvas-tabs").tabs().tabs('refresh');
	  	              	//jQuery("#tabRemote").tabs().tabs('refresh');
	  	              	//configureTabsRemote();
	  	              	
	  	              	jQuery("#"+jQuery(this).parent().attr("id")).tabs("option", "active", jQuery(ui.item[0]).index());
	  	              	canvasResizeSplitter();
  	            }

  	        });
  	    	
  	    	jQuery("#idtabs-8").click(function () {
  	    		jQuery("#buttonstabRemote").hide();
	  	    	jQuery("#buttonstabRemote").css("left", jQuery("#tabRemote").width()-30+'px');
   				validateArrows(jQuery("#tabRemote"),jQuery("#buttonstabRemote"));
   				resiziRemoteFileSystem();
	        });

  	    	jQuery("#idtabFlowchart-1").click(function () {
  	    		//jQuery("#canvas-tabs").resize();
  	    		resizing();
	        });
  	    	
  	    	var contTabRemote = 1;

	    	  jQuery('#addtabCanvas').click( function(){
	              //<![CDATA[
	              
	              contTabCanvas++;
	              var tabName = "canvas-"+contTabCanvas;
	              addWorkflow(tabName);
	              addWorkflowTab(tabName);
	              configureCanvas(tabName, true, "W");
	              //setWorkflow(tabName);
	              validateArrows(jQuery("#canvas-tabs"),jQuery("#buttonsCanvas1"));
	              resizeCanvas(30,45);
	              
	              //]]>
	          });

	    	  jQuery('#addsubtabCanvas').click( function(){
	              //<![CDATA[
	              
	              contTabCanvas++;
	              var tabName = "canvas-"+contTabCanvas;
	              addSubWorkflow(tabName);
	              addWorkflowTab(tabName,"S");
	              configureCanvas(tabName, true, "S");
	              //setWorkflow(tabName);
	              validateArrows(jQuery("#canvas-tabs"),jQuery("#buttonsCanvas1"));
	              resizeCanvas(30,45);
	              
	              //]]>
	          });

		  var menusplitVCanvas = [
		  {'Right': function(menuItem,menu){
			  jQuery(".splitter-bar-vertical").css("left", jQuery(window).width()-40+'px');
			  jQuery("#splitHCanvas").css("width", 0+'px');
			  jQuery("#tabFlowchart").css("width", jQuery(window).width()-40+'px');
			  canvasResizeSplitter();
			  }},
		  {'Middle': function(menuItem,menu){
			  onPageReady();
			  }},
		  {'Left': function(menuItem,menu){
			  
			  jQuery(".splitter-bar-vertical").css("left", 0+'px');
			  jQuery("#splitHCanvas").css("width", jQuery(window).width()+'px');
			  jQuery("#splitHCanvas").css("left", 0+'px');
			  jQuery("#tabFlowchart").css("width", 0+'px');
			  canvasResizeSplitter();
			  }}
		  ];
          
		  var menusplitHCanvas = [
		  {'Top': function(menuItem,menu){
			  jQuery("#tabs1").css("height", '0px');
			  jQuery(".splitter-bar-horizontal").css("top", '0px');
			  jQuery("#tabs2").css("top", '0px');
			  jQuery("#tabs2").css("height", jQuery("#splitVCanvas").height()-20+'px');
			  resizeTabs();
			  jQuery("#divTabHelp").css("height", jQuery("#tabs-1").height()-56+'px');
		  	}},
		  {'Middle': function(menuItem,menu){ 
			  jQuery("#tabs1").css("height", (jQuery("#splitVCanvas").height()-20)/2+'px');
			  jQuery(".splitter-bar-horizontal").css("top", (jQuery("#splitVCanvas").height()-20)/2+'px');
			  jQuery("#tabs2").css("top", (jQuery("#splitVCanvas").height()-20)/2+'px');
			  jQuery("#tabs2").css("height", (jQuery("#splitVCanvas").height()-20)/2+'px');
			  resizeTabs();
			  jQuery("#divTabHelp").css("height", jQuery("#tabs-1").height()-56+'px');
		  	}},
		  {'Bottom': function(menuItem,menu){
			  jQuery("#tabs1").css("height", jQuery("#splitVCanvas").height()-20+'px');
			  jQuery(".splitter-bar-horizontal").css("top", jQuery("#splitVCanvas").height()-20+'px');
			  jQuery("#tabs2").css("top", jQuery("#splitVCanvas").height()-20+'px');
			  jQuery("#tabs2").css("height", '0px');
			  resizeTabs();
			  jQuery("#divTabHelp").css("height", jQuery("#tabs-1").height()-56+'px');
		  	}}
		  ];

	    	  jQuery("#splitVCanvas").splitter({
	        	  type: "v",
	        	  outline: true,
	        	  sizeLeft: jQuery(window).width()*2/3,
	        	  //minLeft: 200,
	        	  //minRight: 200,
	        	  resizeToWidth: true,
	        	  dock: "right",
	        	  dockSpeed: 200,
	        	  cookie: "splitVCanvas"
	          });
	
	    	  jQuery("#splitHCanvas").splitter({
	        	  type: "h",
	        	  outline: true,
	        	  sizeTop: true,
	        	  //minTop: 100,
	        	  //minBottom: 100,
	        	  dock: "top",
	        	  dockSpeed: 200,
	        	  cookie: "splitHCanvas"
	          });
	
		      jQuery(".splitter-bar-vertical").contextMenu(menusplitVCanvas);
		      jQuery(".splitter-bar-horizontal").contextMenu(menusplitHCanvas);

		      jQuery(".splitter-bar-vertical").mousedown(function() {
		    	  jQuery('#helpmain_splitter').click();return false;
		      });
		      jQuery(".splitter-bar-horizontal").mousedown(function() {
		    	  jQuery('#helpmain_splitter').click();return false;
		      });
		      
	    	  onPageReady();
	    	  
              document.getElementById("canvas-tabs").addEventListener('contextmenu', function (event) {
              	event.preventDefault();
              });
    
				var i = 0;
	    	  
				var resizeTimer;
				
		    	jQuery(window).resize(function() {
		    		if (!isResizing){
			    	    clearTimeout(resizeTimer);
			    	    resizeTimer = setTimeout(doneResizing, 100);
		    		}
		    	});
	
	    		function doneResizing(){
	    				resizing();
	    		}

	    		jQuery( "#tabs1" ).plusTabs({
		  	        className: "plusTabs",
		  	        seeMore: true,
		  	        seeMoreText: " ",
		  	        showCount: false,
		  	        expandIcon: "&#9660; ",
		  	        dropWidth: "66%",
		  	        sizeTweak: 30
		  	    });

	    		jQuery( "#tabs2" ).plusTabs({
		  	        className: "plusTabs",
		  	        seeMore: true,
		  	        seeMoreText: " ",
		  	        showCount: false,
		  	        expandIcon: "&#9660; ",
		  	        dropWidth: "66%",
		  	        sizeTweak: 30
		  	    });

	    		jQuery( "#tabFlowchart" ).plusTabs({
		  	        className: "plusTabs",
		  	        seeMore: true,
		  	        seeMoreText: " ",
		  	        showCount: false,
		  	        expandIcon: "&#9660; ",
		  	        dropWidth: "66%",
		  	        sizeTweak: 30
		  	    });

	    		var allTabs = jQuery("#tabs1").find(".allTabs");
		  	    
	    		 jQuery("#changeTabTabs1").click(function() {

	    			 allTabs = jQuery("#tabs2").find(".allTabs");
	    			 allTabs.hide();
	    			 allTabs = jQuery("#tabFlowchart").find(".allTabs");
	    			 allTabs.hide();
	    			 
	    			 allTabs = jQuery("#tabs1").find(".allTabs");

	    			 var tabsRealWidth = 0;
	    			 jQuery("#tabs1 ul:first li").each(function (index, element) {
		    			 tabsRealWidth += jQuery(element).width();
		    		 });
	    			 allTabs.css("left", parseInt(tabsRealWidth) +'px');

	    			 var $tabIndex = jQuery("#tabs1").tabs('option', 'active');
	    			 var $selected = jQuery("#tabs1 ul>li a").eq($tabIndex).attr('href');
	    			 allTabs.css("margin-top", -1 * jQuery($selected).height() + 'px');
	    			 
	    			 allTabs.show();

		    		  allTabs.mouseleave(function() {
			    			  allTabs.hide();
		    		  });
		    		  
	    		  });

	    		 jQuery("#changeTabTabs2").click(function() {

	    			 allTabs = jQuery("#tabs1").find(".allTabs");
	    			 allTabs.hide();
	    			 allTabs = jQuery("#tabFlowchart").find(".allTabs");
	    			 allTabs.hide();
	    			 
	    			 allTabs = jQuery("#tabs2").find(".allTabs");

	    			 var tabsRealWidth = 0;
	    			 jQuery("#tabs2 ul:first li").each(function (index, element) {
		    			 tabsRealWidth += jQuery(element).width();
		    		 });
	    			 allTabs.css("left", parseInt(tabsRealWidth) +'px');

	    			 var $tabIndex = jQuery("#tabs2").tabs('option', 'active');
	    			 var $selected = jQuery("#tabs2 ul>li a").eq($tabIndex).attr('href');
	    			 allTabs.css("margin-top", -1 * jQuery($selected).height() + 'px');
	    			 
	    			 allTabs.show();

		    		  allTabs.mouseleave(function() {
			    		  allTabs.hide();
		    		  });
		    		  
	    		  });

	    		 jQuery("#changeTabCanvas").click(function() {

	    			 allTabs = jQuery("#tabs1").find(".allTabs");
	    			 allTabs.hide();
	    			 allTabs = jQuery("#tabs2").find(".allTabs");
	    			 allTabs.hide();
	    			 
	    			 allTabs = jQuery("#tabFlowchart").find(".allTabs");

	    			 var tabsRealWidth = 0;
	    			 jQuery("#tabFlowchart ul:first li").each(function (index, element) {
		    			 tabsRealWidth += jQuery(element).width();
		    		 });
	    			 allTabs.css("left", parseInt(tabsRealWidth) +'px');

	    			 var $tabIndex = jQuery("#tabFlowchart").tabs('option', 'active');
	    			 var $selected = jQuery("#tabFlowchart ul>li a").eq($tabIndex).attr('href');
	    			 allTabs.css("margin-top", -1 * jQuery($selected).height() + 'px');
	    			 
	    			 allTabs.show();

		    		  allTabs.mouseleave(function() {
			    		  allTabs.hide();
		    		  });
		    		  
	    		  });
	    		  
	    		 
	    		 //var isChrome = window.chrome;
	    		 //if(isChrome){
		    		 
		    		 //disable select in chrome
		    		 jQuery('*').css('-webkit-user-select', 'none');
		    		 jQuery('*').css('-khtml-user-select', 'none');
		    		 jQuery('*').css('-moz-user-select', 'none');
		    		 jQuery('*').css('-o-user-select', 'none');
		    		 jQuery('*').css('user-select', 'none');
		    		 jQuery('input').css('-webkit-user-select', 'text');
		    		 jQuery('#flowchart-canvas-1').css('position', 'fixed');
		    		 
				 //}

	    		 jQuery("#tabsFooter").find("a").click(function() {
	    			 resizeCanvas(30,30);
	    		 });
	    		 
	    		 /* window.onbeforeunload = function(){
	    			 reinitializeCanvas();
	    		 } */

	    		 reinitializeCanvas();


	    		 //re open canvas
	    		 //delay(20000);
	    		 //closeAllWorkflowTabs();
	    		 //delay(3000);
	    		 //reOpenCanvas();

	    		 
	    	});	//---------- END jQuery function


		    function reOpenCanvasJS(status){
			//<![CDATA[
				console.log("reOpenCanvasJS");

				//delay(10000);
				
				for (var i = 0; i < status.length; i++) {
					console.log(status[i][1]);
					//alert(status[i][1]);
					//delay(8000);
					unblockRunningWorkflowJS();
					addElementJs(status[i][0],status[i][1],status[i][2],status[i][3],status[i][4], true, status[i][5]);
					reOpenCanvasLoadWorkflow();
				}
				
			    //]]>
			}

		    function delay(ms){
			    ms += new Date().getTime();
			    while (new Date() > ms){
				    
				}
		    }
	    	
	      function closeTab(arg,canvasName){

	    	  console.log("closeTab");
		      
		      if(typeof canvasName !== 'undefined'){
	    	  	//alert(canvasName);
	    	  	canvasArray[canvasName].stage.destroy();
	    	  	canvasArray[canvasName].legendStage.destroy();
	    	  	delete canvasArray[canvasName];
	    	  }
	    	  jQuery(jQuery( arg ).prev().attr('href')).remove();
	    	  jQuery( arg ).offsetParent().remove();
	      }
	      
	      function menuCloseTab(){

	    	  console.log("menuCloseTab");
		      
	    	  var tabName = getSelectedByName();
	    	  var ul = jQuery("#canvas-tabs ul:first li #"+tabName+"-icon-close");
	    	  closeWorkflowTab(ul, tabName);
	      }
	      
	      function addElementJs(canvasName, path, positions, links, selecteds, reset, workflowType, forceRefresh ){

	    	  console.log("addElementJs");
	    	  
	    	  forceRefresh = typeof forceRefresh !== 'undefined' ? forceRefresh : false;
	    	  canvasExist = typeof canvasArray[canvasName] !== 'undefined' ? true : false;
		      
		 	  //alert(positions);
		 	  
	          //Add the workflow tab only if the name does not exist yet.
	          if(document.getElementById(canvasName) == null || !canvasExist) {
	    	      addWorkflowTab(canvasName,workflowType);
	    	      configureCanvas(canvasName, reset, workflowType);
		    	  forceRefresh = true;
	          }
	          if(forceRefresh) {
	    	      addElements(canvasName, positions, selecteds);
	    	      addLinks(canvasName, links);
		    	  setWorkflow(canvasName);
	    	      setSaved(canvasName, true);
	    	      setPathFile(canvasName, path);
		    	  resizeCanvas(30,30);

                  canvasArray[canvasName].stage.draw();
	          }
	          
	      }

	      function addSelectedElement(canvasName, path, positions, links, selecteds){

	    	  console.log("addSelectedElement");
		      
	   	      addElements(canvasName, positions, selecteds);
	   	      addLinks(canvasName, links);
	   	      canvasArray[canvasName].layer.draw();
              canvasArray[canvasName].polygonLayer.draw();
              canvasArray[canvasName].stage.draw();
    
	      }
	      
	      function updateCanvasRunningStatus(status){

	    	  console.log("updateCanvasRunningStatus");
		      
		      var polygonLayer = canvasArray[selectedCanvas].polygonLayer;
	    	//<![CDATA[
	    	  for (var i = 0; i < status.length; i++) {
		    	  updateActionRunningStatus(status[i][0], status[i][1], status[i][2],false);
	    	  }
		      polygonLayer.draw();
	    	//]]>
	      }

	      function updateArcStatus(status){

	    	  console.log("updateArcStatus");
	    	//<![CDATA[
	    	  for (var i = 0; i < status.length; i++) {

				   //alert(status[i][7]);
		    	  //console.log("updateActionRunningStatus");
		    	  //alert(status[i][0] + " " + status[i][1] + " " + status[i][2]);
		    	  try{
		    	       updateActionOutputStatus(status[i][0], status[i][1], status[i][2], status[i][3], status[i][4], status[i][5],false, status[i][7]);
		    	  }catch(e){
		    	       updateActionOutputStatusUntilItDoesntFail(status[i][0], status[i][1], status[i][2], status[i][3], status[i][4], status[i][5],true, status[i][7], 0);
		    	  }
		    	  
		    	  for(var j = 0; j < status[i][6].length;j++) {
		    	  	updateArrowType(status[i][6][j][0], status[i][6][j][1], status[i][6][j][2], status[i][6][j][3], status[i][6][j][4],false);
		    	  	updateArrowLabel(status[i][6][j][0], status[i][6][j][1], status[i][6][j][5],false);
		    	  }
	    	  }
		      canvasArray[selectedCanvas].stage.draw();
		      
		      console.log("updateArcStatus END");
		      
	    	//]]>
	      }
	      
	      var numTabs = 1;
	      var nameTabs = {};
	      
	      function addWorkflowTab(tabName,type){

	    	  console.log("addWorkflowTab");
		      
	    	//<![CDATA[
	    	  var tabImage = typeof type == 'undefined' || type == "W" ? "../image/workflow_tab.gif" : "../image/subworkflow_tab.gif"  ;
	    	  
	    	  var tabs = jQuery("#canvas-tabs").tabs();
              var ul = jQuery("#canvas-tabs").tabs().find( "ul:first" );
              
              jQuery( "<li class='locked canvasTabsInactive'><a href='#"+ getCanvasId(tabName) +"' class='canvasTab' onclick=\"setWorkflow('"+tabName+"');return false;\"><img src='"+tabImage+"' style='width:15px;padding-right:5px;position:relative;top:3px;'/><span id='canvasNameStar-"+tabName+"'>"+ 
            		  tabName +"</span></a> <span id='"+tabName+"-icon-close' class='ui-icon ui-icon-close' role='presentation' onclick=\"closeWorkflowTab(this, '"+tabName+"'); return false;\"></span> </li>" ).appendTo( ul );
              
              var div = "<div id='"+getCanvasId(tabName)+"' class='container-canvas'>"+
				"<div id='container-"+tabName+"' class='container-"+tabName+"'>"+
				"<div class='rich-panel headerLegend' onclick=\"jQuery('#panelLegend-"+tabName+"').toggle();jQuery('#container-comment-"+tabName+"').hide();return false;\"  style='position: fixed; z-index:101; width:60px'>"+
					"<div class='rich-panel-header'>Legend</div>"+
				"</div>"+
				"<div class='rich-panel' id='panelLegend-"+tabName+"' style='position: fixed; z-index:100; display: none; width:190px; '>"+
					"<div class='rich-panel-body' style='overflow:auto;'>"+
						"<div id='container-legend-"+tabName+"' class='container-legend-"+tabName+"' style='overflow:hidden; position: relative; top:20px;'/>"+
					"</div>"+
	        	"</div>"+
	        	"<div class='rich-panel headerComment' "+
	        	      "onclick=\"jQuery('#container-comment-"+tabName+"').toggle();jQuery('#panelLegend-"+tabName+"').hide();return false;\""+
                      " style='left:82px;position: fixed; z-index: 101; width: 60px'>"+
                      " <div class='rich-panel-header'>Comment</div>"+
                " </div>"+
                " <div id='container-comment-"+tabName+"' class='rich-panel container-comment-"+tabName+"'"+
                    " style='overflow: auto;position: fixed; z-index: 100; display: none; width: 330px; height:400px;resize:both;'>"+
                " </div>"+
              	"</div>"+
				"</div>";
              
              jQuery(div).appendTo( tabs );
              tabs.tabs( "refresh" );
              
              //select new tab
              tabs.tabs("option", "active", numTabs);
              nameTabs[numTabs] = tabName;
              numTabs++;
              setSelectedByName(tabName);
            //]]>
	      }
	      
          function closeCurrentTabWithoutCallingBackend(){
            //<![CDATA[
            
            console.log("closeCurrentTabWithoutCallingBackend");
            
              var tabName = getSelectedByName();
              var tab = jQuery("#canvas-tabs ul:first li #"+tabName+"-icon-close");
              
              closeTab(tab,tabName);
              
              jQuery("#canvas-tabs").tabs( "refresh" );
              
              var names = {};
              var cont = 0;
              for (var i = 0; i < numTabs; ++i){
                  if (nameTabs[i] != tabName){
                      names[cont++] = nameTabs[i];
                  }
              }
              numTabs--;
              nameTabs = names;
              selectTab(numTabs-1);
            //]]>
          }
	      
	      function closeWorkflowTab(tab, tabName){
	      //<![CDATA[
	    	
	    	console.log("closeWorkflowTab");
	    	
	    	var canvasNameStar = jQuery('#canvasNameStar-'+tabName).text();
			if(canvasNameStar[canvasNameStar.length-1] == "*" ){
				if(!confirm('Are you sure you want to close the selected canvas?')){
			    	return false;
			    }else{
			    	closeWorkflowTabJS(tab, tabName);
				}
			}else{
				closeWorkflowTabJS(tab, tabName);
			}
			
	      //]]>
	      }

	      function closeWorkflowTabJS(tab, tabName){
	      //<![CDATA[
	      
	      console.log("closeWorkflowTabJS");
	      
	    	  	closeTab(tab,tabName);
		    	closeWorkflow(tabName);
		    	  
		    	jQuery("#canvas-tabs").tabs( "refresh" );
		    	  
		    	var names = {};
		    	var cont = 0;
		    	for (var i = 0; i < numTabs; ++i){
		    		if (nameTabs[i] != tabName){
		    			names[cont++] = nameTabs[i];
		    		}
		    	}
		    	numTabs--;
		    	nameTabs = names;
		    	selectTab(numTabs-1);
	      
	      
		  //]]>
	      }
	      
	      
	      function closeAllWorkflowTabs(){
          //<![CDATA[
	    	  console.log("closeAllWorkflowTabs");
		      
              var ul = jQuery("#canvas-tabs ul:first li .ui-icon");
              
              jQuery.each(ul, function(index, value){
            	  closeTab(value);
              });
              
              var arrayLength = canvasArray.length;
              for (var i = 0; i < arrayLength;++i) {
	    	  	 canvasArray[i].stage.destroy();
	    	  	 canvasArray[i].legendStage.destroy();
	    	  	 delete canvasArray[i];
              }
	    	  
              contTabCanvas = 0;
              numTabs = 0;
    	      nameTabs = {};
              
              //addWorkflow("canvas-1");
              //addWorkflowTab("canvas-1");
              //configureCanvas("canvas-1", true, "W");
              //setWorkflow("canvas-1");

              //resizeCanvas(30,45);
          //]]>
	      }

		var runningIntervalID;
		var copyRunningMsgIdx = 0;
	      
	     function unblockRunningWorkflowJS(){
	     	//<![CDATA[

		         
	         if(lastBlockedRunningWorkflow){
	        	 console.log("unblockRunningWorkflowJS ", lastBlockedRunningWorkflow);
	             jQuery('#'+lastBlockedRunningWorkflow).unblock();
	             try{DMRDIV_disableProgressBar();}catch(exception){}
	             try{jQuery('#domMessageRunning'+ copyRunningMsgIdx).remove();}catch(exception){}

	             //remove star if necessary
	             var canvasNameStar = jQuery('#canvasNameStar-'+getSelectedByName()).text();
	             if(canvasNameStar[canvasNameStar.length-1] == "*" ){
	 				jQuery('#canvasNameStar-'+getSelectedByName()).text(getSelectedByName());
	 				updateCanvasNameStar();
	 			 }
	             
	         }else{
		    	 console.log("unblockRunningWorkflowJS");
		     }


	         lastBlockedRunningWorkflow = null;
	         clearInterval(runningIntervalID);
	         
	     	//]]>
	     }

	     
	     function blockRunningWorkflowJS(){
	     	 //<![CDATA[
	         unblockRunningWorkflowJS();
	         
             lastBlockedRunningWorkflow = getSelectedById();
             
	    	 console.log("blockRunningWorkflowJS" , lastBlockedRunningWorkflow);

			try{
	    	 var origDiv = document.getElementById('domMessageRunning');
	    	 var newDiv = document.createElement("div");
	    	 newDiv.id = 'domMessageRunning'+ (++copyRunningMsgIdx);
	    	 newDiv.style.display = "none";
	    	 if(copyRunningMsgIdx == 1){
	    	     origDiv.innerHTML = origDiv.innerHTML.replace(/DMRDIV_/g,'DORDIV_');
	    	 }
	    	 newDiv.innerHTML = origDiv.innerHTML.replace(/DORDIV_/g,'DMRDIV_');
             jQuery('#'+lastBlockedRunningWorkflow).block({ message: newDiv });
	     	 }catch(exception){
		     	//alert("d " + lastBlockedRunningWorkflow + " " + exception);
		     }
             
             resizeBlockUICanvas();

             runningIntervalID = setInterval(function(){ DMRDIV_updateProgressBar(); },1500);
             setTimeout(function(){ DMRDIV_updateProgressBar(); }, 100);
             
             //]]>
         }
	     
	     function selectTab(tabIndex){

	    	 console.log("selectTab");
		     
	    	 var tabs = jQuery("#canvas-tabs").tabs();
	    	 tabs.tabs("option", "active", tabIndex);
	    	 setWorkflow(nameTabs[tabIndex]);
	     }
		    
        jQuery(document).bind('keydown', function (event) {

        	console.log("jquery bind keydown");
        	
			if( !jQuery(".rich-mp-container").is(":visible") ){
				if (event.keyCode == 46) { // Delete
	                deleteSelected(selectedCanvas);
	            }
			}
				
			if (event.keyCode === 8) { //backspace
				var targ;
				if (!event) var event = window.event;
				if (event.target) targ = event.target;
				else if (event.srcElement) targ = event.srcElement;

				if(targ.tagName == "BODY"){
					event.preventDefault();
				}
			}

			 //<![CDATA[
			 
			 //chrome
			 
			if (event.keyCode === 37 && event.altKey) {
				event.preventDefault();
			}
			if (event.keyCode === 39 && event.altKey) {
				event.preventDefault();
			}
			if (event.keyCode === 69 && event.altKey) {
				event.preventDefault();
			}
			if (event.keyCode === 70 && event.altKey) { //Alt+F 
				event.preventDefault();
			}
			if (event.keyCode === 69 && event.altKey) { //Alt+e
				event.preventDefault();
			}
			if (event.keyCode === 66 && event.ctrlKey && event.shiftKey) { //Ctrl+Shift+B
				event.preventDefault();
			}
			if (event.keyCode === 73 && event.ctrlKey) { //Ctrl+H
				event.preventDefault();
			}
			if (event.keyCode === 74 && event.ctrlKey) { //Ctrl+J
				event.preventDefault();
			}
			if (event.keyCode === 74 && event.ctrlKey && event.shiftKey) { //Ctrl+Shift+J
				event.preventDefault();
			}
			if (event.keyCode === 46 && event.ctrlKey && event.shiftKey) { //Ctrl+Shift+Delete
				event.preventDefault();
			}
			if (event.keyCode === 112) { //f1
				event.preventDefault();
			}
			if (event.keyCode === 77 && event.ctrlKey && event.shiftKey) { //Ctrl+Shift+M
				event.preventDefault();
			}
			if (event.keyCode === 84 && event.altKey && event.shiftKey) { //Shift+Alt+T
				event.preventDefault();
			}
			if (event.keyCode === 117) { //f6
				event.preventDefault();
			}
			if (event.keyCode === 117 && event.shiftKey) { //Shift+F6
				event.preventDefault();
			}
			if (event.keyCode === 80 && event.ctrlKey) { //Ctrl+P 
				event.preventDefault();
			}
			if (event.keyCode === 83 && event.ctrlKey) { //Ctrl+S
				event.preventDefault();
			}
			if (event.keyCode === 82 && event.ctrlKey) { //Ctrl+R
				event.preventDefault();
			}
			if (event.keyCode === 116 && event.ctrlKey) { //f5
				event.preventDefault();
			}
			if (event.keyCode === 70 && event.ctrlKey) { //Ctrl+F
				event.preventDefault();
			}
			if (event.keyCode === 71 && event.ctrlKey) { //Ctrl+G
				event.preventDefault();
			}
			if (event.keyCode === 113 && event.ctrlKey) { //f3
				event.preventDefault();
			}
			if (event.keyCode === 71 && event.ctrlKey && event.shiftKey) { //Ctrl+Shift+G   
				event.preventDefault();
			}
			if (event.keyCode === 116 && event.ctrlKey) { //Ctrl+F5
				event.preventDefault();
			}
			if (event.keyCode === 116 && event.shiftKey) { //Shift+F5
				event.preventDefault();
			}
			if (event.keyCode === 80 && event.ctrlKey) { //Ctrl+U
				event.preventDefault();
			}
			if (event.keyCode === 85 && event.ctrlKey) { //Ctrl+D
				event.preventDefault();
			}
			if (event.keyCode === 68 && event.ctrlKey && event.shiftKey) { //Ctrl+Shift+D
				event.preventDefault();
			}
			if (event.keyCode === 122 && event.ctrlKey) { //f11
				event.preventDefault();
			}
			if (event.keyCode === 48 && event.ctrlKey) { //Ctrl+0
				event.preventDefault();
			}

			
			//]]>
			
            
        });
	   		
	   	function disableEnterKey(e){

	   		console.log("disableEnterKey");
		   	
	        var key;
	        if(window.event)
	             key = window.event.keyCode;
	        else
	             key = e.which;
	        return (key != 13);
	   }
	   	
	   	function menuSave(){

	   		console.log("menuSave");

	   		var name = getSelectedByName();
			if (isSaved(name)){
				if(!isRunning(name)){
					save(getPathFile(name));
			   	}
	   		} else{
	   			openModalSaveWorkflow();
	   		}
	   		
	   	}

	   	function importSubWorkflow(){

	   		console.log("importSubWorkflow");
		   	
			openModalImportSubworkflow();
		}
	   	
	   	function configureTabsRemote(){

	   		console.log("configureTabsRemote");
		   	
		    var tabsRemote = jQuery("#tabRemote").tabs().scrollabletab();

		  	/* tabsRemote.find(".ui-tabs-nav").sortable({
		  	  //connectWith: ".ulCssCanvas",
		  	  items: "li:not(.locked)",
		  	  axis: "x",
		  	  stop: function() {
		  		  tabsRemote.tabs("refresh");
		  	  	}
	  	 	 }); */
		  	
		  	//jQuery("#tabRemote").tabs().tabs('refresh');
		  	//resizeTables();
	   	}


	   	function configureFooter(){

	   		console.log("configureFooter");
		   	
   		 var tabsFooter = jQuery("#tabsFooter").tabs().scrollabletab();

   	  		  /* tabsFooter.find(".ui-tabs-nav").sortable({
	    	  //connectWith: ".ulCssCanvasFooter",
	    	  items: "li:not(.locked)",
	    	  axis: "x",
	    	  stop: function() {
	    		  tabsFooter.tabs("refresh");
	    	  	}
	    	  }); */
	    	  
	    	  //jQuery("#tabsFooter").tabs().tabs('refresh');
	    	  
	    	  configureFooterCss();
	    	  validateArrows(jQuery("#tabsFooter"),jQuery("#buttonsTabsFooter"));
	    	  
   		}

	    function updateObjsNameReplace(status){

	    	console.log("updateObjsNameReplace");
		    
		    //<![CDATA[
		    for (var i = 0; i < status.length; i++) {
			    //alert(status[i][0] + "  " + status[i][1]);
		    	updateLabelObj(status[i][0], status[i][1]);
			}
			//]]>
		}

	    function checkOpenModalAggregate(){

	    	console.log("checkOpenModalAggregate");
		    
	    	if(getSelectedIconsCommaDelimited() != ""){
	    		openModalAggregate(getSelectedIconsCommaDelimited());
		    }else{
		    	alert("You need select one object");
			}
	    }
	    
	    function checkExpand(){

	    	console.log("checkExpand");
		    
	    	 //<![CDATA[
	    	if(getSelectedSAIconsCommaDelimited() == getSelectedIconsCommaDelimited()){
	    		undoRedoExpand(getSelectedSAIconsCommaDelimited());
		    }else{
		    	alert("You need select one object or select just Super Actions");
			}
	    	//]]>
	    }

	    function refreshRelativeHelp(){

	    	console.log("refreshRelativeHelp");
		    
	    	 jQuery('[id$="refreshRelativeHelp"]').click();
	    }

	    function checkPageError(){

	    	console.log("checkPageError");
		    
		   	if(jQuery("#msnErrorPageContainer")){
			 	jQuery("#msnErrorPageContainer").css("z-index", '1000');
	    	}
	   	}

	   	function reinitializeCanvasScreen(values){

	   		console.log("reinitializeCanvasScreen");
		   	
			if(values != null){
				backupAndCloseAll();
				setTimeout(function() {alert("The page has been refreshed. Your work has been saved in the backup directory.");}, 1);
				//addWorkflow("canvas-1");
			}
		}


	   	function setShowInstallPackageModelValue(value){

	   		console.log("setShowInstallPackageModelValue");
		   	
	        if(value == 'P'){
		    	jQuery('[id$="installPackagesMsg"]').show();
	    		jQuery('[id$="installModelMsg"]').hide();
	        }else{
	        	jQuery('[id$="installPackagesMsg"]').hide();
	    		jQuery('[id$="installModelMsg"]').show();
	        }
	    }
	   	
	   	/*keyboard shortcuts*/
	   	
	   	shortcut.add("Ctrl+n",function() {
	   		if( !jQuery(".rich-mp-container").is(":visible") ){
		   		jQuery("#formMenu\\:newMenuItem").click();
	   		}
	   	});
	   	
	   	shortcut.add("Ctrl+o",function() {
	   		if( !jQuery(".rich-mp-container").is(":visible") ){
		   		jQuery("#formMenu\\:openMenuItem").click();
	   		}
	   	});
	   	
	   	shortcut.add("Ctrl+s",function() {
	   		if( !jQuery(".rich-mp-container").is(":visible") ){
		   		jQuery("#formMenu\\:saveMenuItem").click();
	   		}
	   	});
	   	
		shortcut.add("Ctrl+Alt+x",function() {
			if( !jQuery(".rich-mp-container").is(":visible") ){
				jQuery("#formMenu\\:saveAsMenuItem").click();
			}
	   	});
		
		shortcut.add("Ctrl+Shift+s",function() {
			if( !jQuery(".rich-mp-container").is(":visible") ){
				jQuery("#formMenu\\:saveAllMenuItem").click();
			}
	   	});
		
		shortcut.add("Ctrl+w",function() {
			if( !jQuery(".rich-mp-container").is(":visible") ){
				jQuery("#formMenu\\:closeMenuItem").click();
			}
	   	});
		
		shortcut.add("Ctrl+Shift+w",function() {
			if( !jQuery(".rich-mp-container").is(":visible") ){
				jQuery("#formMenu\\:closeAllMenuItem").click();
			}
	   	});
		
		shortcut.add("Ctrl+a",function() {
			if( !jQuery(".rich-mp-container").is(":visible") ){
				jQuery("#formMenu\\:selectAllMenuItem").click();
			}
	   	});
		
		shortcut.add("Ctrl+Shift+a",function() {
			if( !jQuery(".rich-mp-container").is(":visible") ){
				jQuery("#formMenu\\:deselectAllMenuItem").click();
			}
	   	});
	   	
        shortcut.add("Ctrl+h",function() {
        	if( !jQuery(".rich-mp-container").is(":visible") ){
	            jQuery("#formMenu\\:replaceMenuItem").click();
        	}
        });
	   	
		shortcut.add("Ctrl+j",function() {
			if( !jQuery(".rich-mp-container").is(":visible") ){
				jQuery("#formMenu\\:oozieMenuItem").click();
			}
	   	});
		
		shortcut.add("Ctrl+l",function() {
			if( !jQuery(".rich-mp-container").is(":visible") ){
				jQuery("#formMenu\\:cleanMenuItem").click();
			}
	   	});
	   	
		shortcut.add("Ctrl+e",function() {
			if( !jQuery(".rich-mp-container").is(":visible") ){
				jQuery("#formMenu\\:runSelectedMenuItem").click();
			}
	   	});
		
		shortcut.add("Ctrl+Alt+e",function() {
			if( !jQuery(".rich-mp-container").is(":visible") ){
				jQuery("#formMenu\\:runMenuItem").click();
			}
	   	});
		
		shortcut.add("Ctrl+i",function() {
			if( !jQuery(".rich-mp-container").is(":visible") ){
				jQuery("#formMenu\\:installationMenuItem").click();
			}
	   	});
	   	
	   	shortcut.add("Ctrl+Alt+p",function() {
	   		if( !jQuery(".rich-mp-container").is(":visible") ){
	            jQuery("#formMenu\\:settingsMenuItem").click();
	   		}
        });

	   	shortcut.add("Ctrl+Shift+c",function() {
	   		if( !jQuery(".rich-mp-container").is(":visible") ){
	            jQuery("#formMenu\\:copyMenuItem").click();
	   		}
	   	});
        
        shortcut.add("Ctrl+Shift+v",function() {
        	if( !jQuery(".rich-mp-container").is(":visible") ){
            	jQuery("#formMenu\\:pasteMenuItem").click();
        	}
        });

        shortcut.add("Ctrl+Shift+z",function() {
        	if( !jQuery(".rich-mp-container").is(":visible") ){
            	jQuery("#formMenu\\:undoMenuItem").click();
        	}
        });

        shortcut.add("Ctrl+Shift+y",function() {
        	if( !jQuery(".rich-mp-container").is(":visible") ){
            	jQuery("#formMenu\\:redoMenuItem").click();
        	}
        });

        shortcut.add("Ctrl+Alt+a",function() {
			if( !jQuery(".rich-mp-container").is(":visible") ){
				jQuery("#formMenu\\:aggregateMenuItem").click();
			}
	   	});

	</script>

</head>
<body id="body">

	<a4j:keepAlive beanName="canvasModalBean" />
	
	<a4j:region renderRegionOnly="true">
				
					
		<div id="domMessageRunning" style="display: none;">
			<h:form>
			
				<a4j:jsFunction name="DMRDIV_updateProgressBar" reRender="DMRDIV_runningActionsList, DMRDIV_completedActionsList, DMRDIV_FormTitle, DMRDIV_idProgBarRunning" 
					data="#{canvasBean.runningAndUpdate}" oncomplete="if(data === undefined || !data[1]){unblockRunningWorkflowJS();}else{console.log('updateProgressBar: ',data[0],data[1],getSelectedByName()); if(data[0] == 'false' &amp;&amp; data[1] == getSelectedByName()){unblockRunningWorkflowJS();setRunning(getSelectedByName(), false);console.log('updateArcsAfterRunning: ',data[0],data[1],getSelectedByName());updateAllArcsStatus();}}"  />
				<a4j:jsFunction name="DMRDIV_disableProgressBar" reRender="DMRDIV_idProgBarRunning" 
				     oncomplete="try{#{rich:component('DMRDIV_idProgBarRunning')}.disable();}catch(exception){}"/>
				
				<h:outputLink id="DMRDIV_workflowUrl" value="#{canvasBean.workflowUrl}"
					target="_blank" style="float:left;margin-left:5px;"
					rendered="#{canvasBean.workflowUrl != null}">
					<h:graphicImage
						value="../image/icons/button-oozie_web_console.gif"
						title='#{messages.oozie_gotowebconsole}' alt="Oozie Console"
						class="fileSystemIcon" />
				</h:outputLink>
				<img src="../image/icons/waiting.gif" />
				<h:panelGroup id="DMRDIV_right_area" layout="block">
					<br/>
					<h:outputText id="DMRDIV_FormTitle" value="#{canvasBean.nameWorkflow}" style="test-align:center;font-weight: bold;font-size:16px;" />
					<br/>
					<a4j:outputPanel id="DMRDIV_runningprogressComponent">
						<rich:simpleTogglePanel id="DMRDIV_runningActionsList" label="Running Actions (#{canvasBean.runningElementsSize})" switchType="client" style="max-height: 90px;overflow:auto;" >
							<ui:repeat value="#{canvasBean.runningElements}" var="item">
	                   			#{item}<br />
	               			</ui:repeat>
						</rich:simpleTogglePanel>
						<rich:simpleTogglePanel id="DMRDIV_completedActionsList" label="Actions Completed (#{canvasBean.doneElementsSize})" switchType="client" style="max-height: 90px;overflow:auto;" >
							<ui:repeat value="#{canvasBean.doneElements}" var="item">
	                   			#{item}<br />
	               			</ui:repeat>
						</rich:simpleTogglePanel>
						<rich:progressBar id="DMRDIV_idProgBarRunning" interval="5000" enabled="#{canvasBean.progressBarEnabled}"
							reRenderAfterComplete="DMRDIV_runningprogressComponent" value="#{canvasBean.valueProgressBar}" minValue="0" maxValue="100" >
						    <h:outputText value="#{canvasBean.valueProgressBar} %" />
					    </rich:progressBar>
					</a4j:outputPanel>
					<a4j:commandButton id="DMRDIV_killProcessBtn" styleClass="greenButton"
						style="float:right;margin-right:5px;" value="Kill Process"
						action="#{canvasBean.stopRunningWorkflow}"
						oncomplete="#{rich:component('DMRDIV_idProgBarRunning')}.disable();" />
				</h:panelGroup>
			
			</h:form>
		</div>
	
	</a4j:region>

	<div id="invisible"></div>

	<div id="menu" style="width: 100%">
		<h:form id="formMenu" class="menu">

			<div id="domMessageDivCanvas1" style="display: none;">
				<img src="../image/icons/waiting.gif" />
			</div>
			
			<a4j:region>
				<a4j:jsFunction name="updateCanvasNameStar" reRender="canvasNameStar" />
			</a4j:region>

			<a4j:region id="functionsForSave">
				<a4j:jsFunction name="openModalSaveWorkflow"
					action="#{browserHdfsBean.createSaveFolder}"
					oncomplete="console.log('openModalSaveWorkflow'); jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });openModalFileHdfs('T');" />
				<a4j:jsFunction name="openModalLoadWorkflow"
					action="#{browserHdfsBean.createSaveFolder}"
					oncomplete="console.log('openModalLoadWorkflow'); jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });openModalFileHdfs('F');" />
				<a4j:jsFunction name="openModalFileHdfs" reRender="modalFileHdfs"
					oncomplete="console.log('openModalFileHdfs'); mountComboboxExtensionsFileSystemModalHDFS();#{rich:component('modalFileHdfs')}.show();jQuery('#canvas-tabs').unblock();">
					<a4j:actionparam name="openCtrl"
						assignTo="#{browserHdfsBean.showSave}" />
				</a4j:jsFunction>
			</a4j:region>
			
			<a4j:region>
				<a4j:jsFunction name="cloneBeforeExpand" action="#{canvasBean.cloneWorkflow}" data="#{canvasBean.cloneWFId}"
					oncomplete="console.log('cloneBeforeExpand'); tmpCommandObj.cloneId = data;expand(tmpCommandObj.selectedSAIcons);">
					<a4j:actionparam name="allpositions" />
				</a4j:jsFunction>
			
				<a4j:jsFunction name="expand" action="#{canvasBean.expand}" reRender="errorTable, msnError" 
					oncomplete="console.log('expand'); if(#{requestScope['msnError'] == null}){refreshCanvas();}jQuery.unblockUI();" >
					<a4j:actionparam name="selectedIcons" />
				</a4j:jsFunction>
			</a4j:region>
			
			<a4j:region>
				<a4j:jsFunction name="openModalAggregate" action="#{canvasBean.openAggregate}" reRender="errorTable, msnError"
					oncomplete="console.log('openModalAggregate'); if(#{requestScope['msnError'] == null}){#{rich:component('modalAggregate')}.show();}" >
					<a4j:actionparam name="selectedIcons" />
				</a4j:jsFunction>
				
				<a4j:jsFunction name="cloneBeforeAggregate" action="#{canvasBean.cloneWorkflow}" data="#{canvasBean.cloneWFId}"
					oncomplete="console.log('cloneBeforeAggregate'); tmpCommandObj.cloneId = data;aggregate();">
					<a4j:actionparam name="allpositions" />
				</a4j:jsFunction>
				
				<a4j:jsFunction name="aggregate" action="#{canvasBean.aggregate}" data="#{canvasBean.inputNameSubWorkflow}" reRender="errorTable, msnError"
					oncomplete="console.log('aggregate'); tmpCommandObj.nameSA = data;if(#{requestScope['msnError'] == null}){#{rich:component('modalAggregate')}.hide();refreshCanvas();refreshRelativeHelp();}else{canvasArray[selectedCanvas].commandHistory.removeLastAction()}jQuery.unblockUI();" >
				</a4j:jsFunction>
					
				<a4j:jsFunction name="undoAggregate" action="#{canvasBean.undoAggregate}" >
					<a4j:actionparam name="nameSA" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:jsFunction name="openModalImportSubworkflow"
					oncomplete="console.log('openModalImportSubworkflow'); jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });openModalFileHdfs('F');">
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region renderRegionOnly="true">
				<a4j:jsFunction name="saveAllPositions" action="#{canvasBean.updateAllPosition}">
					<a4j:actionparam name="allpositions" />
				</a4j:jsFunction>
			</a4j:region>
			
			<a4j:region renderRegionOnly="true">
				<a4j:jsFunction name="backupAllWorkflowsBeforeCloseToOpen" action="#{canvasBean.backupAllWorkflowsBeforeCloseToOpen}">
					<a4j:actionparam name="allpositions" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="closeAll" action="#{canvasBean.closeAll}"
					oncomplete="console.log('closeAll'); closeAllWorkflowTabs()" />
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="reRenderFooter" oncomplete="console.log('reRenderFooter'); mountFooter();" reRender="tabsFooterForm" />
				<a4j:jsFunction name="mountFooter" oncomplete="console.log('mountFooter'); configureFooter();mountObj('#{canvasBean.nameWorkflow}')" />
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="updateOutputStatus"
					data="#{canvasBean.outputStatus}"
					oncomplete="console.log('updateOutputStatus'); updateArcStatus(data);" reRender="errorTable, msnError">
					<a4j:actionparam name="groupId" />
				</a4j:jsFunction>

			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="updateSelectedOutputStatus"
					data="#{canvasBean.selectedOutputStatus}"
					oncomplete="console.log('updateSelectedOutputStatus'); updateArcStatus(data);" reRender="errorTable, msnError">
					<a4j:actionparam name="select" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="updateWfComment"
					action="#{canvasBean.updateWfComment}"
					oncomplete="console.log('updateWfComment'); updateWfDisplayComment()">
					<a4j:actionparam name="commentWf"
						assignTo="#{canvasBean.commentWf}" />
				</a4j:jsFunction>

			</a4j:region>

			<a4j:region>
				<a4j:jsFunction name="updateWfDisplayComment"
					data="#{canvasBean.savedWfComment}"
					oncomplete="console.log('updateWfDisplayComment'); jQuery('.container-comment-'+getSelectedByName()).html(data);"
					reRender="errorTable, msnError">
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="updateWfComment"
					action="#{canvasBean.updateWfComment}"
					oncomplete="console.log('updateWfComment'); updateWfDisplayComment()">
					<a4j:actionparam name="commentWf"
						assignTo="#{canvasBean.commentWf}" />
				</a4j:jsFunction>
			</a4j:region>


			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="openWorkflowElementUrl"
					action="#{canvasBean.calcWorkflowElementUrl}"
					data="#{canvasBean.workflowElementUrl}"
					oncomplete="console.log('openWorkflowElementUrl'); window.open(data,'_blank')" reRender="errorTable">
					<a4j:actionparam name="groupId" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="updateAllArcsStatus"
					data="#{canvasBean.allOutputStatus}"
					oncomplete="console.log('updateAllArcsStatus'); updateArcStatus(data);jQuery('#canvas-tabs').unblock();"
					reRender="errorTable" />
				
				<a4j:jsFunction name="regeneratePathsProject"
					action="#{canvasBean.regeneratePathsProject}"
					oncomplete="console.log('regeneratePathsProject');updateAllArcsStatus();"
					reRender="errorTable" />
				
				<a4j:jsFunction name="regeneratePathsProjectMove"
					action="#{canvasBean.regeneratePathsProjectMove}"
					oncomplete="console.log('regeneratePathsProjectMove');updateAllArcsStatus();"
					reRender="errorTable" />
				
				<a4j:jsFunction name="regeneratePathsProjectCopy"
					action="#{canvasBean.regeneratePathsProjectCopy}"
					oncomplete="console.log('regeneratePathsProjectCopy');updateAllArcsStatus();"
					reRender="errorTable" />
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="updateRunningStatus"
					data="#{canvasBean.runningStatus}"
					oncomplete="console.log('updateRunningStatus'); updateCanvasRunningStatus(data);jQuery('#canvas-tabs').unblock();"
					reRender="errorTable, msnError" />
			</a4j:region>

			<a4j:region>
                <a4j:status
                    onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
                    onerror="jQuery('#canvas-tabs').unblock();"
                    onsuccess="jQuery('#canvas-tabs').unblock();"
                    onstop="jQuery('#canvas-tabs').unblock();" />
                    
				<a4j:jsFunction name="setWorkflow"
					action="#{canvasBean.changeWorkflow}"
					oncomplete="selectedCanvas='#{canvasBean.nameWorkflow}';console.log('setWorkflow', getSelectedByName(), getSelectedWorkflowType(), #{canvasBean.running}, selectedCanvas);updateWfDisplayComment();if(getSelectedWorkflowType() == 'W'){if(#{canvasBean.running} == true){setRunning(getSelectedByName(), true);blockRunningWorkflowJS();}else{unblockRunningWorkflowJS();updateAllArcsStatus();}}else{updateAllArcsStatus();}changeFooter(getSelectedByName());"
					>
					<a4j:actionparam name="selectedCanvas" assignTo="#{canvasBean.nameWorkflow}" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="addWorkflow" action="#{canvasBean.addWorkflow}" oncomplete="console.log('addWorkflow'); setWorkflow(getSelectedByName());">
					<a4j:actionparam name="name" />
				</a4j:jsFunction>

				<a4j:jsFunction name="addSubWorkflow" action="#{canvasBean.addSubWorkflow}" oncomplete="console.log('addSubWorkflow'); setWorkflow(getSelectedByName());">
					<a4j:actionparam name="name" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="removeLinkBt"
					action="#{canvasBean.removeLink}">
					<a4j:actionparam name="paramOutId" />
					<a4j:actionparam name="paramOutName" />
					<a4j:actionparam name="paramInId" />
					<a4j:actionparam name="paramInName" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="removeElement"
					action="#{canvasBean.removeElement}">
					<a4j:actionparam name="paramGroupID" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:jsFunction name="addElementBt"
					action="#{canvasBean.addElement}"
					data="#{canvasBean.idLastElementInserted}"
					oncomplete="console.log('addElementBt'); tmpCommandObj.elementId = data;">
					<a4j:actionparam name="paramNameElement" />
					<a4j:actionparam name="paramGroupID" />
					<a4j:actionparam name="paramIdElement" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="saveWorkflow" action="#{canvasBean.save}"
					reRender="errorTable"
					oncomplete="renameTab();">
					<a4j:actionparam name="nameWorkflow" />
					<a4j:actionparam name="pathFile" />
					<a4j:actionparam name="positions" />
					<a4j:actionparam name="selecteds" />
					<a4j:actionparam name="workflowType" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="copy" action="#{canvasBean.copy}" reRender="errorTable">
					<a4j:actionparam name="select" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>

				<a4j:status onerror="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="addLinkBt" data="#{canvasBean.resultAfterAddingLink}"
					oncomplete="console.log('addLinkBt'); updateLink(data[0], data[1], data[2]);
                	updateArrowColor('#{canvasBean.paramOutId}','#{canvasBean.paramInId}', '#{canvasBean.nameOutput}');" />
			</a4j:region>
			
			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });" />

				<a4j:jsFunction name="addLinkModalBt"
					action="#{canvasBean.updateLinkPossibilities}"
					oncomplete="console.log('addLinkModalBt'); if(#{canvasBean.nbLinkPossibilities} == 1){addLinkBt();}else{jQuery('#canvas-tabs').unblock();#{rich:component('modalSelectLink')}.show();};"
					reRender="selectLinkList">
					<a4j:actionparam name="paramOutId" assignTo="#{canvasBean.paramOutId}" />
					<a4j:actionparam name="paramInId" assignTo="#{canvasBean.paramInId}" />
					<a4j:actionparam name="paramNameLink" assignTo="#{canvasBean.paramNameLink}" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="updateArrowColor"
					data="#{canvasBean.arrowType}"
					oncomplete="console.log('updateArrowColor'); updateArrowType(data[0], data[1], data[2], data[3], data[4]);updateArrowLabel(data[0], data[1], data[5]);">
					<a4j:actionparam name="groupOutId" />
					<a4j:actionparam name="groupInId" />
					<a4j:actionparam name="outputName" />
				</a4j:jsFunction>

			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="openModal"
					data="#{canvasModalBean.openCanvasModal}"
					oncomplete="canvasModalParam = data;console.log('openModal'); if(#{requestScope['msnError'] == null} &amp;&amp; data[0] == 'true'){cloneBeforeUpdateElement();checkPageError();reLoadDisplayTable();}"
					reRender="pageTitle, panelDynamicForm, panelBtCanvasModal, msnError, errorTable, canvasModalTabPanel, msnErrorPage,tableInteraction">
					<a4j:actionparam name="paramGroupId" />
					<a4j:actionparam name="paramPathImage" />
					<a4j:actionparam name="paramSelectedTab" />
					<a4j:actionparam name="paramPageNb" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="openChangeIdModal"
					data="#{canvasModalBean.openCanvasModal}"
					oncomplete="canvasModalParam = data;console.log('openChangeIdModal'); if( #{requestScope['msnError'] == null}){#{rich:component('modalChangeId')}.show();}"
					reRender="msnError, errorTable, newIdElement">
					<a4j:actionparam name="paramGroupId" />
					<a4j:actionparam name="paramPathImage" />
					<a4j:actionparam name="paramLoadMainWindow" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:jsFunction name="closeChangeIdModal"
					reRender="pageTitle, panelDynamicForm, panelBtCanvasModal, msnError, errorTable, canvasModalTabPanel"
					oncomplete="console.log('closeChangeIdModal'); if(canvasModalParam[0] == 'true'){changeHelpAnchor(canvasModalParam[1]);setPageNb(canvasModalParam[2],canvasModalParam[1]);cloneBeforeUpdateElement();}else{updateOutputStatus(currentChangeIdGroup);}">
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="openPackageModal" action="#{packageMngBean.start}"
					oncomplete="console.log('openPackageModal'); #{rich:component('modalPackage')}.show();">
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="loadWorkflow" data="#{canvasBean.positions}"
					oncomplete="console.log('loadWorkflow'); unblockRunningWorkflowJS();addElementJs(data[0],data[1],data[2],data[3],data[4], true, data[5]);"
					reRender="tabFlowchart,errorTable,msnError" />

                <a4j:jsFunction name="loadSubWorkflowFromCanvas" data="#{canvasBean.positions}"
                    oncomplete="console.log('loadSubWorkflowFromCanvas'); addElementJs(data[0],data[1],data[2],data[3],data[4], true, data[5]);canvasArray[selectedCanvas].saved=false;"
                    reRender="tabFlowchart,errorTable,msnError" />
                    
                <a4j:jsFunction name="rebuildCanvas" data="#{canvasBean.positions}"
					oncomplete="console.log('rebuildCanvas'); addElementJs(data[0],data[1],data[2],data[3],data[4], true, data[5],true);"
					reRender="tabFlowchart,errorTable,msnError" />
                
                <a4j:jsFunction name="reOpenCanvas" data="#{canvasBean.buildLoadMapCanvasToOpen}" oncomplete="console.log('reOpenCanvas'); reOpenCanvasJS(data);" />
                
                <a4j:jsFunction name="reOpenCanvasLoadWorkflow" reRender="tabFlowchart,errorTable,msnError" />
                    
			</a4j:region>
			
			<a4j:region>
				<a4j:jsFunction name="openSubWorkflow" action="#{canvasBean.openSubWorkflow}" 
					oncomplete="console.log('openSubWorkflow'); if(#{requestScope['msnError'] == null} ){loadSubWorkflowFromCanvas();}" >
					<a4j:actionparam name="nameSubWorkflow" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="renameTab" data="#{canvasBean.positions}"
					oncomplete="console.log('renameTab'); closeCurrentTabWithoutCallingBackend();addElementJs(data[0],data[1],data[2],data[3],data[4], true, data[5]);onHideModalSaveWorkflow(true);jQuery.unblockUI();"
					reRender="tabFlowchart" />
			</a4j:region>

			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivcanvas-tabs') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />


				<a4j:jsFunction name="closeWorkflow"
					action="#{canvasBean.closeWorkflow}">
					<a4j:actionparam name="workflow" />
				</a4j:jsFunction>
			</a4j:region>
			
			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivcanvas-tabs') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="cleanElement" action="#{canvasBean.cleanElement}" 
					data="#{canvasBean.idGroup}" oncomplete="console.log('cleanElement'); updateOutputStatus(data)">
					<a4j:actionparam name="idGroup" />
				</a4j:jsFunction>
			</a4j:region>
			
			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivcanvas-tabs') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="refreshSubWorkflow" action="#{canvasBean.refreshSubWorkflow}" 
					data="#{canvasBean.idGroup}" oncomplete="console.log('refreshSubWorkflow'); updateOutputStatus(data)">
					<a4j:actionparam name="idGroup" />
				</a4j:jsFunction>
			</a4j:region>
			
			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />
				<a4j:jsFunction name="updateIdObj"
					action="#{canvasBean.updateIdObj}">
					<a4j:actionparam name="idGroup" />
					<a4j:actionparam name="id" />
				</a4j:jsFunction>
			</a4j:region>

			
			
			<a4j:region>
				<a4j:jsFunction name="reinitializeCanvas" data="#{canvasBean.reinitialize}" 
					oncomplete="console.log('reinitializeCanvas'); reinitializeCanvasScreen(data)" />
			</a4j:region>

			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="runWorkflow"
					action="#{canvasBean.runWorkflow}"
					oncomplete="console.log('runWorkflow', getSelectedByName()); setRunning(getSelectedByName(), true);blockRunningWorkflowJS();"
					reRender="msnError">
					<a4j:actionparam name="positions" />
					<a4j:actionparam name="savedFile" />
					<a4j:actionparam name="select" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivcanvas-tabs') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="backupAll" action="#{canvasBean.backupAll}"/>
				<a4j:jsFunction name="backupAndCloseAll" action="#{canvasBean.backupAndCloseAll}" 
					oncomplete="console.log('backupAndCloseAll'); closeAllWorkflowTabs();"/>
			</a4j:region>

			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="deleteElements"
					action="#{canvasBean.cloneWorkflow}" data="#{canvasBean.cloneWFId}"
					oncomplete="console.log('deleteElements'); tmpCommandObj.cloneId = data;deleteElementsJS(tmpCommandObj.selecteds, tmpCommandObj.selectedArrows)">
					<a4j:actionparam name="allpositions" />
				</a4j:jsFunction>

				<a4j:jsFunction name="replaceWFByClone"
					action="#{canvasBean.replaceWFByClone}" oncomplete="console.log('replaceWFByClone'); rebuildJS();"
					reRender="errorTable,tabFlowchart">
					<a4j:actionparam name="selectedItens" />
					<a4j:actionparam name="idCloneMap" />
					<a4j:actionparam name="keepClone" />
				</a4j:jsFunction>

				<a4j:jsFunction name="rebuildJS" data="#{canvasBean.positions}"
					oncomplete="console.log('rebuildJS'); setTimeout(function(){addSelectedElement(data[0],data[1],data[2],data[3],data[4])},900);updateAllArcsStatus();"
					reRender="tabFlowchart" />

			</a4j:region>

			<a4j:region>
				<a4j:jsFunction name="showReplaceAllModal" reRender="errorTable"
					oncomplete="console.log('showReplaceAllModal'); #{rich:component('modalReplaceAll')}.show()">
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="replaceAllJS"
					action="#{canvasBean.replaceAll}" reRender="errorTable"
					oncomplete="console.log('replaceAllJS'); updateSelectedElementLegend(tmpCommandObj.selecteds);updateAllArcsStatus();">
					<a4j:actionparam name="select" />
					<a4j:actionparam name="oldStr" />
					<a4j:actionparam name="newStr" />
					<a4j:actionparam name="changeLabel" />
				</a4j:jsFunction>

				<a4j:jsFunction name="rebuildElementsFromClone"
					action="#{canvasBean.replaceWFByClone}"
					oncomplete="console.log('rebuildElementsFromClone'); rebuildReplaceJS();" reRender="errorTable,tabFlowchart">
					<a4j:actionparam name="selectedItens" />
					<a4j:actionparam name="idCloneMap" />
					<a4j:actionparam name="keepClone" />
				</a4j:jsFunction>

				<a4j:jsFunction name="rebuildReplaceJS"
					data="#{canvasBean.positions}"
					oncomplete="console.log('rebuildReplaceJS'); updateSelectedElementLegend(tmpCommandObj.selecteds);updateSelectedOutputStatus(tmpCommandObj.selecteds);"
					reRender="tabFlowchart" />
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="updateSelectedElementLegend"
					data="#{canvasBean.selectedElementLegend}"
					oncomplete="console.log('updateSelectedElementLegend'); updateObjsNameReplace(data);"
					reRender="errorTable, msnError">
					<a4j:actionparam name="select" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="replaceJS"
					action="#{canvasBean.cloneWorkflow}" data="#{canvasBean.cloneWFId}"
					oncomplete="console.log('replaceJS'); tmpCommandObj.cloneId = data; replaceAllJS(tmpCommandObj.selecteds, tmpCommandObj.oldStr, tmpCommandObj.newStr, tmpCommandObj.changeLabel );">
					<a4j:actionparam name="allpositions" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="cloneBeforeUpdateElement"
					action="#{canvasBean.cloneWorkflow}" data="#{canvasBean.cloneWFId}"
					oncomplete="console.log('cloneBeforeUpdateElement'); cloneCommandUpdateElementBuffer = data;createOptionTitles();#{rich:component('canvasModalPanel')}.show();">
					<a4j:actionparam name="allpositions" />
				</a4j:jsFunction>

				<a4j:jsFunction name="cloneAfterUpdateElement"
					action="#{canvasBean.cloneWorkflow}" data="#{canvasBean.cloneWFId}"
					oncomplete="console.log('cloneAfterUpdateElement'); stackUpdateElement('#{canvasModalBean.idGroup}', cloneCommandUpdateElementBuffer,data);">
					<a4j:actionparam name="allpositions" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="removeCloneWorkflow"
					action="#{canvasBean.removeCloneWorkflow}">
					<a4j:actionparam name="idCloneMap" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="pasteCloneWorkflow"
					action="#{canvasBean.cloneWorkflow}" data="#{canvasBean.cloneWFId}"
					oncomplete="console.log('pasteCloneWorkflow'); tmpCommandObj.cloneId = data;">
					<a4j:actionparam name="allpositions" />
				</a4j:jsFunction>

				<a4j:jsFunction name="undoPasteCloneWorkflow"
					action="#{canvasBean.replaceWFByClone}"
					oncomplete="console.log('undoPasteCloneWorkflow'); rebuildPasteJS();" reRender="errorTable,tabFlowchart">
					<a4j:actionparam name="selectedItens" />
					<a4j:actionparam name="idCloneMap" />
					<a4j:actionparam name="keepClone" />
				</a4j:jsFunction>

				<a4j:jsFunction name="rebuildPasteJS" data="#{canvasBean.positions}"
					oncomplete="console.log('rebuildPasteJS'); addSelectedElement(data[0],data[1],data[2],data[3],data[4]);updateAllArcsStatus();"
					reRender="tabFlowchart" />

			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="pasteJS" action="#{canvasBean.paste}"
					data="#{canvasBean.idsToPaste}" reRender="msnError"
					oncomplete="console.log('pasteJS'); saveAllPositions(getAllIconPositions());rebuildJS(); tmpCommandObj.idsToPaste = data; pasteCloneWorkflow(getAllIconPositions());" />
			</a4j:region>

			<a4j:region>

				<a4j:commandLink id="openCanvasScreenHdfs"
					action="#{hdfsBean.openCanvasScreen}" style="display:none;"
					reRender="fileSysGridForm"
					onclick="jQuery('#tabs-4').block({ message: jQuery('#domMessageDiv4') });"
					oncomplete="console.log('openCanvasScreenHdfs'); jQuery('#tabs-4').unblock();resiziFileSystem();" />

				<a4j:commandLink id="openCanvasScreenHive"
					action="#{hiveBean.openCanvasScreen}" style="display:none;"
					reRender="fileSysGridFormHive"
					onclick="jQuery('#tabs-5').block({ message: jQuery('#domMessageDiv5') });"
					oncomplete="console.log('openCanvasScreenHive'); jQuery('#tabs-5').unblock();resiziFileSystem();" />

				<a4j:commandLink id="openCanvasScreenSsh"
					action="#{sshBean.openCanvasScreen}" style="display:none;"
					reRender="tabs-8, tabRemote, fileSysGridFormSsh, fileSysGridFormSshTab"
					onclick="jQuery('#tabs-8').block({ message: jQuery('#domMessageDiv8') });"
					oncomplete="console.log('openCanvasScreenSsh'); jQuery('#tabs-8').unblock();resiziRemoteFileSystem();" />

				<a4j:commandLink id="openCanvasScreenHdfsBrowser"
					action="#{browserHdfsBean.openCanvasScreen}" style="display:none;" />

			</a4j:region>

			<a4j:region>

				<table
					style="width: 100%; display: block; background: none repeat scroll 0 0 #FFFFFF;">

					<tr style="width: 100%; right: 0px; position: relative;">
						<td style=""><a class="stopLink" id="help_main"
							onclick="return false;" href="../help/main.html"> <h:graphicImage
									id="logoImg" width="150px" url="../image/logo.png" />
						</a></td>
						<td style="width: 100%; vertical-align: bottom;"><rich:toolBar>

								<rich:dropDownMenu itemClass="canvasMenu">

									<f:facet name="label">
										<h:panelGroup>
											<h:outputText value="#{messages.label_menu_file}" />
										</h:panelGroup>
									</f:facet>

									<rich:menuGroup value="#{messages.label_menu_new}">

										<rich:menuItem id="newMenuItem" submitMode="none"
											value="#{messages.label_menu_new_canvas}"
											onclick="jQuery('#addtabCanvas').click();">
											<h:outputText value="Ctrl+N" class="menuItemHotKey" />
										</rich:menuItem>
										<rich:menuItem id="newSubMenuItem" submitMode="none"
											value="#{messages.label_menu_new_subcanvas}"
											onclick="jQuery('#addsubtabCanvas').click();">
										</rich:menuItem>

									</rich:menuGroup>

									<rich:menuItem id="openMenuItem" submitMode="ajax"
										value="#{messages.label_menu_open}"
										onclick="openModalLoadWorkflow()" rerender="hdfsfsOpenFile">
										<h:outputText value="Ctrl+O" class="menuItemHotKey" />
									</rich:menuItem>
									<rich:menuSeparator />
									<rich:menuItem id="saveMenuItem" submitMode="ajax"
										value="#{messages.label_menu_save}" onclick="menuSave();">
										<h:outputText value="Ctrl+S" class="menuItemHotKey" />
									</rich:menuItem>
									<rich:menuItem id="saveAsMenuItem" submitMode="ajax"
										value="#{messages.label_menu_saveas}"
										onclick="openModalSaveWorkflow()">
										<h:outputText value="Ctrl+Alt+X" class="menuItemHotKey" />
									</rich:menuItem>
									<rich:menuItem id="saveAllMenuItem" submitMode="ajax"
										value="#{messages.label_menu_saveall}" onclick="saveAll();">
										<h:outputText value="Ctrl+Shift+S" class="menuItemHotKey" />
									</rich:menuItem>
									<rich:menuSeparator />
									<rich:menuItem id="closeMenuItem" submitMode="none"
										value="#{messages.label_menu_close}" onclick="menuCloseTab();">
										<h:outputText value="Ctrl+W" class="menuItemHotKey" />
									</rich:menuItem>
									<rich:menuItem id="closeAllMenuItem" submitMode="ajax"
										value="#{messages.label_menu_closeall}" onclick="closeAll();">
										<h:outputText value="Ctrl+Shift+W" class="menuItemHotKey" />
									</rich:menuItem>

								</rich:dropDownMenu>

								<rich:dropDownMenu itemClass="canvasMenu">

									<f:facet name="label">
										<h:panelGroup>
											<h:outputText value="#{messages.label_menu_edit}" />
										</h:panelGroup>
									</f:facet>
									<rich:menuItem id="selectAllMenuItem" submitMode="none"
										value="#{messages.label_menu_selectall}"
										onclick="selectAll(getSelectedByName());">
										<h:outputText value="Ctrl+A" class="menuItemHotKey" />
									</rich:menuItem>
									<rich:menuItem id="deselectAllMenuItem" submitMode="none"
										value="#{messages.label_menu_deselectall}"
										onclick="deselectAll(getSelectedByName());">
										<h:outputText value="Ctrl+Shift+A" class="menuItemHotKey" />
									</rich:menuItem>
									<rich:menuSeparator />
									<rich:menuItem id="copyMenuItem" submitMode="ajax"
										value="#{messages.label_menu_copy}"
										onclick="saveAllPositions(getAllIconPositions());copy(getSelectedIconsCommaDelimited());">
										<h:outputText value="Ctrl+Shift+C" class="menuItemHotKey"/>
									</rich:menuItem>
									<rich:menuItem id="pasteMenuItem" submitMode="ajax"
										value="#{messages.label_menu_paste}"
										onclick="paste(getSelectedByName());">
										<h:outputText value="Ctrl+Shift+V" class="menuItemHotKey"/>
									</rich:menuItem>
									<rich:menuSeparator />
									<rich:menuItem id="undoMenuItem" submitMode="ajax"
										value="#{messages.label_menu_undo}" onclick="undo();">
										<h:outputText value="Ctrl+Shift+Z" class="menuItemHotKey"/>
									</rich:menuItem>
									<rich:menuItem id="redoMenuItem" submitMode="ajax"
										value="#{messages.label_menu_redo}" onclick="redo();">
										<h:outputText value="Ctrl+Shift+Y" class="menuItemHotKey"/>
									</rich:menuItem>
									<rich:menuSeparator />
									<rich:menuItem id="replaceMenuItem" submitMode="ajax"
										value="#{messages.label_menu_replace}"
										onclick="showReplaceAllModal();">
										<h:outputText value="Ctrl+H" class="menuItemHotKey" />
									</rich:menuItem>
									<rich:menuItem id="aggregateMenuItem" submitMode="ajax"
										value="#{messages.label_menu_aggregate}"
										onclick="checkOpenModalAggregate()">
										<h:outputText value="Ctrl+Alt+A" class="menuItemHotKey" />
									</rich:menuItem>
									<rich:menuItem id="expandMenuItem" submitMode="ajax"
										value="#{messages.label_menu_expand}"
										onclick="checkExpand();">
										<h:outputText value="Ctrl+Shift+R" class="menuItemHotKey" />
									</rich:menuItem>
									<rich:menuSeparator />
									<rich:menuItem submitMode="none"
										value="#{messages.label_menu_delete}"
										onclick="deleteSelected(getSelectedByName());">
										<h:outputText value="Del" class="menuItemHotKey" />
									</rich:menuItem>

								</rich:dropDownMenu>

								<rich:dropDownMenu itemClass="canvasMenu">

									<f:facet name="label">
										<h:panelGroup>
											<h:outputText value="#{messages.label_menu_project}" />
										</h:panelGroup>
									</f:facet>

									<rich:menuItem id="oozieMenuItem" submitMode="none">
										<h:outputLink value="#{canvasBean.workflowUrl}"
											style="font-size:13px;" target="_blank">#{messages.label_menu_see_oozie_job}</h:outputLink>
									</rich:menuItem>

									<rich:menuSeparator />

									<rich:menuItem id="runMenuItem" submitMode="ajax"
										value="#{messages.label_menu_runitems}"
										onclick="var sels=getSelectedIconsCommaDelimited();if(sels.length > 0){runWorkflow(getIconPositions(),getPathFile(getSelectedByName()),sels)}else{alert('#{messages.run_nothing_selected}')}"
										reRender="formMenu"
										disabled="#{canvasBean.workflowType == 'S'}">
										<h:outputText value="Ctrl+Alt+E" class="menuItemHotKey" />
									</rich:menuItem>

									<rich:menuItem id="runSelectedMenuItem" submitMode="ajax"
										value="#{messages.label_menu_runproject}"
										onclick="runWorkflow(getIconPositions(),getPathFile(getSelectedByName()))"
										reRender="formMenu"
										disabled="#{canvasBean.workflowType == 'S'}">
										<h:outputText value="Ctrl+E" class="menuItemHotKey" />
									</rich:menuItem>

									<rich:menuSeparator />

									<rich:menuItem id="wfeditorMenuItem" submitMode="ajax"
										value="#{messages.label_menu_editorWfcomment}"
										oncomplete="#{rich:component('modalWfEditor')}.show()"
										reRender="wfEditor">
									</rich:menuItem>

									<rich:menuSeparator />

									<rich:menuItem id="cleanMenuItem" submitMode="ajax"
										value="#{messages.label_menu_clean_project}"
										action="#{canvasBean.cleanCanvasProject}"
										oncomplete="updateAllArcsStatus();"
										disabled="#{canvasBean.workflowType == 'S'}">
										<h:outputText value="Ctrl+L" class="menuItemHotKey" />
									</rich:menuItem>

									<rich:menuGroup value="#{messages.label_menu_generate}"
										disabled="#{canvasBean.workflowType == 'S'}">
										<rich:menuItem submitMode="ajax"
											value="#{messages.label_menu_regenerate_project}"
											onclick="regeneratePathsProject()" />

										<rich:menuItem submitMode="ajax"
											value="#{messages.label_menu_regeneratemove_project}"
											onclick="regeneratePathsProjectMove()" />

										<rich:menuItem submitMode="ajax"
											value="#{messages.label_menu_regeneratecopy_project}"
											onclick="regeneratePathsProjectCopy()" />

									</rich:menuGroup>

								</rich:dropDownMenu>

								<rich:dropDownMenu itemClass="canvasMenu">

									<f:facet name="label">
										<h:panelGroup>
											<h:outputText value="#{messages.label_menu_software}" />
										</h:panelGroup>
									</f:facet>
									<rich:menuGroup value="#{messages.label_menu_subworkflow}">
										<rich:menuItem id="installSubWorkflow" submitMode="ajax"
											value="#{messages.label_menu_install_sub_workflow}"
											disabled="#{canvasBean.workflowType == 'W'}"
											onclick="#{rich:component('modalSubWfInstall')}.show();"
											action="#{subwfBean.mountSubName}">
											<f:param name="subWorkflowName"
												value="#{canvasBean.nameWorkflow}" />
										</rich:menuItem>
										<rich:menuItem id="uninstallSubWorkflow" submitMode="ajax"
											value="#{messages.label_menu_manage_sub_workflow}"
											oncomplete="#{rich:component('modalSubWfUninstall')}.show();"
											action="#{subwfBean.refreshSubworkflowsAllList}">
										</rich:menuItem>
										<rich:menuItem id="importSubWorkflowHDFS" submitMode="ajax"
											value="#{messages.label_menu_import_sub_workflowfrom_hdfs}"
											oncomplete="mountComboboxTypes();#{rich:component('modalSubWfimport')}.show();">
										</rich:menuItem>
										<rich:menuItem id="exportSubWorkflowHDFS" submitMode="ajax"
											value="#{messages.label_menu_export_sub_workflowto_hdfs}"
											disabled="#{canvasBean.workflowType == 'W'}"
											oncomplete="#{rich:component('modalSubWfexport')}.show();"
											action="#{subwfBean.mountSubName}">
											<f:param name="subWorkflowName"
												value="#{canvasBean.nameWorkflow}" />
										</rich:menuItem>
									</rich:menuGroup>
									<rich:menuItem id="installationMenuItem" submitMode="ajax"
										value="#{messages.label_menu_package}"
										onclick="openPackageModal();">
										<h:outputText value="Ctrl+I" class="menuItemHotKey" />
									</rich:menuItem>

									<rich:menuItem id="settingsMenuItem" submitMode="ajax"
										value="#{messages.label_setting_modal}" action="#{settingsBean.defaultSettings}"
										oncomplete="#{rich:component('modalSettings')}.show();">
										<h:outputText value="Ctrl+Alt+P" class="menuItemHotKey" />
									</rich:menuItem>
									<!-- <rich:menuSeparator />
									<rich:menuItem id="aboutMenuItem" submitMode="ajax"
										value="#{messages.label_menu_about}" disable="true">
										<h:outputText value="Ctrl+Alt+P" class="menuItemHotKey" />
									</rich:menuItem> -->

								</rich:dropDownMenu>


								<rich:toolBarGroup location="right">

									<a4j:commandButton value="#{messages.label_menu_signout}"
										styleClass="signoutButton"
										onclick="saveAllPositions(getAllIconPositions());jQuery.blockUI({ message: jQuery('#domMessageDivCanvas1') });signOut();"
										ajax="true" />


									<!-- Restart does not work
							<rich:dropDownMenu value="#{messages.label_menu_signout}">
		
								<f:facet name="label">
									<h:panelGroup styleClass="signoutButton">
                                        <h:outputText value="#{messages.label_menu_signout}" />
                                    </h:panelGroup>
								</f:facet>
		
								<rich:menuItem submitMode="ajax"
									value="#{messages.label_menu_signout}"
									onclick="saveAllPositions(getAllIconPositions());jQuery.blockUI({ message: jQuery('#domMessageDivCanvas1') });signOut();" />
	
								<rich:menuItem submitMode="ajax"
									value="#{messages.label_menu_restart}"
									onclick="jQuery.blockUI({ message: jQuery('#domMessageDivCanvas1') });reStart();" />
		
							</rich:dropDownMenu>
							-->
								</rich:toolBarGroup>

							</rich:toolBar>
							</td>
					</tr>
				</table>


			</a4j:region>

			<a4j:jsFunction name="signOut" action="#{userInfoBean.goToSignOut}"	oncomplete="jQuery.unblockUI();" />
			<a4j:jsFunction name="reStart" action="#{userInfoBean.goToSignOut}"	oncomplete="jQuery.unblockUI();" />

		</h:form>
	</div>

	<div id="mainPanelDiv">


		<div id="splitVCanvas">

			<div id="tabFlowchart">
				<ul class="ulCss" id="ulTabFlowchart"
					style="width: 100%; min-width: 600px;">

					<li class="locked">
						<a href="#tabFlowchart-1" id="idtabFlowchart-1"	onclick="jQuery('#helpmain_canvas').click();return false;">
							<h:outputText value="#{messages.label_tab_flowchart}" />
						</a>
					</li>
					<li class="locked"><a href="#tabs-8" id="idtabs-8"
						onclick="jQuery('#helpmain_ssh').click();return false;"> <h:outputText
								value="#{messages.label_tab_remotefilesystem}" />
					</a></li>
					<button id="changeTabCanvas" style="border: hidden;">&#9660;</button>

					<div class="divMenuImage">
					
						<span style="cursor: pointer;">
							<img src="../image/icons/button-aggregate.gif" alt="aggregate" class="shortMenuIcon" 
								onclick="checkOpenModalAggregate()" title="#{messages.label_menu_aggregate}" />
						</span>
					
						<span style="cursor: pointer;"> <img
							src="../image/icons/button-open.gif" alt="open"
							class="shortMenuIcon" onclick="openModalLoadWorkflow()"
							title="#{messages.label_menu_open}" />
						</span> <span style="cursor: pointer;"> <img
							src="../image/icons/button-save.gif" alt="save"
							class="shortMenuIcon" onclick="menuSave()"
							title="#{messages.label_menu_save}" />
						</span> <span style="cursor: pointer;"> <img
							src="../image/icons/button-save_as.gif" alt="saveas"
							class="shortMenuIcon" onclick="openModalSaveWorkflow();"
							title="#{messages.label_menu_saveas}" />
						</span> <span style="cursor: pointer;"> <img
							src="../image/icons/button-save_all.gif" alt="saveall"
							class="shortMenuIcon" onclick="saveAll();"
							title="#{messages.label_menu_saveall}" />
						</span> <span style="cursor: pointer;"> <img
							src="../image/icons/button-copy.gif" alt="copy"
							class="shortMenuIcon"
							onclick="saveAllPositions(getAllIconPositions());copy(getSelectedIconsCommaDelimited());"
							title="#{messages.label_menu_copy}" />
						</span> <span style="cursor: pointer;"> <img
							src="../image/icons/button-paste.gif" alt="paste"
							class="shortMenuIcon" onclick="paste(getSelectedByName());"
							title="#{messages.label_menu_paste}" />
						</span> <span style="cursor: pointer;"> <img
							src="../image/icons/button-undo.gif" id="buttonundo"
							alt="#{messages.label_menu_undo}" class="shortMenuIcon"
							onclick="undo();" title="#{messages.label_menu_undo}" />
						</span> <span style="cursor: pointer;"> <img
							src="../image/icons/button-redo.gif" id="buttonredo"
							alt="#{messages.label_menu_redo}" class="shortMenuIcon"
							onclick="redo();" title="#{messages.label_menu_redo}" />
						</span>
					</div>

				</ul>
				<div id="tabFlowchart-1">

					<div id="canvas-tabs">
						<ul class="ulCssCanvas removeDefaults topBanner"
							style="width: 100%;">
							<li class="locked canvasTabsInactive">
								<a href="#flowchart-canvas-1" class="canvasTab"
									onclick="setWorkflow('canvas-1');">
									<img src="../image/workflow_tab.gif" style="width:15px;padding-right:5px;position:relative;top:3px;"/>
									<span id="canvasNameStar-canvas-1">canvas-1</span>
								</a>
								<span id="canvas-1-icon-close" class="ui-icon ui-icon-close "
									role="presentation" onclick="closeWorkflowTab(this,'canvas-1')">
								</span>
							</li>
							<img src="../image/icons/button-new_canvas.gif" alt="add" style="width: 25px; padding-top: 2px;" id="addtabCanvas" />
							<img src="../image/icons/button-new_canvas.gif" alt="add" style="display: none" id="addsubtabCanvas" />
						</ul>

						<span id="buttonsCanvas1" class="spanButtons">
							<button class="buttonsArrowsLeft">
								<img src="../image/icons/button-left_arrow.gif" style="width: 30px;" />
							</button>
							<button class="buttonsArrowsRight">
								<img src="../image/icons/button-right_arrow.gif" style="width: 30px;" />
							</button>
						</span>

						<div id="flowchart-canvas-1" class="container-canvas">

							<div id="container-canvas-1" class="container-canvas-1">
								<div class="rich-panel headerLegend"
									onclick="jQuery('#panelLegend-canvas-1').toggle();jQuery('#container-comment-canvas-1').hide();return false;"
									style="position: fixed; z-index: 101; width: 60px">
									<div class="rich-panel-header">Legend</div>
								</div>
								<div class="rich-panel" id="panelLegend-canvas-1"
									style="position:fixed; z-index:100; display:none; width:190px; overflow:auto;">
									<div class="rich-panel-body" style="overflow: auto;">
										<div id="container-legend-canvas-1"	class="container-legend-canvas-1"
											style="overflow:auto; position:relative; top:20px;" />
									</div>
								</div>
								<div class="rich-panel headerComment"
									onclick="jQuery('#container-comment-canvas-1').toggle();jQuery('#panelLegend-canvas-1').hide();return false;"
									style="left: 82px; position: fixed; z-index: 101; width: 60px">
									<div class="rich-panel-header">Comment</div>
								</div>
								<div id="container-comment-canvas-1"
									class="rich-panel container-comment-canvas-1"
									style="overflow: auto; position: fixed; z-index: 100; display: none; width: 330px; height: 400px; resize: both;">
								</div>
							</div>

						</div>
						<h:panelGroup id="tabsFooterForm">
							<div id="tabsFooter">
								<ul class="canvasFooter" style="width: 100%; min-width: 400px;">

									<ui:repeat value="#{configureTabsBean.tabs}" var="tab"
										varStatus="status">
										<li class="locked footerTab"><a href="#tabFooter-#{tab}">#{tab}</a></li>
									</ui:repeat>

									<h:form>

										<a4j:region>
											<a4j:commandButton image="../image/icons/button-property.gif"
												title="#{messages.label_property_button}"
												action="#{configureTabsBean.openConfigureTabsBean}"
												oncomplete="#{rich:component('modalConfigureFooterTabs')}.show();document.getElementById('helpmain_actfooter').click();"
												style="border: hidden;width:35px;vertical-align:middle;"
												styleClass="configureFooterButton" 
												reRender="tabsMenu" />
										</a4j:region>

									</h:form>

								</ul>

								<span id="buttonsTabsFooter" class="spanButtons">
									<button class="buttonsArrowsLeft">
										<img src="../image/icons/button-left_arrow.gif"
											style="width: 30px;" />
									</button>
									<button class="buttonsArrowsRight">
										<img src="../image/icons/button-right_arrow.gif"
											style="width: 30px;" />
									</button>
								</span>

								<ui:repeat value="#{configureTabsBean.tabsMapList}" var="tab">
									<div id="tabFooter-#{tab.key}" style="overflow-y: hidden;">
										<ui:repeat value="#{tab.value}" var="action">
											<span id="spanImagensObj" style="display: none"> <img
												src="#{action[1]}" class="footerIcon" /> <span>#{action[0]}</span>
												<span>#{action[2]}</span>
											</span>
										</ui:repeat>
									</div>
								</ui:repeat>
							</div>
						</h:panelGroup>

					</div>

				</div>

				<div id="tabs-8">
					<a4j:region>

						<a4j:status
							onstart="jQuery('#tabs-8').block({ message: jQuery('#domMessageDiv8') });"
							onerror="jQuery('#tabs-8').unblock();"
							onsuccess="jQuery('#tabs-8').unblock();"
							onstop="jQuery('#tabs-8').unblock();" />

						<div id="domMessageDiv8" style="display: none;">
							<img src="../image/icons/waiting.gif" />
						</div>

						<h:panelGroup>
							<ui:include src="/pages/ssh/sshfileSystemGrid.xhtml" />
						</h:panelGroup>
					</a4j:region>
				</div>
			</div>


			<div id="splitHCanvas">
				<div id="tabs1">
					<ul class="ulCss" id="ulTabs1">

						<li><a href="#tabs-1"
							onclick="jQuery('#helpmain_help').click();return false;"> <h:outputText
									value="#{messages.label_tab_help}" />
						</a></li>
						<li><a href="#tabs-2"
							onclick="jQuery('#helpmain_procman').click();return false;">
								<h:outputText value="#{messages.label_tab_processmanager}" />
						</a></li>
						<li><a href="#tabs-3"
							onclick="jQuery('#helpmain_error').click();return false;"> <h:outputText
									value="#{messages.label_tab_error}" />
						</a></li>

						<button id="changeTabTabs1" style="border: hidden;">&#9660;</button>

					</ul>

					<span id="buttonsTabs1" class="spanButtons">
						<button class="buttonsArrowsLeft">
							<h:graphicImage width="30px"
								value="../image/icons/button-left_arrow.gif" />
						</button>
						<button class="buttonsArrowsRight">
							<h:graphicImage width="30px"
								value="../image/icons/button-right_arrow.gif" />
						</button>
					</span>

					<div id="tabs-1" class="tabBorder">
						<a4j:region>

							<a4j:status
								onstart="jQuery('#tabs-1').block({ message: jQuery('#domMessageDiv1') });"
								onerror="jQuery('#tabs-1').unblock();"
								onsuccess="jQuery('#tabs-1').unblock();"
								onstop="jQuery('#tabs-1').unblock();" />

							<div id="domMessageDiv1" style="display: none;">
								<img src="../image/icons/waiting.gif" />
							</div>

							<h:panelGroup>
								<ui:include src="/pages/help.xhtml" />
							</h:panelGroup>
						</a4j:region>
					</div>
					<div id="tabs-2" class="tabBorder" style="overflow: hidden;">
						<a4j:region>

							<a4j:status
								onstart="jQuery('#tabs-2').block({ message: jQuery('#domMessageDiv2') });"
								onerror="jQuery('#tabs-2').unblock();"
								onsuccess="jQuery('#tabs-2').unblock();"
								onstop="jQuery('#tabs-2').unblock();" />

							<div id="domMessageDiv2" style="display: none;">
								<img src="../image/icons/waiting.gif" />
							</div>

							<h:panelGroup>
								<ui:include src="/pages/processManager.xhtml" />
							</h:panelGroup>
						</a4j:region>
					</div>
					<div id="tabs-3" class="tabBorder" style="overflow: hidden;">

						<h:panelGroup>
							<ui:include src="/pages/errorCanvas.xhtml" />
						</h:panelGroup>

					</div>
				</div>


				<div id="tabs2">
					<ul class="ulCss" id="ulTabs2">
						<li><a href="#tabs-4"
							onclick="jQuery('#helpmain_hdfs').click();return false;"> <h:outputText
									value="#{messages.label_tab_hadoopfilesystem}" />
						</a></li>
						<li><a href="#tabs-5"
							onclick="jQuery('#helpmain_hive').click();return false;"> <h:outputText
									value="#{messages.label_tab_hiveview}" />
						</a></li>


						<button id="changeTabTabs2" style="border: hidden;">&#9660;</button>

					</ul>

					<span id="buttonsTabs2" class="spanButtons">
						<button class="buttonsArrowsLeft">
							<h:graphicImage width="30px"
								value="../image/icons/button-left_arrow.gif" />
						</button>
						<button class="buttonsArrowsRight">
							<h:graphicImage width="30px"
								value="../image/icons/button-right_arrow.gif" />
						</button>
					</span>

					<div id="tabs-4" class="tabBorder" style="overflow: hidden;">
						<a4j:region>

							<a4j:status
								onstart="jQuery('#tabs-4').block({ message: jQuery('#domMessageDiv4') });"
								onerror="jQuery('#tabs-4').unblock();"
								onsuccess="jQuery('#tabs-4').unblock();"
								onstop="jQuery('#tabs-4').unblock();" />

							<div id="domMessageDiv4" style="display: none;">
								<img src="../image/icons/waiting.gif" />
							</div>

							<h:panelGroup>
								<ui:include src="/pages/hdfs/hdfsfileSystemGrid.xhtml" />
							</h:panelGroup>
						</a4j:region>
					</div>
					<div id="tabs-5" class="tabBorder" style="overflow: hidden;">
						<a4j:region>

							<a4j:status
								onstart="jQuery('#tabs-5').block({ message: jQuery('#domMessageDiv5') });"
								onerror="jQuery('#tabs-5').unblock();"
								onsuccess="jQuery('#tabs-5').unblock();" />

							<div id="domMessageDiv5" style="display: none;">
								<img src="../image/icons/waiting.gif" />
							</div>

							<h:panelGroup>
								<ui:include src="/pages/hive/hivefileSystemGrid.xhtml" />
							</h:panelGroup>
						</a4j:region>
					</div>

				</div>

			</div>
		</div>
	</div>

	<a4j:region>
		<rich:modalPanel id="canvasModalPanel" width="800" height="600"
			style="overflow:hidden;" resizeable="false" styleClass="noMaskClass">

			<f:facet name="header">
				<h:outputText value="#{canvasModalBean.canvasTitle}" id="pageTitle" />
			</f:facet>

			<h:panelGroup>
				<a4j:include viewId="/pages/canvasModal.xhtml" ajaxRendered="false" />
			</h:panelGroup>

		</rich:modalPanel>
	</a4j:region>

	<a4j:region>
		<rich:modalPanel id="modalConfigureFooterTabs" width="450" height="400"
			 style="overflow:none;" resizeable="false" styleClass="noMaskClass">

			<f:facet name="header">Configuration</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalConfigureFooterTabs')}.hide();" />
			</f:facet>

			<h:panelGroup style="width:100%">
				<a4j:include viewId="/pages/configureFooterTabs.xhtml" ajaxRendered="false" />
			</h:panelGroup>

		</rich:modalPanel>
	</a4j:region>

	<a4j:region>
		<rich:modalPanel id="modalFileHdfs" width="620" height="430"
			style="overflow:hide;" resizeable="false">

			<f:facet name="header">Hadoop Distributed File System Browser</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalFileHdfs')}.hide()" />
			</f:facet>

			<h:form>
				<h:panelGroup>
					<a4j:include viewId="/pages/modalFileHdfs.xhtml" ajaxRendered="true" />
				</h:panelGroup>
			</h:form>

		</rich:modalPanel>
	</a4j:region>


	<a4j:region renderRegionOnly="true">
		<rich:modalPanel id="modalSelectLink" width="300" height="200"
			style="overflow:auto;" resizeable="false">

			<f:facet name="header">Create Link</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalSelectLink')}.hide()" />
			</f:facet>

			<h:form id="formSelectLink">
				<h:panelGroup>
					<a4j:include viewId="/pages/selectLink.xhtml" ajaxRendered="true" />
				</h:panelGroup>
			</h:form>

		</rich:modalPanel>
	</a4j:region>

	<a4j:region>
		<rich:modalPanel id="modalChangeId" width="300" height="235"
			style="overflow:auto;" resizeable="false" >

			<f:facet name="header">Change Element Id</f:facet>

			<h:form>
				<h:panelGroup>
					<a4j:include viewId="/pages/modalChangeId.xhtml" ajaxRendered="true" />
				</h:panelGroup>
			</h:form>

		</rich:modalPanel>
	</a4j:region>

	<a4j:region>
		<rich:modalPanel id="modalWfEditor" width="800" height="600"
			domElementAttachment="parent" style="overflow:auto;"
			resizeable="true" zindex="2000">

			<f:facet name="header">Workflow Editor</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalWfEditor')}.hide()" />
			</f:facet>

			<h:form>
				<rich:panel>
					<rich:editor id="wfEditor" value="#{canvasBean.commentWf}"
						theme="advanced" width="765" height="500">
						<f:param name="theme_advanced_toolbar_location" value="top" />
					</rich:editor>

					<rich:panel style="margin-top:8px; border:none; float:right;">

						<a4j:commandButton styleClass="greenButton"
							value="#{messages.button_cancel}"
							oncomplete="#{rich:component('modalWfEditor')}.hide()" />
						<a4j:commandButton value="#{messages.button_save}"
							onclick="#{rich:component('modalWfEditor')}.hide();"
							styleClass="greenButton"
							oncomplete="execChangeCommentWfCommand('#{canvasBean.savedWfComment}', '#{canvasBean.commentWf}');" />

					</rich:panel>
				</rich:panel>
			</h:form>

		</rich:modalPanel>
	</a4j:region>

	<a4j:region>
		<rich:modalPanel id="modalReplaceAll" width="425" height="220"
			style="overflow:auto;" resizeable="true" zindex="2000">

			<f:facet name="header">Replace All</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalReplaceAll')}.hide()" />
			</f:facet>

			<h:form>
				<h:outputText value="#{messages.label_string_to_replace}" />
				<br />
				<h:inputText value="#{canvasBean.rpModal.string}" size="50" />
				<br />
				<br />
				<h:outputText value="#{messages.label_replace_value}" />
				<br />
				<h:inputText value="#{canvasBean.rpModal.replace}" size="50" />
				<br />
				<br />
				<h:outputText value="#{messages.label_replace_action_names}" />
				<br />
				<h:selectBooleanCheckbox
					value="#{canvasBean.rpModal.replaceActionNames}">
					<f:selectItem itemValue="true" />
				</h:selectBooleanCheckbox>
				<br />

				<rich:panel style="border:none; float:right;">

					<a4j:commandButton styleClass="greenButton"
						value="#{messages.button_cancel}"
						oncomplete="#{rich:component('modalReplaceAll')}.hide()" />
					<a4j:commandButton value="#{messages.button_ok}"
						onclick="#{rich:component('modalReplaceAll')}.hide();"
						styleClass="greenButton"
						oncomplete="replaceAll(getSelectedByName(),getSelectedIconsCommaDelimited(),'#{canvasBean.rpModal.string}','#{canvasBean.rpModal.replace}','#{canvasBean.rpModal.replaceActionNames}');" />

				</rich:panel>


			</h:form>

		</rich:modalPanel>
	</a4j:region>

	<a4j:region>
		<rich:modalPanel id="modalPackage" width="820" height="600"
			style="overflow:auto;" resizeable="false">

			<f:facet name="header">
				<h:outputText value="#{messages.label_packages}" />
			</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalPackage')}.hide();" />
			</f:facet>

			<h:panelGroup>
				<a4j:include viewId="/pages/modalPackage.xhtml" ajaxRendered="true" />
			</h:panelGroup>

		</rich:modalPanel>
	</a4j:region>
	
	<a4j:region>
		<rich:modalPanel id="modalPackageSettings" width="820" height="600"
			style="overflow:none;" resizeable="false">

			<f:facet name="header">
				<h:outputText value="#{messages.label_packages}" />
			</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalPackageSettings')}.hide();" />
			</f:facet>

			<h:panelGroup>
				<a4j:include viewId="/pages/packageSettings.xhtml" ajaxRendered="true" />
			</h:panelGroup>

		</rich:modalPanel>
	</a4j:region>

	<a4j:region>
		<rich:modalPanel id="modalInstallPackage" width="900" height="600"
			resizeable="true">
			<f:facet name="header">
				<h:panelGroup>
					<h:outputText value='#{messages.label_packages}' id="installPackagesMsg" />
					<h:outputText value='#{messages.label_model}' id="installModelMsg" />
				</h:panelGroup>
			</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalInstallPackage')}.hide();#{rich:component('modalPackage')}.hide();#{rich:component('modalSubWfUninstall')}.hide();refreshRelativeHelp();" />
			</f:facet>
			<h:panelGroup>
				<a4j:include viewId="/pages/modalInstallPackage.xhtml" ajaxRendered="true" />
			</h:panelGroup>
		</rich:modalPanel>
	</a4j:region>

	<a4j:region renderRegionOnly="true">
		<rich:modalPanel id="modalSettings" width="800" height="600"
			style="overflow:auto;" resizeable="false">

			<f:facet name="header">
				<h:outputText value="#{messages.label_setting_modal}" />
			</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalSettings')}.hide()" />
			</f:facet>

			<h:panelGroup>
				<a4j:include viewId="/pages/modalSettings.xhtml" ajaxRendered="true" />
			</h:panelGroup>

		</rich:modalPanel>
	</a4j:region>
	<a4j:region>
		<rich:modalPanel id="modalSubWfInstall" width="300" height="300"
			style="overflow:auto;" resizeable="false">

			<f:facet name="header">
				<h:outputText value="#{messages.label_menu_install_sub_workflow}" />
			</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalSubWfInstall')}.hide()" />
			</f:facet>

			<h:panelGroup>
				<a4j:include viewId="/pages/subWF/modalSubWFInstall.xhtml"
					ajaxRendered="true" />
			</h:panelGroup>

		</rich:modalPanel>
	</a4j:region>
	<a4j:region>
		<rich:modalPanel id="modalSubWfUninstall" width="600" height="490"
			style="overflow:auto;" resizeable="false">

			<f:facet name="header">
				<h:outputText value="#{messages.label_menu_manage_sub_workflow}" />
			</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalSubWfUninstall')}.hide()" />
			</f:facet>

			<h:panelGroup>
				<a4j:include viewId="/pages/subWF/modalSubWFUninstall.xhtml"
					ajaxRendered="true" />
			</h:panelGroup>

		</rich:modalPanel>
	</a4j:region>
	<a4j:region>
		<rich:modalPanel id="modalSubWfexport" width="300" height="300"
			style="overflow:auto;" resizeable="false">

			<f:facet name="header">
				<h:outputText value="#{messages.label_menu_export_sub_workflow}" />
			</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalSubWfexport')}.hide()" />
			</f:facet>

			<h:panelGroup>
				<a4j:include viewId="/pages/subWF/modalSubWFexport.xhtml"
					ajaxRendered="true" />
			</h:panelGroup>

		</rich:modalPanel>
	</a4j:region>
	<a4j:region>
		<rich:modalPanel id="modalSubWfimport" width="650" height="450"
			style="overflow:auto;" resizeable="false">

			<f:facet name="header">
				<h:outputText value="#{messages.label_menu_import_sub_workflow}" />
			</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalSubWfimport')}.hide()" />
			</f:facet>
			<h:form>
				<h:panelGroup>
					<a4j:include viewId="/pages/subWF/modalSubWFImport.xhtml" ajaxRendered="true" />
				</h:panelGroup>
			</h:form>

		</rich:modalPanel>
	</a4j:region>
	<a4j:region>
		<rich:modalPanel id="modalAggregate" width="450" height="440" style="overflow:auto;" resizeable="false">

			<f:facet name="header">
				<h:outputText value="#{messages.label_menu_aggregate}" />
			</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif" style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalAggregate')}.hide()" />
			</f:facet>
			<h:form>
				<h:panelGroup>
					<a4j:include viewId="/pages/modalAggregate.xhtml" ajaxRendered="true" />
				</h:panelGroup>
			</h:form>

		</rich:modalPanel>
	</a4j:region>
	
	<a4j:region>
		<rich:modalPanel id="hdfseditModalPanel" width="600" height="500"
			style="overflow:auto;" resizeable="false">

			<f:facet name="header">
				<h:outputText value='#{messages.hdfsinterface_edit_file}' />
			</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('hdfseditModalPanel')}.hide()" />
			</f:facet>

			<h:form id="hdfsform5">
				<h:panelGrid>
					<a4j:include viewId="/pages/hdfs/editHdfs.xhtml" ajaxRendered="true" />
				</h:panelGrid>
			</h:form>

		</rich:modalPanel>
	</a4j:region>
	
	<a4j:region>
		<rich:modalPanel id="ssheditModalPanel" width="600" height="500"
			style="overflow:auto;" resizeable="false">

			<f:facet name="header">
				<h:outputText value='#{messages.hdfsinterface_edit_file}' />
			</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('ssheditModalPanel')}.hide()" />
			</f:facet>

			<h:form id="sshform5">
				<h:panelGrid>
					<a4j:include viewId="/pages/ssh/editSsh.xhtml" ajaxRendered="true" />
				</h:panelGrid>
			</h:form>

		</rich:modalPanel>
	</a4j:region>
	
	<rich:modalPanel id="msnErrorPage"
		showWhenRendered="#{requestScope['msnErrorPage'] != null}">
		<div style="width: 100%; height: 100%; overflow: auto;">
			<rich:messages id="msgPage" globalOnly="false" layout="list"
				styleClass="message" infoClass="messageok" errorClass="messageerro"
				warnClass="messagealert" showDetail="true" showSummary="false"
				ajaxRendered="false" />

			<a4j:commandButton styleClass="greenButton"
				value="#{messages.button_ok}"
				onclick="#{rich:component('msnErrorPage')}.hide(); return false;"
				style="bottom:14%;position:relative;"
				reRender="msnErrorPage, msgPage, errorTable" />

		</div>

	</rich:modalPanel>

	<rich:modalPanel id="msnError"
		showWhenRendered="#{requestScope['msnError'] != null}">
		<div style="width: 100%; height: 100%; overflow: auto; z-index: 1000; position: relative;">
			<rich:messages id="msg" globalOnly="false" layout="list"
				styleClass="message" infoClass="messageok" errorClass="messageerro"
				warnClass="messagealert" showDetail="true" showSummary="false"
				ajaxRendered="false" />

			<a4j:commandButton styleClass="greenButton"
				value="#{messages.button_ok}"
				onclick="#{rich:component('msnError')}.hide(); return false;"
				style="bottom:14%;position:relative;"
				reRender="msnError, msg, errorTable" />

		</div>
	</rich:modalPanel>
	
	<a4j:region>
		<rich:modalPanel id="msnErrorInit" showWhenRendered="#{sessionScope['msnErrorInit'] != null}">
			<div style="width: 100%; height: 100%; overflow: auto;">
				<h:form>
					<dl class="message">
					<dt class="messageerro" style="padding-left:40px;">
						<h:outputText value="#{sessionScope['msnErrorInit']}" escape="false" />
					</dt>
					</dl>
					<center>
					<a4j:commandButton styleClass="greenButton"
						value="#{messages.button_ok}"
						onclick="#{rich:component('msnErrorInit')}.hide(); return false;"
						style="bottom:14%;position:relative;"
						reRender="msnError, msg, errorTable"
						action="#{canvasBean.removeMsgErrorInit}" />
					</center>
				</h:form>
			</div>
		</rich:modalPanel>
	</a4j:region>

	<rich:modalPanel id="msnSuccess"
		showWhenRendered="#{requestScope['msnSuccess'] != null}">
		<div style="width: 100%; height: 100%; overflow: auto;">
			<rich:messages id="msgS" globalOnly="false" layout="list"
				styleClass="message" infoClass="messageok" errorClass="messageerro"
				warnClass="messagealert" showDetail="true" showSummary="false"
				ajaxRendered="false" />
			<a4j:commandButton styleClass="greenButton"
				value="#{messages.button_ok}"
				onclick="#{rich:component('msnSuccess')}.hide(); return false;"
				style="bottom:14%;position:relative;" reRender="msnSuccess, msgS" />
		</div>
	</rich:modalPanel>

</body>
</html>
