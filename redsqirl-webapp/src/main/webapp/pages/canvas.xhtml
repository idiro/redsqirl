<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j">

<a4j:loadBundle basename="MessagesResources" var="messages" />

<head>
<link rel="icon" type="image/gif" href="../image/logo_redsqirl_favicon.gif" />
<link rel="stylesheet" type="text/css" href="#{facesContext.externalContext.requestContextPath}/css/jquery-ui.css" />
<link rel="stylesheet" type="text/css" href="#{facesContext.externalContext.requestContextPath}/css/redsqirl.css" />

<script	src="#{facesContext.externalContext.requestContextPath}/js/jquery-1.9.1.js"	type="text/javascript" />
<script	src="#{facesContext.externalContext.requestContextPath}/js/jquery.contextmenu.js" type="text/javascript" />
<script	src="#{facesContext.externalContext.requestContextPath}/js/jquery-ui-1.10.0.custom.js" />
<script	src="#{facesContext.externalContext.requestContextPath}/js/kinetic-v4.3.3.js" type="text/javascript" />
<script	src="#{facesContext.externalContext.requestContextPath}/js/jquery.cookie.js" type="text/javascript" />
<script	src="#{facesContext.externalContext.requestContextPath}/js/canvas.js" type="text/javascript" />
<script	src="#{facesContext.externalContext.requestContextPath}/js/redsqirl.js" type="text/javascript" />
<script	src="#{facesContext.externalContext.requestContextPath}/js/splitter.js"	type="text/javascript" />
<script	src="#{facesContext.externalContext.requestContextPath}/js/scrollabletab.js" type="text/javascript" />
<script	src="#{facesContext.externalContext.requestContextPath}/js/plusTabs.js"	type="text/javascript" />
<script	src="#{facesContext.externalContext.requestContextPath}/js/jquery.blockUI.js" type="text/javascript" />
<script	src="#{facesContext.externalContext.requestContextPath}/js/jquery.hotkeys.js" type="text/javascript" />

<title><h:outputText value="#{messages.label_sistem}" /></title>

<script type="text/javascript">
		           
		 var contTabCanvas = 1;
		 
		 var isResizing = false;
		           
	    jQuery.noConflict();

		  jQuery(function() {

			  function fixOnChangeIssue() {
		    		 jQuery('.rich-combobox ').each(function() {
			    		 var combo = jQuery(this).closest('[component]');
			    		 if(combo.length!=0) {
				    		 combo = combo[0].component;
				    		 if(combo.comboValue.value) {
					    		 combo.field.prevValue = combo.comboValue.value;
					    	 }
					     }
					 });
				}
			  
			  nameTabs[0] = "canvas-1";

	    	  configureTabsRemote();
	    	  configureFooter();

	    	jQuery("[id$='openCanvasScreenHdfs']").click();
	    	jQuery("[id$='openCanvasScreenHive']").click();
	    	jQuery("[id$='openCanvasScreenSsh']").click();
	    	jQuery("[id$='openCanvasScreenHdfsBrowser']").click();

	    	  var tabscanvas = jQuery("#canvas-tabs").tabs().scrollabletab();
	    	  /* 
	    	  tabscanvas.find(".ui-tabs-nav").sortable({
	    	  axis: "x",
	    	  items: 'li:not(.locked)',
	    	  stop: function() {
	    		  tabscanvas.tabs("refresh");
	    	  	}
	    	  });
	    	  */

	    	  jQuery("#tabs1").tabs().scrollabletab();
	    	  jQuery("#tabs2").tabs().scrollabletab();
	    	  
  	        var tabsGroup = jQuery( "#tabs1, #tabs2, #tabFlowchart" ).tabs();
  	        
  	    	tabsGroup.find( ".ui-tabs-nav" ).sortable({
  	            connectWith: ".ulCss",
  	          	items: "li:not(.locked)",
  	            receive: function (event, ui) {
  	            	
  	            		var receiver = jQuery(this).parent(),
  	                    sender = jQuery(ui.sender[0]).parent(),
  	                    tab = ui.item[0],
  	                    tab$ = jQuery(ui.item[0]),
  	                    panelId = tab$.attr( "aria-controls" );
            
  	            		insertBefore = document.elementFromPoint(event.pageX,event.pageY);

	  	                tab$ = jQuery(tab$.removeAttr(jQuery.makeArray(tab.attributes).map(function(item){ return item.name;}).join(' ')).remove());
	  	                tab$.find('a').removeAttr('id tabindex role class');

	  	              	if(insertBefore.parentElement == tab){
		                    insertBefore = document.elementFromPoint(event.pageX + insertBefore.offsetWidth, event.pageY);
		                }
		                insertBefore = jQuery(insertBefore).closest('li[role="tab"]').get(0);
		                if(insertBefore)
		                    tab$.insertBefore(insertBefore);
		                else
		                	jQuery(this).append(tab$);

		                jQuery(jQuery( "#" + panelId ).remove()).appendTo(receiver);
	  	              	tabsGroup.tabs('refresh');

		  	            //source
	  	            	//jQuery(ui.sender[0]).parent().attr("id");
	  	            	
	  	            	//destination
	  	            	//jQuery(this).parent().attr("id");
	  	            	  	            	
	  	            	//item
	  	            	//jQuery(ui.item[0]).attr("aria-labelledby");
	  	            	//aria-controls
	  	              	
	  	              	//copy on source and delete from destination
	  	              	var plusT = jQuery("#" + jQuery(this).parent().attr("id"));

	  	              	var allTabsDestination = jQuery("#" + jQuery(this).parent().attr("id")).find(".allTabs");
	  	              	var allTabsSource = jQuery("#" + jQuery(ui.sender[0]).parent().attr("id")).find(".allTabs");

	  	              	allTabsDestination.find("a[href$=" + jQuery(ui.item[0]).attr("aria-controls") + "]").clone().click(function (event) {
			    		  event.preventDefault();
			    		  plusT.find('.allTabs').slideUp('fast');
			    		}).appendTo(allTabsSource);
	  	              	
	  	            	allTabsDestination.find("a[href$=" + jQuery(ui.item[0]).attr("aria-controls") + "]").remove();
	
	  	              	jQuery("#canvas-tabs").tabs().tabs('refresh');
	  	              	//jQuery("#tabRemote").tabs().tabs('refresh');
	  	              	//configureTabsRemote();
	  	              	
	  	              	jQuery("#"+jQuery(this).parent().attr("id")).tabs("option", "active", jQuery(ui.item[0]).index());
	  	              	canvasResizeSplitter();
  	            }

  	        });
  	    	
  	    	jQuery("#idtabs-8").click(function () {
  	    		jQuery("#buttonstabRemote").hide();
	  	    	jQuery("#buttonstabRemote").css("left", jQuery("#tabRemote").width()-30+'px');
   				validateArrows(jQuery("#tabRemote"),jQuery("#buttonstabRemote"));
	        });

  	    	jQuery("#idtabFlowchart-1").click(function () {
  	    		jQuery("#canvas-tabs").resize();
  	    		resizing();
	        });
  	    	
  	    	var contTabRemote = 1;

	    	  jQuery('#addtabCanvas').click( function(){
	              //<![CDATA[
	              
	              contTabCanvas++;
	              var tabName = "canvas-"+contTabCanvas;
	              addWorkflow(tabName);
	              addWorkflowTab(tabName);
	              configureCanvas(tabName);
	              setWorkflow(tabName);
	              validateArrows(jQuery("#canvas-tabs"),jQuery("#buttonsCanvas1"));
	              
	              //]]>
	          });

		  var menusplitVCanvas = [
		  {'Right': function(menuItem,menu){
			  jQuery(".splitter-bar-vertical").css("left", jQuery(window).width()-40+'px');
			  jQuery("#splitHCanvas").css("width", 0+'px');
			  jQuery("#tabFlowchart").css("width", jQuery(window).width()-40+'px');
			  canvasResizeSplitter();
			  }},
		  {'Middle': function(menuItem,menu){
			  onPageReady();
			  }},
		  {'Left': function(menuItem,menu){
			  
			  jQuery(".splitter-bar-vertical").css("left", 0+'px');
			  jQuery("#splitHCanvas").css("width", jQuery(window).width()-40+'px');
			  jQuery("#splitHCanvas").css("left", 0+'px');
			  jQuery("#tabFlowchart").css("width", 0+'px');
			  canvasResizeSplitter();
			  }}
		  ];
          
		  var menusplitHCanvas = [
		  {'Top': function(menuItem,menu){
			  jQuery("#tabs1").css("height", '0px');
			  jQuery(".splitter-bar-horizontal").css("top", '0px');
			  jQuery("#tabs2").css("top", '0px');
			  jQuery("#tabs2").css("height", jQuery("#splitVCanvas").height()-20+'px');
			  resizeTabs();
		  	}},
		  {'Middle': function(menuItem,menu){ 
			  jQuery("#tabs1").css("height", (jQuery("#splitVCanvas").height()-20)/2+'px');
			  jQuery(".splitter-bar-horizontal").css("top", (jQuery("#splitVCanvas").height()-20)/2+'px');
			  jQuery("#tabs2").css("top", (jQuery("#splitVCanvas").height()-20)/2+'px');
			  jQuery("#tabs2").css("height", (jQuery("#splitVCanvas").height()-20)/2+'px');
			  resizeTabs();
		  	}},
		  {'Bottom': function(menuItem,menu){
			  jQuery("#tabs1").css("height", jQuery("#splitVCanvas").height()-20+'px');
			  jQuery(".splitter-bar-horizontal").css("top", jQuery("#splitVCanvas").height()-20+'px');
			  jQuery("#tabs2").css("top", jQuery("#splitVCanvas").height()-20+'px');
			  jQuery("#tabs2").css("height", '0px');
			  resizeTabs();
		  	}}
		  ];

	    	  jQuery("#splitVCanvas").splitter({
	        	  type: "v",
	        	  outline: true,
	        	  sizeLeft: jQuery(window).width()*2/3,
	        	  //minLeft: 200,
	        	  //minRight: 200,
	        	  resizeToWidth: true,
	        	  dock: "right",
	        	  dockSpeed: 200,
	        	  cookie: "splitVCanvas"
	          });
	
	    	  jQuery("#splitHCanvas").splitter({
	        	  type: "h",
	        	  outline: true,
	        	  sizeTop: true,
	        	  //minTop: 100,
	        	  //minBottom: 100,
	        	  dock: "top",
	        	  dockSpeed: 200,
	        	  cookie: "splitHCanvas"
	          });
	
		      jQuery(".splitter-bar-vertical").contextMenu(menusplitVCanvas);
		      jQuery(".splitter-bar-horizontal").contextMenu(menusplitHCanvas);

		      jQuery(".splitter-bar-vertical").mousedown(function() {
		    	  jQuery('#helpmain_splitter').click();return false;
		      });
		      jQuery(".splitter-bar-horizontal").mousedown(function() {
		    	  jQuery('#helpmain_splitter').click();return false;
		      });
		      
	    	  onPageReady();
	    	  
              document.getElementById("canvas-tabs").addEventListener('contextmenu', function (event) {
              	event.preventDefault();
              });
    
				var i = 0;
	    	  
				var resizeTimer;
				
		    	jQuery(window).resize(function() {
		    		if (!isResizing){
			    	    clearTimeout(resizeTimer);
			    	    resizeTimer = setTimeout(doneResizing, 100);
		    		}
		    	});
	
	    		function doneResizing(){
	    				resizing();
	    		}

	    		jQuery( "#tabs1" ).plusTabs({
		  	        className: "plusTabs",
		  	        seeMore: true,
		  	        seeMoreText: " ",
		  	        showCount: false,
		  	        expandIcon: "&#9660; ",
		  	        dropWidth: "66%",
		  	        sizeTweak: 30
		  	    });

	    		jQuery( "#tabs2" ).plusTabs({
		  	        className: "plusTabs",
		  	        seeMore: true,
		  	        seeMoreText: " ",
		  	        showCount: false,
		  	        expandIcon: "&#9660; ",
		  	        dropWidth: "66%",
		  	        sizeTweak: 30
		  	    });

	    		jQuery( "#tabFlowchart" ).plusTabs({
		  	        className: "plusTabs",
		  	        seeMore: true,
		  	        seeMoreText: " ",
		  	        showCount: false,
		  	        expandIcon: "&#9660; ",
		  	        dropWidth: "66%",
		  	        sizeTweak: 30
		  	    });

	    		var allTabs = jQuery("#tabs1").find(".allTabs");
		  	    
	    		 jQuery("#changeTabTabs1").click(function() {

	    			 allTabs = jQuery("#tabs2").find(".allTabs");
	    			 allTabs.hide();
	    			 allTabs = jQuery("#tabFlowchart").find(".allTabs");
	    			 allTabs.hide();
	    			 
	    			 allTabs = jQuery("#tabs1").find(".allTabs");

	    			 var tabsRealWidth = 0;
	    			 jQuery("#tabs1 ul:first li").each(function (index, element) {
		    			 tabsRealWidth += jQuery(element).width();
		    		 });
	    			 allTabs.css("left", parseInt(tabsRealWidth) +'px');

	    			 var $tabIndex = jQuery("#tabs1").tabs('option', 'active');
	    			 var $selected = jQuery("#tabs1 ul>li a").eq($tabIndex).attr('href');
	    			 allTabs.css("margin-top", -1 * jQuery($selected).height() + 'px');
	    			 
	    			 allTabs.show();

		    		  allTabs.mouseleave(function() {
			    			  allTabs.hide();
		    		  });
		    		  
	    		  });

	    		 jQuery("#changeTabTabs2").click(function() {

	    			 allTabs = jQuery("#tabs1").find(".allTabs");
	    			 allTabs.hide();
	    			 allTabs = jQuery("#tabFlowchart").find(".allTabs");
	    			 allTabs.hide();
	    			 
	    			 allTabs = jQuery("#tabs2").find(".allTabs");

	    			 var tabsRealWidth = 0;
	    			 jQuery("#tabs2 ul:first li").each(function (index, element) {
		    			 tabsRealWidth += jQuery(element).width();
		    		 });
	    			 allTabs.css("left", parseInt(tabsRealWidth) +'px');

	    			 var $tabIndex = jQuery("#tabs2").tabs('option', 'active');
	    			 var $selected = jQuery("#tabs2 ul>li a").eq($tabIndex).attr('href');
	    			 allTabs.css("margin-top", -1 * jQuery($selected).height() + 'px');
	    			 
	    			 allTabs.show();

		    		  allTabs.mouseleave(function() {
			    		  allTabs.hide();
		    		  });
		    		  
	    		  });

	    		 jQuery("#changeTabCanvas").click(function() {

	    			 allTabs = jQuery("#tabs1").find(".allTabs");
	    			 allTabs.hide();
	    			 allTabs = jQuery("#tabs2").find(".allTabs");
	    			 allTabs.hide();
	    			 
	    			 allTabs = jQuery("#tabFlowchart").find(".allTabs");

	    			 var tabsRealWidth = 0;
	    			 jQuery("#tabFlowchart ul:first li").each(function (index, element) {
		    			 tabsRealWidth += jQuery(element).width();
		    		 });
	    			 allTabs.css("left", parseInt(tabsRealWidth) +'px');

	    			 var $tabIndex = jQuery("#tabFlowchart").tabs('option', 'active');
	    			 var $selected = jQuery("#tabFlowchart ul>li a").eq($tabIndex).attr('href');
	    			 allTabs.css("margin-top", -1 * jQuery($selected).height() + 'px');
	    			 
	    			 allTabs.show();

		    		  allTabs.mouseleave(function() {
			    		  allTabs.hide();
		    		  });
		    		  
	    		  });
	    		 
	    		 //var isChrome = window.chrome;
	    		 //if(isChrome){
		    		 
		    		 //disable select in chrome
		    		 jQuery('*').css('-webkit-user-select', 'none');
		    		 jQuery('*').css('-khtml-user-select', 'none');
		    		 jQuery('*').css('-moz-user-select', 'none');
		    		 jQuery('*').css('-o-user-select', 'none');
		    		 jQuery('*').css('user-select', 'none');
		    		 jQuery('input').css('-webkit-user-select', 'text');
		    		 jQuery('#flowchart-canvas-1').css('position', 'fixed');
		    		 
				 //}

	    		 jQuery("#tabsFooter").find("a").click(function() {
	    			 resizeCanvas(30,30);
	    		 });
	    		 
	    		 window.onbeforeunload = function(){
	    			 invalidateSession();
	    		 }
	    		 
	    		 setTimeout(function(){autoSaveAll()}, 10*1000);
	    		 
	    	});	//---------- END jQuery function
	    			
	    	function autoSaveAll(){
	    		try{
	    			var currentSelect = getAllIconPositions();
	                if(allPositionIcons === undefined){
	                	if(currentSelect !== undefined){
	                		allPositionIcons = currentSelect;
	                        saveAllPositions(currentSelect);
	                	}
	                }else if(currentSelect !== allPositionIcons){
	                	allPositionIcons = currentSelect;
                        saveAllPositions(currentSelect);
	                }
                }catch(err){
                }
	    		setTimeout(function(){autoSaveAll()},10*60*1000);
            }

	      function closeTab(arg){
	    	  jQuery(jQuery( arg ).prev().attr('href')).remove();
	    	  jQuery( arg ).offsetParent().remove();
	      }
	      
	      function menuCloseTab(){
	    	  var tabName = getSelectedByName();
	    	  var ul = jQuery("#canvas-tabs ul:first li #"+tabName+"-icon-close");
	    	  closeWorkflowTab(ul, tabName);
	      }
	      
	      function addElementJs(canvasName, path, positions, links){
	          //Add the workflow tab only if the name does not exist yet.
	          //alert(document.getElementById(canvasName) == null);
	          if(document.getElementById(canvasName) == null) {
	    	      addWorkflowTab(canvasName);
	    	      configureCanvas(canvasName);
		    	  setWorkflow(canvasName);
	    	      addElements(canvasName, positions);
	    	      setSaved(canvasName, true);
	    	      setPathFile(canvasName, path);
	    	      
	    	      addLinks(canvasName, links);

		    	  //change arc's colors
		    	  //Updated after workflow
		    	  //updateAllArcsStatus();
		    	  //updateRunningStatus();

		    	  //alert("2");
	
		    	  //change arrow colours
		    	  updateAllArrowColor();
		    	  
		    	  resizeCanvas(30,30);
	          }
	      }
	      
	      function addLinksJs(canvasName, links){
	    	  addLinks(canvasName, links);
	      }
	      
	      function updateCanvasRunningStatus(status){
	    	//<![CDATA[
	    	  for (var i = 0; i < status.length; i++) {
		    	  updateActionRunningStatus(status[i][0], status[i][1], status[i][2]);
	    	  }
	    	//]]>
	      }

	      function updateArcStatus(status){
	    	//<![CDATA[
	    	  for (var i = 0; i < status.length; i++) {
		    	  //alert(status[i][0] + " " + status[i][1] + " " + status[i][2]);
		    	  updateActionOutputStatus(status[i][0], status[i][1], status[i][2], status[i][3]);
	    	  }
	    	//]]>
	      }
	      
	      var numTabs = 1;
	      var nameTabs = {};
	      
	      function addWorkflowTab(tabName){
	    	//<![CDATA[
	    	
	    	  var tabs = jQuery("#canvas-tabs").tabs();
              var ul = jQuery("#canvas-tabs").tabs().find( "ul:first" );
              
              jQuery( "<li class='locked'><a href='#"+ getCanvasId(tabName) +"' onclick=\"jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });setWorkflow('"+tabName+"');\">"+ 
            		  tabName +"</a> <span id='"+tabName+"-icon-close' class='ui-icon ui-icon-close' role='presentation' onclick=\"closeWorkflowTab(this, '"+tabName+"')\"></span> </li>" ).appendTo( ul );
              
              var div = "<div id='"+getCanvasId(tabName)+"' class='container-canvas'>"+
				"<div id='container-"+tabName+"' class='container-"+tabName+"'>"+
				"<div class='rich-panel headerLegend' onclick=\"jQuery('#panelLegend-"+tabName+"').toggle();return false;\"  style='position: fixed; z-index:101; width:190px'>"+
					"<div class='rich-panel-header'>Legend</div>"+
				"</div>"+
				"<div class='rich-panel' id='panelLegend-"+tabName+"'  style='position: fixed; z-index:100; display: none; width:190px; height:330px'>"+
					"<div class='rich-panel-body' style='overflow:hidden;'>"+
						"<div id='container-legend-"+tabName+"' class='container-legend-"+tabName+"' style='overflow:hidden; position: relative; top:20px;'/>"+
					"</div>"+
	        	"</div>"+
              	"</div>"+
				"</div>";
              
              jQuery(div).appendTo( tabs );
              tabs.tabs( "refresh" );
              
              //select new tab
              tabs.tabs("option", "active", numTabs);
              nameTabs[numTabs] = tabName;
              numTabs++;
              setSelectedByName(tabName);
            //]]>
	      }
	      
          function closeCurrentTabWithoutCallingBackend(){
            //<![CDATA[
            
              var tabName = getSelectedByName();
              var tab = jQuery("#canvas-tabs ul:first li #"+tabName+"-icon-close");
              
              closeTab(tab);
              
              jQuery("#canvas-tabs").tabs( "refresh" );
              
              var names = {};
              var cont = 0;
              for (var i = 0; i < numTabs; ++i){
                  if (nameTabs[i] != tabName){
                      names[cont++] = nameTabs[i];
                  }
              }
              numTabs--;
              nameTabs = names;
              selectTab(numTabs-1);
            //]]>
          }
	      
	      function closeWorkflowTab(tab, tabName){
	    	//<![CDATA[
	    	  closeTab(tab);
	    	  closeWorkflow(tabName);
	    	  
	    	  jQuery("#canvas-tabs").tabs( "refresh" );
	    	  
	    	  var names = {};
	    	  var cont = 0;
	    	  for (var i = 0; i < numTabs; ++i){
	    		  if (nameTabs[i] != tabName){
	    			  names[cont++] = nameTabs[i];
	    		  }
	    	  }
	    	  numTabs--;
	    	  nameTabs = names;
	    	  selectTab(numTabs-1);
	    	//]]>
	      }
	      
	      function closeAllWorkflowTabs(){
              var ul = jQuery("#canvas-tabs ul:first li .ui-icon");
              
              jQuery.each(ul, function(index, value){
            	  closeTab(value);
              });
             
              contTabCanvas = 1;
              numTabs = 0;
    	      nameTabs = {};
              
              addWorkflow("canvas-1");
              addWorkflowTab("canvas-1");
              configureCanvas("canvas-1");
              setWorkflow("canvas-1");
	      }
	      
	     function selectTab(tabIndex){
	    	 var tabs = jQuery("#canvas-tabs").tabs();
	    	 tabs.tabs("option", "active", tabIndex);
	    	 setWorkflow(nameTabs[tabIndex]);
	     }
		
	   		jQuery(document).bind('keypress', function (e) {
			if (e.which == 13) { // Delete
				//alert(jQuery("#modalChangeIdCDiv").is(':visible'));
				if(jQuery("#modalChangeIdCDiv").is(':visible')){ // modalChangeId
					jQuery("[id$='changeIdElementBt']").click();
				}
			}
		});
	   		
	   	function disableEnterKey(e){
	        var key;
	        if(window.event)
	             key = window.event.keyCode;
	        else
	             key = e.which;
	        return (key != 13);
	   }
	   	
	   	function enableEnterKey(e, id){
	        var key;
	        if(window.event)
	             key = window.event.keyCode;
	        else
	             key = e.which;
	        
	        if (key == 13){
	        	e.preventDefault();
	        	jQuery("[id$='"+id+"']").click();
	        }
	        return (key != 13);
	   }
	   	
	   	function verifyIfIsRunning(canvas){
	   		jQuery('#canvas-tabs').unblock();
	   		if (isRunning(canvas)){
	   			blockRunningWorkflow();
	   		}
	   	}
	   	
	   	function menuSave(){
			if (isSaved(getSelectedByName())){
				save(getPathFile(getSelectedByName()));
	   		}
	   		else{
	   			openModalSaveWorkflow();
	   		}
	   	}
	   	
	   	function configureTabsRemote(){
		    var tabsRemote = jQuery("#tabRemote").tabs().scrollabletab();

		  	/* tabsRemote.find(".ui-tabs-nav").sortable({
		  	  //connectWith: ".ulCssCanvas",
		  	  items: "li:not(.locked)",
		  	  axis: "x",
		  	  stop: function() {
		  		  tabsRemote.tabs("refresh");
		  	  	}
	  	 	 }); */
		  	
		  	//jQuery("#tabRemote").tabs().tabs('refresh');
		  	//resizeTables();
	   	}


	   	function configureFooter(){
   		 var tabsFooter = jQuery("#tabsFooter").tabs().scrollabletab();

   	  		  /* tabsFooter.find(".ui-tabs-nav").sortable({
	    	  //connectWith: ".ulCssCanvasFooter",
	    	  items: "li:not(.locked)",
	    	  axis: "x",
	    	  stop: function() {
	    		  tabsFooter.tabs("refresh");
	    	  	}
	    	  }); */
	    	  
	    	  //jQuery("#tabsFooter").tabs().tabs('refresh');
	    	  
	    	  configureFooterCss();
	    	  validateArrows(jQuery("#tabsFooter"),jQuery("#buttonsTabsFooter"));
	    	  
   		}
	   	
	   	
	   	/*keyboard shortcuts*/
	   	
	   	shortcut.add("Ctrl+n",function() {
	   		jQuery("#formMenu\\:newMenuItem").click();
	   	});
	   	
	   	shortcut.add("Ctrl+o",function() {
	   		jQuery("#formMenu\\:openMenuItem").click();
	   	});
	   	
	   	shortcut.add("Ctrl+s",function() {
	   		jQuery("#formMenu\\:saveMenuItem").click();
	   	});
	   	
		shortcut.add("Ctrl+Alt+x",function() {
			jQuery("#formMenu\\:saveAsMenuItem").click();
	   	});
		
		shortcut.add("Ctrl+Shift+s",function() {
			jQuery("#formMenu\\:saveAllMenuItem").click();
	   	});
		
		shortcut.add("Ctrl+w",function() {
			jQuery("#formMenu\\:closeMenuItem").click();
	   	});
		
		shortcut.add("Ctrl+Shift+w",function() {
			jQuery("#formMenu\\:closeAllMenuItem").click();
	   	});
		
		shortcut.add("Ctrl+a",function() {
			jQuery("#formMenu\\:selectAllMenuItem").click();
	   	});
		
		shortcut.add("Ctrl+Shift+a",function() {
			jQuery("#formMenu\\:deselectAllMenuItem").click();
	   	});
	   	
		shortcut.add("Ctrl+j",function() {
			jQuery("#formMenu\\:oozieMenuItem").click();
	   	});
		
		shortcut.add("Ctrl+l",function() {
			jQuery("#formMenu\\:cleanMenuItem").click();
	   	});
	   	
		shortcut.add("Ctrl+r",function() {
			jQuery("#formMenu\\:runMenuItem").click();
	   	});
		
		shortcut.add("Ctrl+Alt+r",function() {
			jQuery("#formMenu\\:runSelectedMenuItem").click();
	   	});
		
		shortcut.add("Ctrl+i",function() {
			jQuery("#formMenu\\:installationMenuItem").click();
	   	});
	   	
	   	shortcut.add("Ctrl+Alt+p",function() {
            jQuery("#formMenu\\:settingsMenuItem").click();
        });

	   	function checkPageError(){
		   	if(jQuery("#msnErrorPageContainer")){
			 	jQuery("#msnErrorPageContainer").css("z-index", '1000');
	    	}
	   	}

	</script>

</head>
<body id="body">

	<a4j:keepAlive beanName="canvasModalBean" />


	<div id="invisible"></div>

	<div id="menu">
		<h:form id="formMenu">
		
			<div id="domMessageDivCanvas1" style="display: none;">
				<img src="../image/icons/waiting.gif" />
			</div>
			
			<a4j:region>
                <a4j:jsFunction name="openModalSaveWorkflow" action="#{browserHdfsBean.createSaveFolder}" 
                oncomplete="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });openModalFileHdfs('T');"/>
				<a4j:jsFunction name="openModalLoadWorkflow" action="#{browserHdfsBean.createSaveFolder}" 
				oncomplete="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });openModalFileHdfs('F');" />
				<a4j:jsFunction name="openModalFileHdfs" reRender="modalFileHdfs" 
				oncomplete="#{rich:component('modalFileHdfs')}.show();jQuery('#canvas-tabs').unblock();" >
				    <a4j:actionparam name="openCtrl" assignTo="#{browserHdfsBean.showSave}"/>
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region renderRegionOnly="true">
				<a4j:jsFunction name="saveAllPositions" action="#{canvasBean.updateAllPosition}">
					<a4j:actionparam name="allpositions" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="closeAll" action="#{canvasBean.closeAll}"
					oncomplete="closeAllWorkflowTabs()" />
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="reRenderFooter" oncomplete="mountFooter();" reRender="tabsFooterForm" />
				<a4j:jsFunction name="mountFooter" oncomplete="configureFooter();mountObj('#{canvasBean.nameWorkflow}')" />
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="updateOutputStatus" data="#{canvasBean.outputStatus}"
					oncomplete="updateArcStatus(data);" reRender="errorTable, msnError" >
					<a4j:actionparam name="groupId" />
				</a4j:jsFunction>
			</a4j:region>

           <a4j:region>
                <a4j:status
                    onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
                    onerror="jQuery('#canvas-tabs').unblock();"
                    onsuccess="jQuery('#canvas-tabs').unblock();"
                    onstop="jQuery('#canvas-tabs').unblock();" />

                <a4j:jsFunction name="openWorkflowElementUrl"
                    action="#{canvasBean.calcWorkflowElementUrl}"
                    data="#{canvasBean.workflowElementUrl}"
                    oncomplete="window.open(data,'_blank')" reRender="errorTable">
                    <a4j:actionparam name="groupId" />
                </a4j:jsFunction>
            </a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="updateAllArcsStatus"
					data="#{canvasBean.allOutputStatus}"
					oncomplete="updateArcStatus(data);jQuery('#canvas-tabs').unblock();" reRender="errorTable" />
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="updateRunningStatus"
					data="#{canvasBean.runningStatus}"
					oncomplete="updateCanvasRunningStatus(data);jQuery('#canvas-tabs').unblock();" reRender="errorTable, msnError" />
			</a4j:region>

			<a4j:region>

				<a4j:jsFunction name="setWorkflow"
					action="#{canvasBean.changeWorkflow}"
					oncomplete="setSelectedByName('#{canvasBean.nameWorkflow}');verifyIfIsRunning(getSelectedByName());"
					reRender="formMenu,domMessageDivCanvas2,killProcessBtn">
					<a4j:actionparam name="selectedCanvas" assignTo="#{canvasBean.nameWorkflow}" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="addWorkflow"
					action="#{canvasBean.addWorkflow}">
					<a4j:actionparam name="name" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="removeLinkBt"
					action="#{canvasBean.removeLink}">
					<a4j:actionparam name="paramOutId" />
					<a4j:actionparam name="paramOutName" />
					<a4j:actionparam name="paramInId" />
					<a4j:actionparam name="paramInName" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />


				<a4j:jsFunction name="removeElement"
					action="#{canvasBean.removeElement}">
					<a4j:actionparam name="paramGroupID" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:jsFunction name="addElementBt"
					action="#{canvasBean.addElement}">
					<a4j:actionparam name="paramNameElement" />
					<a4j:actionparam name="paramGroupID" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();" onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="saveWorkflow" action="#{canvasBean.save}"
					reRender="errorTable"
					oncomplete="if(document.getElementById('#{canvasBean.nameWorkflow}') == null){renameTab();} else {onHideModalSaveWorkflow(true);jQuery('#canvas-tabs').unblock();}">
					<a4j:actionparam name="nameWorkflow" />
					<a4j:actionparam name="pathFile" />
					<a4j:actionparam name="positions" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>

				<a4j:status onerror="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="addLinkBt" data="#{canvasBean.result}"
					oncomplete="updateLink(data[0], data[1], data[2]);
                	updateArrowColor('#{canvasBean.paramOutId}','#{canvasBean.paramInId}', '#{canvasBean.nameOutput}');" />
			</a4j:region>

			<a4j:region>
				<a4j:status onerror="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="addLinkWhenUniq"
					action="#{canvasBean.addLink}" oncomplete="addLinkBt();" />
			</a4j:region>

			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });" />

				<a4j:jsFunction name="addLinkModalBt" action="#{canvasBean.updateLinkPossibilities}"
					oncomplete="if(#{canvasBean.nbLinkPossibilities} == 1){addLinkWhenUniq();}else{jQuery('#canvas-tabs').unblock();#{rich:component('modalSelectLink')}.show();};"
					reRender="selectLinkList">
					<a4j:actionparam name="paramOutId" assignTo="#{canvasBean.paramOutId}" />
					<a4j:actionparam name="paramInId" assignTo="#{canvasBean.paramInId}" />
					<a4j:actionparam name="paramNameLink" assignTo="#{canvasBean.paramNameLink}" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="updateArrowColor"
					data="#{canvasBean.arrowType}"
					oncomplete="updateArrowType(data[0], data[1], data[2], data[3], data[4]);updateArrowLabel(data[0], data[1], data[5]);">
					<a4j:actionparam name="groupOutId" />
					<a4j:actionparam name="groupInId" />
					<a4j:actionparam name="outputName" />
				</a4j:jsFunction>

			</a4j:region>

			<a4j:region>
				<a4j:status onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="updateAllArrowColor"
					data="#{canvasBean.allArrows}"
					oncomplete="updateAllArrowColours('#{canvasBean.nameWorkflow}', data)">
				</a4j:jsFunction>

			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="openModal"
					action="#{canvasModalBean.openCanvasModal}"
					oncomplete="if(#{requestScope['msnError'] == null}){ #{rich:component('canvasModalPanel')}.show();checkPageError(); }"
					reRender="pageTitle, panelDynamicForm, panelBtCanvasModal, msnError, errorTable, canvasModalTabPanel, msnErrorPage">
					<a4j:actionparam name="paramGroupId" />
					<a4j:actionparam name="paramPathImage" />
					<a4j:actionparam name="paramSelectedTab" />
					<a4j:actionparam name="paramPageNb" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="openChangeIdModal"
					action="#{canvasModalBean.openCanvasModal}"
                    data="#{canvasModalBean.loadMainWindow}"
					oncomplete="if( #{requestScope['msnError'] == null}){if(data || confirm('Changing an action identification may cause errors and force you to reconfigure this object and its dependent nodes. Do you want to continue?')){#{rich:component('modalChangeId')}.show();}}else{updateLabelObj('#{canvasModalBean.idGroup}','#{canvasModalBean.componentId}');changeHelpAnchor('#{canvasModalBean.listPosition}');setPageNb('#{canvasModalBean.idGroup}','#{canvasModalBean.listPosition}');}"
					reRender="msnError, errorTable, newIdElement">
					<a4j:actionparam name="paramGroupId" />
					<a4j:actionparam name="paramPathImage" />
                    <a4j:actionparam name="paramLoadMainWindow"  />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="openPackageModal"
					oncomplete="#{rich:component('modalPackage')}.show();">
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:jsFunction name="closeChangeIdModal"
				    reRender="pageTitle, panelDynamicForm, panelBtCanvasModal, msnError, errorTable, canvasModalTabPanel"
					oncomplete="if(#{canvasModalBean.loadMainWindow}){ #{rich:component('canvasModalPanel')}.show();}">
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="loadWorkflow"
					data="#{canvasBean.positions}"
					oncomplete="addElementJs(data[0],data[1],data[2],data[3]);setRunning(getSelectedByName(), true);blockRunningWorkflow();"
					reRender="tabFlowchart,errorTable,msnError" />
					
			</a4j:region>

			<a4j:region>
				<a4j:status onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="renameTab" data="#{canvasBean.positions}"
					oncomplete="closeCurrentTabWithoutCallingBackend();addElementJs(data[0],data[1],data[2],data[3]);updateRunningStatus();updateAllOutputStatus();onHideModalSaveWorkflow(true);jQuery.unblockUI();"
					reRender="tabFlowchart" />
			</a4j:region>

			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivcanvas-tabs') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />


				<a4j:jsFunction name="closeWorkflow"
					action="#{canvasBean.closeWorkflow}">
					<a4j:actionparam name="workflow" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>
				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />
				<a4j:jsFunction name="updateIdObj"
					action="#{canvasBean.updateIdObj}">
					<a4j:actionparam name="idGroup" />
					<a4j:actionparam name="id" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>

				<a4j:status
					onstart="jQuery('#'+getSelectedById()).block({ message: jQuery('#domMessageDivCanvas2') });resizeBlockUICanvas();"
					onerror="jQuery('#'+getSelectedById()).unblock();" />

				<div id="domMessageDivCanvas2" style="display: none;">
					<img src="../image/icons/waiting.gif" />
					<h:panelGroup id="right_area" layout="block">
					    
                        <h:outputLink id="workflowUrl" value="#{canvasBean.workflowUrl}" target="_blank" 
                          style="float:left;margin-left:5px;" 
                          rendered="#{canvasBean.workflowUrl != null}">
                           <h:graphicImage  value="../image/icons/button-oozie_web_console.gif" 
                                            title='#{messages.oozie_gotowebconsole}' 
                                            alt="Oozie Console" class="fileSystemIcon"
                           />
                        </h:outputLink>
						<a4j:commandButton id="killProcessBtn" styleClass="greenButton" style="float:right;margin-right:5px;" 
						     value="Kill Process" action="#{canvasBean.stopRunningWorkflow}"
							rendered="#{canvasBean.running}"/>
					</h:panelGroup>
				</div>

				<a4j:jsFunction name="blockRunningWorkflow"
					action="#{canvasBean.blockRunningWorkflow}"
					oncomplete="jQuery('#'+getSelectedById()).unblock();if('#{canvasBean.blockingWorkflowName}' == getSelectedByName()){setRunning(getSelectedByName(), false);updateRunningStatus();updateAllOutputStatus();}">
				</a4j:jsFunction>

			</a4j:region>
			<a4j:region>
				<a4j:jsFunction name="invalidateSession"
					action="#{canvasBean.reinitialize}" />
			</a4j:region>

			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivcanvas-tabs') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />

				<a4j:jsFunction name="runWorkflow"
					action="#{canvasBean.runWorkflow}"
					oncomplete="setRunning(getSelectedByName(), true);blockRunningWorkflow();"
					reRender="formMenu,domMessageDivCanvas2,killProcessBtn,msnError">
					<a4j:actionparam name="positions" />
					<a4j:actionparam name="savedFile" />
					<a4j:actionparam name="select" />
				</a4j:jsFunction>
			</a4j:region>

			<a4j:region>

				<a4j:status
					onstart="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivcanvas-tabs') });"
					onerror="jQuery('#canvas-tabs').unblock();"
					onsuccess="jQuery('#canvas-tabs').unblock();"
					onstop="jQuery('#canvas-tabs').unblock();" />


				<a4j:jsFunction name="backupAll" action="#{canvasBean.backupAll}"
					oncomplete="closeWorkflow(getSelectedByName());">
					<a4j:actionparam name="allpositions" />
				</a4j:jsFunction>
			</a4j:region>
			
			<a4j:region>
				
				<a4j:commandLink id="openCanvasScreenHdfs" action="#{hdfsBean.openCanvasScreen}" style="display:none;" reRender="fileSysGridForm"
				onclick="jQuery('#tabs-7').block({ message: jQuery('#domMessageDiv7') });" oncomplete="jQuery('#tabs-7').unblock();" />
				
				<a4j:commandLink id="openCanvasScreenHive" action="#{hiveBean.openCanvasScreen}" style="display:none;" reRender="fileSysGridFormHive"
				onclick="jQuery('#tabs-4').block({ message: jQuery('#domMessageDiv4') });" oncomplete="jQuery('#tabs-4').unblock();" />
				
				<a4j:commandLink id="openCanvasScreenSsh" action="#{sshBean.openCanvasScreen}" style="display:none;" reRender="tabs-8, tabRemote, fileSysGridFormSsh, fileSysGridFormSshTab"
				onclick="jQuery('#tabs-8').block({ message: jQuery('#domMessageDiv8') });" oncomplete="jQuery('#tabs-8').unblock();" />
				
				<a4j:commandLink id="openCanvasScreenHdfsBrowser" action="#{browserHdfsBean.openCanvasScreen}" style="display:none;" />
				
			</a4j:region>
			

			<a4j:region>
                <!-- <h:panelGrid columns="2" width="100%"> -->
			    <table style="width:100%;display:block;">
			        <tr style="width:100%;right:0px;position:relative;">
			        <td style="max-width=105px;padding=0px;margin=0px;" >
				    <a class="stopLink" id="help_main"
					onclick="return false;" href="../help/main.html">
					<h:graphicImage id="logoImg" width="100px" url="../image/icons/logo.png"/>
				    </a>
					</td>
					<td style="width:100%;">
					<h:panelGrid columns="1" width="100%" style="right:5px;position:relative;">
					<rich:toolBar>
		
						<rich:dropDownMenu>
		
							<f:facet name="label">
								<h:panelGroup>
									<h:outputText value="#{messages.label_menu_file}" />
								</h:panelGroup>
							</f:facet>
		
							<rich:menuItem id="newMenuItem" submitMode="none"
								value="#{messages.label_menu_new}"
								onclick="jQuery('#addtabCanvas').click();" >
								<h:outputText value="Ctrl+N" class="menuItemHotKey"/>
							</rich:menuItem>
							<rich:menuItem id="openMenuItem" submitMode="ajax"
								value="#{messages.label_menu_open}"
								onclick="openModalLoadWorkflow()"
								rerender="hdfsfsOpenFile">
								<h:outputText value="Ctrl+O" class="menuItemHotKey"/>
							</rich:menuItem>
							<rich:menuSeparator />
							<rich:menuItem id="saveMenuItem" submitMode="ajax" value="#{messages.label_menu_save}" 
								onclick="menuSave();" >
								<h:outputText value="Ctrl+S" class="menuItemHotKey"/>
							</rich:menuItem>
							<rich:menuItem id="saveAsMenuItem" submitMode="ajax" value="#{messages.label_menu_saveas}" 
								onclick="openModalSaveWorkflow()" >
								<h:outputText value="Ctrl+Alt+X" class="menuItemHotKey"/>
							</rich:menuItem>
							<rich:menuItem id="saveAllMenuItem" submitMode="ajax" value="#{messages.label_menu_saveall}" 
								onclick="saveAll();" >
								<h:outputText value="Ctrl+Shift+S" class="menuItemHotKey"/>
							</rich:menuItem>
							<rich:menuSeparator />
							<rich:menuItem id="closeMenuItem" submitMode="none"
								value="#{messages.label_menu_close}" onclick="menuCloseTab();" >
								<h:outputText value="Ctrl+W" class="menuItemHotKey"/>
							</rich:menuItem>
							<rich:menuItem id="closeAllMenuItem" submitMode="ajax"
								value="#{messages.label_menu_closeall}" onclick="closeAll();" >
								<h:outputText value="Ctrl+Shift+W" class="menuItemHotKey"/>
							</rich:menuItem>
	
						</rich:dropDownMenu>
		
						<rich:dropDownMenu>
	
							<f:facet name="label">
								<h:panelGroup>
									<h:outputText value="#{messages.label_menu_edit}" />
								</h:panelGroup>
							</f:facet>
							<rich:menuItem id="selectAllMenuItem" submitMode="none"
								value="#{messages.label_menu_selectall}" onclick="selectAll(getSelectedByName());" >
								<h:outputText value="Ctrl+A" class="menuItemHotKey"/>
							</rich:menuItem>
							<rich:menuItem id="deselectAllMenuItem" submitMode="none"
								value="#{messages.label_menu_deselectall}"
								onclick="deselectAll(getSelectedByName());" >
								<h:outputText value="Ctrl+Shift+A" class="menuItemHotKey"/>
							</rich:menuItem>
							<rich:menuSeparator />
							<rich:menuItem submitMode="none"
								value="#{messages.label_menu_delete}" onclick="deleteSelected();" >
								<h:outputText value="Del" class="menuItemHotKey"/>
							</rich:menuItem>
	
	
		
						</rich:dropDownMenu>
		
						<rich:dropDownMenu>
		
							<f:facet name="label">
								<h:panelGroup>
									<h:outputText value="#{messages.label_menu_project}" />
								</h:panelGroup>
							</f:facet>
	
	
							<rich:menuItem id="oozieMenuItem" submitMode="none">
								<h:outputLink value="#{canvasBean.workflowUrl}" style="font-size:13px;" target="_blank">#{messages.label_menu_see_oozie_job}</h:outputLink>
							</rich:menuItem>
	
							<rich:menuSeparator />
		
							<rich:menuItem id="runMenuItem" submitMode="ajax"
								value="#{messages.label_menu_runitems}"
								onclick="var sels=getSelectedIconsCommaDelimited();if(sels.length > 0){runWorkflow(getIconPositions(),getPathFile(getSelectedByName()),sels)}else{alert('#{messages.run_nothing_selected}')}"
								reRender="formMenu,domMessageDivCanvas2,killProcessBtn">
								<h:outputText value="Ctrl+Alt+R" class="menuItemHotKey"/>
							</rich:menuItem>
	
							<rich:menuItem id="runSelectedMenuItem" submitMode="ajax"
								value="#{messages.label_menu_runproject}"
								onclick="runWorkflow(getIconPositions(),getPathFile(getSelectedByName()))"
								reRender="formMenu,domMessageDivCanvas2,killProcessBtn">
								<h:outputText value="Ctrl+R" class="menuItemHotKey"/>
							</rich:menuItem>
	
							<rich:menuSeparator />
	
							<rich:menuItem id="cleanMenuItem" submitMode="ajax"
								value="#{messages.label_menu_clean_project}"
								action="#{canvasBean.cleanCanvasProject}"
								oncomplete="updateAllArcsStatus();" >
								<h:outputText value="Ctrl+L" class="menuItemHotKey"/>
							</rich:menuItem>
	
							<rich:menuGroup value="#{messages.label_menu_generate}">
	
								<rich:menuItem submitMode="ajax"
									value="#{messages.label_menu_regeneratecopy_project}"
									action="#{canvasBean.regeneratePathsProjectCopy}"
									oncomplete="updateAllArcsStatus();" />
	
								<rich:menuItem submitMode="ajax"
									value="#{messages.label_menu_regeneratemove_project}"
									action="#{canvasBean.regeneratePathsProjectMove}"
									oncomplete="updateAllArcsStatus();" />
	
							</rich:menuGroup>
		
							<rich:menuSeparator />
		
							<rich:menuItem id="installationMenuItem" submitMode="ajax"
								value="#{messages.label_menu_package}"
								onclick="openPackageModal();">
								<h:outputText value="Ctrl+I" class="menuItemHotKey"/>
							</rich:menuItem>
							
							<rich:menuItem id="settingsMenuItem" submitMode="ajax"
                                value="#{messages.label_setting_modal}"
                                onclick="#{rich:component('modalSettings')}.show();">
                                <h:outputText value="Ctrl+Alt+P" class="menuItemHotKey"/>
                            </rich:menuItem>
		
						</rich:dropDownMenu>
		
		
						<rich:toolBarGroup location="right">
						
						  <a4j:commandButton value="#{messages.label_menu_signout}"
                            styleClass="signoutButton"
                            onclick="saveAllPositions(getAllIconPositions());jQuery.blockUI({ message: jQuery('#domMessageDivCanvas1') });signOut();"
                            ajax="true" />
                       
                                
						    <!-- Restart does not work
							<rich:dropDownMenu value="#{messages.label_menu_signout}">
		
								<f:facet name="label">
									<h:panelGroup styleClass="signoutButton">
                                        <h:outputText value="#{messages.label_menu_signout}" />
                                    </h:panelGroup>
								</f:facet>
		
								<rich:menuItem submitMode="ajax"
									value="#{messages.label_menu_signout}"
									onclick="saveAllPositions(getAllIconPositions());jQuery.blockUI({ message: jQuery('#domMessageDivCanvas1') });signOut();" />
	
								<rich:menuItem submitMode="ajax"
									value="#{messages.label_menu_restart}"
									onclick="jQuery.blockUI({ message: jQuery('#domMessageDivCanvas1') });reStart();" />
		
							</rich:dropDownMenu>
							-->
						</rich:toolBarGroup>
		
					</rich:toolBar>
					<div id="shortMenu" class="divMenu">
						<div class="divMenuImage">
							<span style="cursor:pointer;">
								<img src="../image/icons/button-open.gif" alt="open" class="shortMenuIcon" onclick="openModalLoadWorkflow()" title="#{messages.label_menu_open}" />
							</span>
							<span style="cursor:pointer;">
								<img src="../image/icons/button-save.gif" alt="save" class="shortMenuIcon" onclick="menuSave()" title="#{messages.label_menu_save}" />
							</span>
							<span style="cursor:pointer;">
								<img src="../image/icons/button-save_as.gif" alt="saveas" class="shortMenuIcon" onclick="openModalSaveWorkflow();" title="#{messages.label_menu_saveas}" />
							</span>
							<span style="cursor:pointer;">
								<img src="../image/icons/button-save_all.gif" alt="saveall" class="shortMenuIcon" onclick="saveAll();" title="#{messages.label_menu_saveall}" />
							</span>
						</div>
					</div>
					</h:panelGrid>
                    </td>
                    </tr>
                </table>
				<!-- </h:panelGrid> -->

			</a4j:region>

			<a4j:jsFunction name="signOut" action="#{userInfoBean.goToSignOut}" oncomplete="jQuery.unblockUI();" />
			<a4j:jsFunction name="reStart" action="#{userInfoBean.goToSignOut}" oncomplete="jQuery.unblockUI();" />

		</h:form>
	</div>

	<div id="mainPanelDiv">


	<div id="splitVCanvas">

			<div id="tabFlowchart">
				<ul class="ulCss" id="ulTabFlowchart" >

					<li class="locked">
						<a href="#tabFlowchart-1" id="idtabFlowchart-1" onclick="jQuery('#helpmain_canvas').click();return false;">
							<h:outputText value="#{messages.label_tab_flowchart}" />
						</a>
					</li>
                    <li class="locked">
                    	<a href="#tabs-8" id="idtabs-8" onclick="jQuery('#helpmain_ssh').click();return false;" >
                    		<h:outputText value="#{messages.label_tab_remotefilesystem}" />
                    	</a>
                    </li>
					<button id="changeTabCanvas" style="border: hidden;">&#9660;</button>

				</ul>
				<div id="tabFlowchart-1">

					<div id="canvas-tabs">
						<ul class="ulCssCanvas">
							<li class="locked"><a href="#flowchart-canvas-1"
								onclick="jQuery('#canvas-tabs').block({ message: jQuery('#domMessageDivCanvas1') });setWorkflow('canvas-1');">canvas-1</a>
								<span id="canvas-1-icon-close" class="ui-icon ui-icon-close" role="presentation"
								onclick="closeWorkflowTab(this,'canvas-1')"></span>
							</li>
							<img src="../image/icons/button-new_canvas.gif" alt="add" style="width: 16px; padding-top: 2px;" id="addtabCanvas" />
						</ul>

						<span id="buttonsCanvas1" class="spanButtons">
							<button class="buttonsArrowsLeft">
								<img src="../image/icons/button-left_arrow.gif"
									style="width: 16px;" />
							</button>
							<button class="buttonsArrowsRight">
								<img src="../image/icons/button-right_arrow.gif"
									style="width: 16px;" />
							</button>
						</span>

						<div id="flowchart-canvas-1" class="container-canvas">

							<div id="container-canvas-1" class="container-canvas-1">
								<div class="rich-panel headerLegend"
									onclick="jQuery('#panelLegend-canvas-1').toggle();return false;"
									style="position: fixed; z-index: 101; width: 190px">
									<div class="rich-panel-header">Legend</div>
								</div>
								<div class="rich-panel" id="panelLegend-canvas-1"
									style="position: fixed; z-index: 100; display: none; width: 190px; height: 330px">
									<div class="rich-panel-body" style="overflow: hidden;">
										<div id="container-legend-canvas-1"
											class="container-legend-canvas-1"
											style="overflow: hidden; position: relative; top: 20px;" />
									</div>
								</div>
							</div>

						</div>
						<h:panelGroup id="tabsFooterForm">
							<div id="tabsFooter">
								<ul class="ulCssCanvasFooter">

									<ui:repeat value="#{configureTabsBean.tabs}" var="tab" varStatus="status">
										<li class="locked"><a href="#tabFooter-#{tab}">#{tab}</a></li>
									</ui:repeat>
									
									<h:form>
									
									<a4j:region>
										<a4j:commandButton image="../image/icons/button-property.gif" title="#{messages.label_property_button}"
											action="#{configureTabsBean.openCanvasScreen}"
											oncomplete="#{rich:component('modalConfigureFooterTabs')}.show();document.getElementById('helpmain_actfooter').click();"
											style="border: hidden;width:22px;vertical-align:middle;" styleClass="configureFooterButton"/>
									</a4j:region>
									
									</h:form>
									
								</ul>

								<span id="buttonsTabsFooter" class="spanButtons">
									<button class="buttonsArrowsLeft">
										<img src="../image/icons/button-left_arrow.gif"
											style="width: 16px;" />
									</button>
									<button class="buttonsArrowsRight">
										<img src="../image/icons/button-right_arrow.gif"
											style="width: 16px;" />
									</button>
								</span>

								<ui:repeat value="#{configureTabsBean.menuWAList}" var="tab">
									<div id="tabFooter-#{tab.key}">
										<p>
											<ui:repeat value="#{tab.value}" var="action">
												<span id="spanImagensObj" style="display: none"> <img
													src="#{action[1]}" class="footerIcon" />
													<span>#{action[0]}</span>
												</span>
											</ui:repeat>
										</p>
									</div>
								</ui:repeat>
							</div>
						</h:panelGroup>

					</div>

				</div>
				                
                <div id="tabs-8">
                    <a4j:region>

                        <a4j:status
                            onstart="jQuery('#tabs-8').block({ message: jQuery('#domMessageDiv8') });"
                            onerror="jQuery('#tabs-8').unblock();"
                            onsuccess="jQuery('#tabs-8').unblock();"
                            onstop="jQuery('#tabs-8').unblock();" />

                        <div id="domMessageDiv8" style="display: none;">
                            <img src="../image/icons/waiting.gif" />
                        </div>

                        <h:panelGroup>
                            <ui:include src="/pages/ssh/sshfileSystemGrid.xhtml" />
                        </h:panelGroup>
                    </a4j:region>
                </div>
			</div>



		<div id="splitHCanvas">
			<div id="tabs1">
				<ul class="ulCss" id="ulTabs1">

					<li>
						<a href="#tabs-1" onclick="jQuery('#helpmain_help').click();return false;" >
							<h:outputText value="#{messages.label_tab_help}" />
						</a>
					</li>
					<li>
						<a href="#tabs-2" onclick="jQuery('#helpmain_procman').click();return false;">
							<h:outputText value="#{messages.label_tab_processmanager}" />
						</a>
					</li>
					<li>
						<a href="#tabs-3" onclick="jQuery('#helpmain_error').click();return false;">
							<h:outputText value="#{messages.label_tab_error}" />
						</a>
					</li>

					<button id="changeTabTabs1" style="border: hidden;">&#9660;</button>

				</ul>

				<span id="buttonsTabs1" class="spanButtons">
					<button class="buttonsArrowsLeft">
						<h:graphicImage  width="22px" value="../image/icons/button-left_arrow.gif"/>
					</button>
					<button class="buttonsArrowsRight">
						<h:graphicImage  width="22px" value="../image/icons/button-right_arrow.gif"/>
					</button>
				</span>

				<div id="tabs-1" style="overflow:auto;">
					<a4j:region>

						<a4j:status
							onstart="jQuery('#tabs-1').block({ message: jQuery('#domMessageDiv1') });"
							onerror="jQuery('#tabs-1').unblock();"
							onsuccess="jQuery('#tabs-1').unblock();"
							onstop="jQuery('#tabs-1').unblock();" />

						<div id="domMessageDiv1" style="display: none;">
							<img src="../image/icons/waiting.gif" />
						</div>

						<h:panelGroup >
							<ui:include src="/pages/help.xhtml" />
						</h:panelGroup>
					</a4j:region>
				</div>
				<div id="tabs-2" style="overflow:hidden;">
					<a4j:region>

						<a4j:status
							onstart="jQuery('#tabs-2').block({ message: jQuery('#domMessageDiv2') });"
							onerror="jQuery('#tabs-2').unblock();"
							onsuccess="jQuery('#tabs-2').unblock();"
							onstop="jQuery('#tabs-2').unblock();" />

						<div id="domMessageDiv2" style="display: none;">
							<img src="../image/icons/waiting.gif" />
						</div>

						<h:panelGroup>
							<ui:include src="/pages/processManager.xhtml" />
						</h:panelGroup>
					</a4j:region>
				</div>
				<div id="tabs-3" style="overflow:hidden;">

					<h:panelGroup>
						<ui:include src="/pages/errorCanvas.xhtml" />
					</h:panelGroup>

				</div>
			</div>


			<div id="tabs2">
				<ul class="ulCss" id="ulTabs2">
					<li>
						<a href="#tabs-7" onclick="jQuery('#helpmain_hdfs').click();return false;">
							<h:outputText value="#{messages.label_tab_hadoopfilesystem}" />
						</a>
					</li>
                    <li>
                    	<a href="#tabs-4" onclick="jQuery('#helpmain_hive').click();return false;">
                    		<h:outputText value="#{messages.label_tab_hiveview}" />
                    	</a>
                    </li>
                    

					<button id="changeTabTabs2" style="border: hidden;">&#9660;</button>

				</ul>

				<span id="buttonsTabs2" class="spanButtons">
					<button class="buttonsArrowsLeft">
						<h:graphicImage  width="22px" value="../image/icons/button-left_arrow.gif"/>
					</button>
					<button class="buttonsArrowsRight">
						<h:graphicImage  width="22px" value="../image/icons/button-right_arrow.gif"/>
					</button>
				</span>

				<div id="tabs-7" style="overflow:hidden;">
					<a4j:region>

						<a4j:status
							onstart="jQuery('#tabs-7').block({ message: jQuery('#domMessageDiv7') });"
							onerror="jQuery('#tabs-7').unblock();"
							onsuccess="jQuery('#tabs-7').unblock();"
							onstop="jQuery('#tabs-7').unblock();" />

						<div id="domMessageDiv7" style="display: none;">
							<img src="../image/icons/waiting.gif" />
						</div>

						<h:panelGroup>
							<ui:include src="/pages/hdfs/hdfsfileSystemGrid.xhtml" />
						</h:panelGroup>
					</a4j:region>
				</div>
                <div id="tabs-4" style="overflow:hidden;">
                    <a4j:region>

                        <a4j:status
                            onstart="jQuery('#tabs-4').block({ message: jQuery('#domMessageDiv4') });"
                            onerror="jQuery('#tabs-4').unblock();"
                            onsuccess="jQuery('#tabs-4').unblock();"
                            />

                        <div id="domMessageDiv4" style="display: none;">
                            <img src="../image/icons/waiting.gif" />
                        </div>

                        <h:panelGroup>
                           <ui:include src="/pages/hive/hivefileSystemGrid.xhtml" />
                        </h:panelGroup>
                    </a4j:region>
                </div>
                
			</div>

		</div>
	</div>
	</div>

	<a4j:region>
		<rich:modalPanel id="canvasModalPanel" width="800" height="600"
			style="overflow:auto;" resizeable="false" styleClass="noMaskClass">

			<f:facet name="header">
				<h:outputText value="#{canvasModalBean.canvasTitle}" id="pageTitle" />
			</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('canvasModalPanel')}.hide()" />
			</f:facet>

			<h:panelGroup>
				<a4j:include viewId="/pages/canvasModal.xhtml" ajaxRendered="false" />
			</h:panelGroup>

		</rich:modalPanel>
	</a4j:region>

	<a4j:region>
		<rich:modalPanel id="modalConfigureFooterTabs" width="800" height="420" style="overflow:auto;" resizeable="false" styleClass="noMaskClass">

			<f:facet name="header">Configuration</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalConfigureFooterTabs')}.hide()" />
			</f:facet>

				<h:panelGroup>
					<a4j:include viewId="/pages/configureFooterTabs.xhtml" ajaxRendered="true" />
				</h:panelGroup>

		</rich:modalPanel>
	</a4j:region>

	<a4j:region>
		<rich:modalPanel id="modalFileHdfs" width="600" height="430" style="overflow:hide;" resizeable="false">

			<f:facet name="header" >Hadoop Distributed File System Browser</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalFileHdfs')}.hide()" />
			</f:facet>

            <h:form>
				<h:panelGroup>
					<a4j:include viewId="/pages/modalFileHdfs.xhtml" ajaxRendered="true" />
				</h:panelGroup>
			</h:form>

		</rich:modalPanel>
	</a4j:region>

	<a4j:region renderRegionOnly="true">
		<rich:modalPanel id="modalSelectLink" width="300" height="200"
			style="overflow:auto;" resizeable="false">

			<f:facet name="header">Create Link</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalSelectLink')}.hide()" />
			</f:facet>

			<h:form id="formSelectLink">
				<h:panelGroup>
					<a4j:include viewId="/pages/selectLink.xhtml" ajaxRendered="true" />
				</h:panelGroup>
			</h:form>

		</rich:modalPanel>
	</a4j:region>

	<a4j:region>
		<rich:modalPanel id="modalChangeId" width="250" height="145"
			style="overflow:auto;" resizeable="true" zindex="2000">

			<f:facet name="header" >Change Element Id</f:facet>

			<h:form>
				<h:panelGroup>
					<a4j:include viewId="/pages/modalChangeId.xhtml" ajaxRendered="true" />
				</h:panelGroup>
			</h:form>

		</rich:modalPanel>
	</a4j:region>
	
	<a4j:region>
		<rich:modalPanel id="modalPackage" width="600" height="460"
			style="overflow:auto;" resizeable="false">

			<f:facet name="header">Packages</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="../image/icons/buttonCloseWindow.gif"
					style="cursor:pointer;width:22px;"
					onclick="#{rich:component('modalPackage')}.hide()" />
			</f:facet>

			<h:panelGroup>
				<a4j:include viewId="/pages/modalPackage.xhtml" ajaxRendered="true" />
			</h:panelGroup>

		</rich:modalPanel>
	</a4j:region>
	
    <a4j:region>
        <rich:modalPanel id="modalInstallPackage" width="900"
            height="600" resizeable="true">
            <f:facet name="header">Packages</f:facet>
            <f:facet name="controls">
                <h:graphicImage
                    value="../image/icons/buttonCloseWindow.gif"
                    style="cursor:pointer;width:22px;"
                    onclick="#{rich:component('modalInstallPackage')}.hide()" />
            </f:facet>
                <h:panelGroup>
                    <a4j:include
                        viewId="/pages/modalInstallPackage.xhtml"
                        ajaxRendered="true" />
                </h:panelGroup>
        </rich:modalPanel>
    </a4j:region>
    
    <a4j:region renderRegionOnly="true">
        <rich:modalPanel id="modalSettings" width="800" height="600"
            style="overflow:auto;" resizeable="false">

            <f:facet name="header">
                <h:outputText value="#{messages.label_setting_modal}" />
            </f:facet>
            <f:facet name="controls">
                <h:graphicImage value="../image/icons/buttonCloseWindow.gif"
                    style="cursor:pointer;width:22px;"
                    onclick="#{rich:component('modalSettings')}.hide()" />
            </f:facet>

            <h:panelGroup>
                <a4j:include viewId="/pages/modalSettings.xhtml" ajaxRendered="true" />
            </h:panelGroup>

        </rich:modalPanel>
    </a4j:region>
    
    <rich:modalPanel id="msnErrorPage" showWhenRendered="#{requestScope['msnErrorPage'] != null}">
		<center>

			<table>
				<tr>
					<td>
						<rich:messages id="msgPage" globalOnly="false" layout="list"
							styleClass="message" infoClass="messageok"
							errorClass="messageerro" warnClass="messagealert"
							showDetail="true" showSummary="false" ajaxRendered="false" />
					</td>
				</tr>
			</table>

			<br /> <br />

			<a4j:commandButton styleClass="greenButton" value="#{messages.button_ok}"
				onclick="#{rich:component('msnErrorPage')}.hide(); return false;"
				reRender="msnErrorPage, msgPage, errorTable" />

		</center>
	</rich:modalPanel>
	
	<rich:modalPanel id="msnError" showWhenRendered="#{requestScope['msnError'] != null}">
		<center>

			<table>
				<tr>
					<td>
						<rich:messages id="msg" globalOnly="false" layout="list"
							styleClass="message" infoClass="messageok"
							errorClass="messageerro" warnClass="messagealert"
							showDetail="true" showSummary="false" ajaxRendered="false" />
					</td>
				</tr>
			</table>

			<br /> <br />

			<a4j:commandButton styleClass="greenButton" value="#{messages.button_ok}"
				onclick="#{rich:component('msnError')}.hide(); return false;"
				reRender="msnError, msg, errorTable" />

		</center>
	</rich:modalPanel>
	
	<rich:modalPanel id="msnSuccess" showWhenRendered="#{requestScope['msnSuccess'] != null}">
		<center>

			<table>
				<tr>
					<td>
						<rich:messages id="msgS" globalOnly="false" layout="list"
							styleClass="message" infoClass="messageok"
							errorClass="messageerro" warnClass="messagealert"
							showDetail="true" showSummary="false" ajaxRendered="false" />
					</td>
				</tr>
			</table>

			<br /> <br />

			<a4j:commandButton styleClass="greenButton" value="#{messages.button_ok}"
				onclick="#{rich:component('msnSuccess')}.hide(); return false;"
				reRender="msnSuccess, msgS" />

		</center>
	</rich:modalPanel>
	
</body>
</html>
