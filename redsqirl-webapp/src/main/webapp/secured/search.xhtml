<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"   
      xmlns:ui="http://java.sun.com/jsf/facelets"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
      
	<head>
   		<link rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/table-style.css" />
   		<script src='#{facesContext.externalContext.requestContextPath}/js/jquery-1.9.1.js' type="text/javascript"></script>
   		<script src='#{facesContext.externalContext.requestContextPath}/js/redsqirl-pck-manager.js' type="text/javascript"></script>
    </head>
 
 	<body>
		
		<h:form>
		
			<h:panelGroup layout="block" rendered="#{analyticsStoreSearchBean.analyticsStoreLoginBean.role == 'ADMIN'}" >
				<h:outputLink value="moduleInstallations.xhtml" >Installations</h:outputLink>
			</h:panelGroup>
		
			<h:panelGroup layout="block" class="searchBar">
				<h:outputText value="Search:"/>
				<h:inputText value="#{analyticsStoreSearchBean.searchValue}"/>
				<a4j:commandButton value="Search" action="#{analyticsStoreSearchBean.retrieveAllPackageList}" render="out">
					<f:param name="type" value="#{param['type']}" />
				</a4j:commandButton>
			</h:panelGroup>
		</h:form>
				 				
		<a4j:outputPanel id="out" ajaxRendered="true">
			<h:panelGroup layout="block" class="packageList">
				<a4j:repeat value="#{analyticsStoreSearchBean.allPackageList}" var="pck">
				 	<div class="packageItem" onclick="goToUrl(event, this);">
	                	<h:panelGroup layout="block" class="type" style="float:right;">
							<h:outputText value="#{pck.type}"/>
						</h:panelGroup>
	                	<h:graphicImage value="#{pck.image}" 
	                		width="100" height="100" styleClass="image"/>
					 	<h:panelGroup layout="block" class="title">
							<h:outputLink styleClass="hiddenLink" value="moduleDetail.xhtml">
							    <f:param name="id" value="#{pck.id}" />
							    <f:param name="userInstall" value="#{packageMngBean.userInstall}" />
							</h:outputLink>
							<h:outputText value="#{pck.name}"/>
						</h:panelGroup>
						<h:panelGroup layout="block" class="license">
						    <h:outputText value="#{pck.tags}  "/>
						</h:panelGroup>
					 </div>
				</a4j:repeat>
			</h:panelGroup>
		</a4j:outputPanel>
		
	</body>
</html>